<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!--This file was converted to xhtml by OpenOffice.org - see http://xml.openoffice.org/odf2xhtml for more info.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title xml:lang="en-US">SignServer 3.1 - Manual</title><meta name="DCTERMS.title" content="" xml:lang="en-US"/><meta name="DCTERMS.language" content="en-US" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.issued" content="2006-01-26T08:48:46" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.contributor" content="Markus KilÃ¥s"/><meta name="DCTERMS.modified" content="2009-09-17T12:25:54" scheme="DCTERMS.W3CDTF"/><meta name="DCTERMS.provenance" content="" xml:lang="en-US"/><meta name="DCTERMS.subject" content="," xml:lang="en-US"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><base href="."/><style type="text/css">
	@page { size: 8.2673in 11.6925in; margin-top: 0.7874in; margin-bottom: 0.7874in; margin-left: 0.7874in; margin-right: 0.7874in }
	table { border-collapse:collapse; border-spacing:0; empty-cells:show }
	td, th { vertical-align:top; font-size:12pt;}
	h1, h2, h3, h4, h5, h6 { clear:both }
	ol, ul { margin:0; padding:0;}
	li { list-style: none; margin:0; padding:0;}
	li span.odfLiEnd { clear: both; line-height:0; width:0; height:0; margin:0; padding:0; }
	span.footnodeNumber { padding-right:1em; }
	* { margin:0; }
	.fr1 { color:#000000; font-size:12pt; text-align:center; vertical-align:top; }
	.fr2 { color:#000000; font-size:12pt; vertical-align:top; margin-left:0in; margin-right:0in; margin-top:0in; margin-bottom:0in; padding:0in; border-style:none; }
	.Contents_20_1 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.Contents_20_2 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.139in; margin-right:0in; text-indent:0.0008in; }
	.Contents_20_3 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.278in; margin-right:0in; text-indent:0.0008in; }
	.Contents_20_4 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.4165in; margin-right:0in; text-indent:0.0008in; }
	.Contents_20_5 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5555in; margin-right:0in; text-indent:0.0008in; }
	.Contents_20_6 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.6945in; margin-right:0in; text-indent:0.0008in; }
	.Contents_20_7 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.8335in; margin-right:0in; text-indent:0.0008in; }
	.Contents_20_8 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.972in; margin-right:0in; text-indent:0.0008in; }
	.Contents_20_9 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:1.111in; margin-right:0in; text-indent:0.0008in; }
	.Contents_20_Heading { background-color:transparent; color:#000000; font-size:14pt; font-weight:bold; margin-bottom:0.0835in; margin-top:0.1665in; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.Heading_20_1 { background-color:transparent; color:#000000; font-size:14pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; margin-top:0.1665in; margin-bottom:0.0835in; text-indent:0in; font-weight:bold; }
	.Heading_20_2 { background-color:transparent; color:#000000; font-size:14pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; margin-top:0.0835in; margin-bottom:0in; text-indent:0in; font-style:italic; }
	.Heading_20_3 { background-color:transparent; color:#000000; font-size:14pt; text-align:left ! important; font-family:Times; margin-left:0in; margin-right:0in; text-indent:0in; font-style:italic; font-weight:normal; }
	.Heading_20_4 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; margin-top:0.1665in; margin-bottom:0.0417in; text-indent:0in; }
	.Horizontal_20_Line { background-color:transparent; color:#000000; font-size:6pt; text-align:left ! important; font-family:Times New Roman; margin-top:0in; margin-bottom:0.1965in; padding:0in; border-left-style:none; border-right-style:none; border-top-style:none; border-bottom-width:0.0399cm; border-bottom-style:double; border-bottom-color:#808080; }
	.P10 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P100 { background-color:transparent; color:#000000; font-size:8pt; text-align:left ! important; font-family:Courier New; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P101 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Courier New; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P102 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P103 { background-color:transparent; color:#000000; font-size:8pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P104 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P105 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P106 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P107 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P108 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; font-style:italic; }
	.P109 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; font-style:normal; font-weight:normal; }
	.P11 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P110 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P111 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; font-style:italic; }
	.P112 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Courier New; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P113 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P114 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Courier New; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P115 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P116 { background-color:transparent; color:#000000; font-size:28pt; font-weight:normal; line-height:0.3335in; margin-bottom:0.3335in; margin-left:0in; margin-right:0in; margin-top:1.25in; text-align:center ! important; text-indent:0in; font-family:Verdana; }
	.P117 { background-color:transparent; color:#000000; font-size:10pt; font-style:italic; margin-bottom:0.0835in; margin-top:0.0835in; text-align:center ! important; font-family:Times New Roman; }
	.P118 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P119 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P12 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; font-style:normal; }
	.P120 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P121 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P122 { background-color:transparent; border-bottom-width:0.0399cm; border-bottom-style:double; border-bottom-color:#808080; border-left-style:none; border-right-style:none; border-top-style:none; color:#000000; font-size:12pt; margin-bottom:0.1965in; margin-top:0in; padding:0in; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P123 { background-color:transparent; border-bottom-width:0.0399cm; border-bottom-style:double; border-bottom-color:#808080; border-left-style:none; border-right-style:none; border-top-style:none; color:#000000; font-size:6pt; margin-bottom:0.1965in; margin-top:0in; padding:0in; text-align:left ! important; font-family:Times New Roman; }
	.P124 { background-color:transparent; border-bottom-width:0.0399cm; border-bottom-style:double; border-bottom-color:#808080; border-left-style:none; border-right-style:none; border-top-style:none; color:#000080; font-size:10pt; margin-bottom:0.1965in; margin-top:0in; padding:0in; text-align:left ! important; font-family:Courier New; }
	.P125 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P126 { background-color:transparent; color:#000000; font-size:12pt; margin-left:0.139in; margin-right:0in; text-align:left ! important; text-indent:0.0008in; font-family:Times New Roman; }
	.P127 { background-color:transparent; color:#000000; font-size:12pt; margin-left:0.278in; margin-right:0in; text-align:left ! important; text-indent:0.0008in; font-family:Times New Roman; }
	.P128 { background-color:transparent; color:#000000; font-size:12pt; margin-left:0.4165in; margin-right:0in; text-align:left ! important; text-indent:0.0008in; font-family:Times New Roman; }
	.P129 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P13 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Verdana; }
	.P130 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Verdana; }
	.P131 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Verdana; }
	.P132 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Verdana; }
	.P133 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Verdana; }
	.P134 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P135 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P136 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P137 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P138 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P139 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P14 { background-color:transparent; color:#000000; font-size:8pt; text-align:left ! important; font-family:Verdana; }
	.P140 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P141 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P142 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P143 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P144 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P145 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P146 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P147 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; margin-left:-0.0102in; margin-right:0in; text-indent:0in; }
	.P148 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; margin-left:-0.5in; margin-right:0in; text-indent:0in; }
	.P149 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P15 { background-color:transparent; color:#000000; font-size:14pt; text-align:left ! important; font-family:TimesNewRomanPS-ItalicMT; font-style:italic; }
	.P150 { background-color:transparent; color:#000000; font-size:14pt; font-style:italic; margin-bottom:0in; margin-left:0in; margin-right:0in; margin-top:0.0835in; text-align:left ! important; text-indent:0in; font-family:Times New Roman; }
	.P151 { background-color:transparent; color:#000000; font-size:14pt; font-style:italic; margin-bottom:0in; margin-left:0in; margin-right:0in; margin-top:0.0835in; text-align:left ! important; text-indent:0in; font-family:Times New Roman; }
	.P152 { background-color:transparent; color:#000000; font-size:14pt; font-weight:bold; margin-bottom:0.0835in; margin-left:0in; margin-right:0in; margin-top:0.1665in; text-align:left ! important; text-indent:0in; font-family:Times New Roman; }
	.P153 { background-color:transparent; color:#000000; font-size:14pt; font-weight:bold; margin-bottom:0.0835in; margin-left:0in; margin-right:0in; margin-top:0.1665in; text-align:left ! important; text-indent:0in; font-family:Times New Roman; }
	.P154 { background-color:transparent; color:#000000; font-size:28pt; font-weight:bold; line-height:0.3335in; margin-bottom:0.3335in; margin-left:0.5043in; margin-right:0in; margin-top:1.25in; text-align:center ! important; text-indent:0.0008in; font-family:Verdana; }
	.P155 { background-color:transparent; color:#000000; font-size:14pt; font-style:italic; font-weight:normal; margin-left:0in; margin-right:0in; text-align:left ! important; text-indent:0in; font-family:Times; }
	.P156 { background-color:transparent; color:#000000; font-size:14pt; font-style:italic; font-weight:normal; margin-left:0in; margin-right:0in; text-align:left ! important; text-indent:0in; font-family:Times; }
	.P16 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:CourierNewPSMT; }
	.P17 { background-color:transparent; color:#000000; font-size:8pt; text-align:left ! important; font-family:CourierNewPSMT; }
	.P18 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P19 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P20 { background-color:transparent; color:#000000; font-size:9pt; text-align:left ! important; font-family:OpenSymbol; }
	.P21 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Courier New; }
	.P22 { background-color:transparent; color:#000000; font-size:8pt; text-align:left ! important; font-family:Courier New; }
	.P23 { background-color:transparent; color:#2a00ff; font-size:10pt; text-align:left ! important; font-family:CourierNewPSMT; }
	.P24 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P25 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P26 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P27 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:normal; font-weight:normal; }
	.P28 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:italic; font-weight:bold; }
	.P29 { background-color:transparent; color:#000000; font-size:12pt; text-align:center ! important; font-family:Times New Roman; font-style:italic; font-weight:bold; }
	.P30 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:italic; }
	.P31 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:italic; font-weight:normal; }
	.P32 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:normal; font-weight:normal; }
	.P33 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:normal; }
	.P34 { background-color:transparent; color:#0000ff; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P35 { background-color:transparent; color:#3f5fc0; font-size:8pt; text-align:left ! important; font-family:CourierNewPSMT; }
	.P36 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-weight:normal; }
	.P37 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P38 { background-color:transparent; color:#000000; font-size:8pt; text-align:left ! important; font-family:Courier New; }
	.P39 { background-color:transparent; color:#000000; font-size:8pt; text-align:left ! important; font-family:Courier New; }
	.P40 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Courier New; }
	.P41 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Courier New; }
	.P42 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P43 { background-color:transparent; color:#000000; font-size:8pt; text-align:left ! important; font-family:Courier New; font-style:italic; }
	.P44 { background-color:transparent; color:#000000; font-size:14pt; text-align:left ! important; font-family:Times New Roman; font-style:italic; font-weight:normal; }
	.P45 { background-color:transparent; color:#000000; font-size:14pt; text-align:left ! important; font-family:Times New Roman; font-style:italic; }
	.P46 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:normal; font-weight:normal; }
	.P47 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P48 { background-color:transparent; color:#3f5fbf; font-size:10pt; text-align:left ! important; font-family:Courier New; }
	.P49 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P50 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:normal; }
	.P51 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:normal; font-weight:normal; }
	.P52 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P53 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P54 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:italic; }
	.P55 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Courier New; }
	.P56 { background-color:transparent; color:#000000; font-size:18pt; font-weight:normal; margin-bottom:0in; margin-top:0.139in; text-align:center ! important; font-family:Times; }
	.P57 { background-color:transparent; color:#000000; font-size:18pt; font-weight:normal; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Times; }
	.P58 { background-color:transparent; color:#000000; font-size:18pt; font-weight:bold; margin-bottom:0in; margin-top:0in; text-align:center ! important; font-family:Verdana; }
	.P59 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P60 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P61 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:CourierNewPSMT; }
	.P62 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Verdana; }
	.P63 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; }
	.P64 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:italic; font-weight:bold; }
	.P65 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:italic; }
	.P66 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P67 { background-color:transparent; color:#000000; font-size:10pt; font-style:italic; margin-bottom:0.0835in; margin-top:0.0835in; text-align:center ! important; font-family:Times New Roman; }
	.P68 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Times New Roman; }
	.P69 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.P70 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; font-style:italic; font-weight:bold; }
	.P71 { background-color:transparent; color:#000000; font-size:12pt; text-align:center ! important; font-family:Times New Roman; font-style:italic; font-weight:bold; }
	.P72 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Times New Roman; }
	.P73 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Times New Roman; }
	.P74 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Times New Roman; text-decoration:none ! important; }
	.P75 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; }
	.P76 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; font-style:normal; font-weight:normal; }
	.P77 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; }
	.P78 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; }
	.P79 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; font-style:italic; font-weight:bold; }
	.P80 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; font-style:normal; font-weight:normal; }
	.P81 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; }
	.P82 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; }
	.P83 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; font-style:normal; font-weight:normal; }
	.P84 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; font-style:normal; font-weight:normal; }
	.P85 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; font-style:italic; font-weight:bold; }
	.P86 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; font-style:italic; font-weight:bold; }
	.P87 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Courier New; margin-left:0.5in; margin-right:0in; text-indent:0in; }
	.P88 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Courier New; margin-left:0.5in; margin-right:0in; text-indent:0in; font-style:italic; font-weight:bold; }
	.P89 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0.5in; margin-right:0in; text-indent:0in; font-style:normal; font-weight:normal; }
	.P9 { background-color:transparent; color:#000000; font-size:12pt; text-align:center ! important; font-family:Times New Roman; font-style:italic; }
	.P90 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:1in; margin-right:0in; text-indent:0in; }
	.P91 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; padding:0.0291in; border-left-style:none; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.P92 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:TimesNewRomanPSMT; padding:0.0291in; border-left-style:none; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.P93 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; padding:0.0291in; border-left-style:none; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.P94 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P95 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; font-style:italic; font-weight:normal; }
	.P96 { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P97 { background-color:transparent; color:#000000; font-size:8pt; text-align:left ! important; font-family:Courier New; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P98 { background-color:transparent; color:#000000; font-size:8pt; text-align:left ! important; font-family:Courier New; margin-left:0in; margin-right:0in; text-indent:0in; }
	.P99 { background-color:transparent; color:#000000; font-size:10pt; text-align:left ! important; font-family:Courier New; margin-left:0in; margin-right:0in; text-indent:0in; }
	.Standard { color:#000000; font-size:12pt; font-family:Times New Roman; text-align:left ! important; background-color:transparent; }
	.Subtitle_20_Cover { background-color:#ffffff; color:#000000; font-size:18pt; font-weight:bold; line-height:0.3335in; margin-bottom:0in; margin-left:0.5783in; margin-right:0.5783in; margin-top:0in; text-align:center ! important; text-indent:0.0008in; font-family:Verdana; }
	.Table_20_Contents { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.Table_20_Heading { background-color:transparent; color:#000000; font-size:12pt; text-align:center ! important; font-family:Times New Roman; font-style:italic; font-weight:bold; }
	.Text_20_body { background-color:transparent; color:#000000; font-size:12pt; text-align:left ! important; font-family:Times New Roman; }
	.Tabell10 { width:6.6924in; float:none; }
	.Tabell2 { width:6.6924in; float:none; }
	.Tabell3 { width:6.6924in; float:none; }
	.Tabell4 { width:6.6924in; float:none; }
	.Tabell5 { width:6.6924in; float:none; }
	.Tabell6 { width:6.6924in; float:none; }
	.Tabell7 { width:6.6924in; float:none; }
	.Tabell8 { width:6.6924in; float:none; }
	.Tabell9 { width:6.6924in; float:none; }
	.Table10 { width:6.6924in; float:none; }
	.Table3 { width:6.6924in; float:none; }
	.Table5 { width:6.6924in; float:none; }
	.Tabell10_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell10_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell10_D1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Tabell10_D2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell2_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell2_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell2_B1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Tabell2_B2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell3_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell3_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell3_B1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Tabell3_B2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell4_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell4_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell4_B1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Tabell4_B2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell5_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell5_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell5_B1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Tabell5_B2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell6_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell6_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell6_B1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Tabell6_B2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell7_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell7_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell7_D1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Tabell7_D2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell8_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell8_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell8_D1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Tabell8_D2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell9_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell9_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell9_D1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Tabell9_D2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table10_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table10_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table10_B1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Table10_B2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table3_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table3_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table3_D1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Table3_D2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table5_A1 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-width:0.0133cm; border-top-style:solid; border-top-color:#000000; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table5_A2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-style:none; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Table5_B1 { padding:0.0382in; border-width:0.0133cm; border-style:solid; border-color:#000000; }
	.Table5_B2 { padding:0.0382in; border-left-width:0.0133cm; border-left-style:solid; border-left-color:#000000; border-right-width:0.0133cm; border-right-style:solid; border-right-color:#000000; border-top-style:none; border-bottom-width:0.0133cm; border-bottom-style:solid; border-bottom-color:#000000; }
	.Tabell10_A { width:1.6569in; }
	.Tabell10_B { width:1.9368in; }
	.Tabell10_C { width:1.2722in; }
	.Tabell10_D { width:1.8264in; }
	.Tabell2_A { width:3.3458in; }
	.Tabell2_B { width:3.3465in; }
	.Tabell3_A { width:3.3458in; }
	.Tabell3_B { width:3.3465in; }
	.Tabell4_A { width:3.3458in; }
	.Tabell4_B { width:3.3465in; }
	.Tabell5_A { width:3.3458in; }
	.Tabell5_B { width:3.3465in; }
	.Tabell6_A { width:3.3458in; }
	.Tabell6_B { width:3.3465in; }
	.Tabell7_A { width:1.6569in; }
	.Tabell7_B { width:1.9368in; }
	.Tabell7_C { width:1.2722in; }
	.Tabell7_D { width:1.8264in; }
	.Tabell8_A { width:1.6569in; }
	.Tabell8_B { width:1.9368in; }
	.Tabell8_C { width:1.2722in; }
	.Tabell8_D { width:1.8264in; }
	.Tabell9_A { width:1.6569in; }
	.Tabell9_B { width:1.9368in; }
	.Tabell9_C { width:1.2722in; }
	.Tabell9_D { width:1.8264in; }
	.Table10_A { width:3.3458in; }
	.Table10_B { width:3.3465in; }
	.Table3_A { width:0.7597in; }
	.Table3_B { width:0.9583in; }
	.Table3_C { width:1in; }
	.Table3_D { width:3.9743in; }
	.Table5_A { width:3.3458in; }
	.Table5_B { width:3.3465in; }
	.Bullet_20_Symbols { font-family:StarSymbol; font-size:9pt; }
	.Example { font-family:Courier New; }
	.Footnote_20_Symbol { vertical-align:super; font-size:58%;}
	.T11 { font-family:Helvetica; }
	.T12 { font-family:Helvetica; font-style:italic; font-weight:normal; }
	.T13 { font-style:normal; }
	.T14 { font-style:normal; font-weight:normal; }
	.T15 { font-family:TimesNewRomanPSMT; font-size:12pt; }
	.T16 { color:#0000ff; font-family:TimesNewRomanPSMT; font-size:12pt; }
	.T17 { color:#0000ff; font-family:CourierNewPSMT; }
	.T18 { color:#000000; }
	.T19 { color:#000000; font-family:Verdana; font-size:10pt; }
	.T2 { font-size:10pt; }
	.T20 { color:#000000; font-family:TimesNewRomanPSMT; font-size:12pt; }
	.T21 { color:#000000; }
	.T22 { color:#000000; font-family:OpenSymbol; font-size:9pt; }
	.T23 { color:#000000; font-family:Courier New; font-size:10pt; }
	.T24 { color:#000000; font-family:Courier New; font-size:10pt; }
	.T25 { color:#000000; font-family:Courier New; font-size:10pt; }
	.T26 { color:#000000; font-family:Courier New; font-size:10pt; text-decoration:none ! important; }
	.T27 { color:#000000; font-family:Courier New; font-size:10pt; font-style:italic; font-weight:bold; }
	.T28 { color:#000000; font-family:Courier New; font-size:10pt; font-style:normal; font-weight:normal; }
	.T29 { color:#000000; font-family:Courier New; }
	.T3 { font-size:10pt; text-decoration:none ! important; }
	.T30 { color:#000000; font-family:Times New Roman; font-size:12pt; }
	.T31 { color:#000000; font-family:Times New Roman; font-size:12pt; text-decoration:none ! important; }
	.T32 { color:#000000; font-family:Times New Roman; font-size:12pt; font-style:italic; font-weight:bold; }
	.T33 { color:#000000; font-family:Times New Roman; font-size:12pt; font-style:italic; }
	.T34 { color:#000000; font-family:Times New Roman; font-size:12pt; font-style:normal; }
	.T35 { color:#000000; }
	.T36 { color:#000000; font-style:italic; text-decoration:none ! important; font-weight:normal; }
	.T37 { color:#000000; font-family:Courier New; font-size:10pt; font-style:normal; font-weight:normal; }
	.T38 { font-family:CourierNewPSMT; }
	.T39 { font-family:CourierNewPSMT; font-size:10pt; }
	.T4 { font-size:10pt; }
	.T40 { color:#2a00ff; font-family:CourierNewPSMT; }
	.T41 { font-family:Courier New; font-size:10pt; }
	.T42 { font-family:Times New Roman; font-size:12pt; }
	.T43 { font-family:Times New Roman; font-size:12pt; }
	.T44 { font-family:Times New Roman; font-size:12pt; }
	.T45 { color:#7f0055; font-family:CourierNewPS-BoldMT; font-weight:bold; }
	.T46 { color:#7f0055; font-weight:bold; }
	.T47 { color:#7f0055; font-weight:bold; }
	.T48 { color:#7f0055; font-family:Courier New; font-weight:bold; }
	.T49 { color:#3f5fc0; font-family:CourierNewPSMT; }
	.T50 { color:#7fa0c0; font-family:CourierNewPS-BoldMT; font-weight:bold; }
	.T51 { font-family:TimesNewRomanPS-BoldItalicMT; font-size:12pt; font-style:normal; text-decoration:none ! important; font-weight:normal; }
	.T52 { font-family:Courier New; font-size:10pt; }
	.T53 { font-family:Courier New; font-size:10pt; }
	.T54 { font-family:Courier New; font-size:10pt; font-style:normal; font-weight:normal; }
	.T55 { font-family:Courier New; font-size:10pt; font-style:normal; font-weight:normal; }
	.T56 { font-family:Times New Roman; font-size:12pt; font-style:normal; text-decoration:none ! important; font-weight:normal; }
	.T57 { font-family:Courier New; font-size:10pt; font-style:normal; font-weight:normal; }
	.T58 { font-family:Courier New; font-style:normal; font-weight:normal; }
	.T59 { color:#3f5fbf; }
	.T6 { font-style:italic; }
	.T60 { color:#3f5fbf; font-family:Courier New; font-size:10pt; font-style:normal; font-weight:normal; }
	.T61 { color:#3f5fbf; font-family:Courier New; font-size:10pt; font-style:normal; font-weight:normal; }
	.T62 { color:#3f5fbf; font-family:Courier New; font-size:10pt; font-style:italic; font-weight:bold; }
	.T63 { font-family:Times New Roman; font-size:12pt; font-style:italic; font-weight:bold; }
	.T64 { font-family:Times New Roman; font-size:12pt; font-style:italic; font-weight:bold; }
	.T65 { font-family:Times New Roman; font-size:12pt; font-style:italic; font-weight:bold; }
	.T66 { font-family:Times New Roman; font-size:12pt; }
	.T67 { font-family:Times New Roman; font-size:12pt; font-style:normal; font-weight:normal; }
	.T68 { font-family:Times New Roman; font-size:12pt; font-style:normal; font-weight:normal; }
	.T69 { font-family:Times New Roman; font-size:12pt; font-style:normal; font-weight:normal; }
	.T7 { font-style:italic; font-weight:bold; }
	.T70 { font-family:Times New Roman; font-size:14pt; font-style:italic; font-weight:normal; }
	.T71 { font-style:italic; font-weight:bold; }
	.T72 { font-style:normal; font-weight:normal; }
	.T73 { font-family:Courier New; font-size:10pt; font-style:normal; font-weight:normal; }
	.T74 { font-family:Courier New; font-size:10pt; font-style:italic; font-weight:bold; }
	.T75 { color:#7f9fbf; font-weight:bold; }
	.T76 { color:#0000c0; font-style:italic; }
	.T77 { color:#7f7f9f; }
	.T78 { color:#000080; }
	.T79 { color:#000080; font-family:Courier New; font-size:10pt; }
	.T8 { font-style:italic; text-decoration:none ! important; font-weight:bold; }
	.T80 { color:#000080; font-family:Courier New; font-size:10pt; }
	.T81 { color:#008000; }
	.T82 { color:#008000; font-family:Courier New; font-size:10pt; }
	.T83 { color:#008000; font-family:Courier New; font-size:10pt; }
	.T84 { text-decoration:none ! important; }
	.WW8Num10z0 { font-family:Symbol; }
	.WW8Num10z1 { font-family:Courier New; }
	.WW8Num10z2 { font-family:Wingdings; }
	.WW8Num11z0 { font-family:Symbol; }
	.WW8Num11z1 { font-family:Courier New; }
	.WW8Num11z2 { font-family:Wingdings; }
	.WW8Num12z0 { font-family:Symbol; }
	.WW8Num12z1 { font-family:Courier New; }
	.WW8Num12z2 { font-family:Wingdings; }
	.WW8Num14z0 { font-family:Symbol; }
	.WW8Num14z1 { font-family:Courier New; }
	.WW8Num14z2 { font-family:Wingdings; }
	.WW8Num16z0 { font-family:Symbol; }
	.WW8Num16z1 { font-family:Courier New; }
	.WW8Num16z2 { font-family:Wingdings; }
	.WW8Num17z0 { font-family:Symbol; }
	.WW8Num17z1 { font-family:Courier New; }
	.WW8Num17z2 { font-family:Wingdings; }
	.WW8Num18z0 { font-family:Symbol; }
	.WW8Num18z1 { font-family:Courier New; }
	.WW8Num18z2 { font-family:Wingdings; }
	.WW8Num19z0 { font-family:Symbol; }
	.WW8Num19z1 { font-family:Courier New; }
	.WW8Num19z2 { font-family:Wingdings; }
	.WW8Num21z0 { font-family:Symbol; }
	.WW8Num21z1 { font-family:Courier New; }
	.WW8Num21z2 { font-family:Wingdings; }
	.WW8Num22z0 { font-family:Symbol; }
	.WW8Num22z1 { font-family:Courier New; }
	.WW8Num22z2 { font-family:Wingdings; }
	.WW8Num24z0 { font-family:Symbol; }
	.WW8Num24z1 { font-family:Courier New; }
	.WW8Num24z2 { font-family:Wingdings; }
	.WW8Num25z0 { font-family:Symbol; }
	.WW8Num25z1 { font-family:Courier New; }
	.WW8Num25z2 { font-family:Wingdings; }
	.WW8Num26z0 { font-family:Symbol; }
	.WW8Num26z1 { font-family:Courier New; }
	.WW8Num26z2 { font-family:Wingdings; }
	.WW8Num27z0 { font-family:Symbol; }
	.WW8Num27z1 { font-family:Courier New; }
	.WW8Num27z2 { font-family:Wingdings; }
	.WW8Num29z0 { font-family:Symbol; }
	.WW8Num29z1 { font-family:Courier New; }
	.WW8Num29z2 { font-family:Wingdings; }
	.WW8Num30z0 { color:#808080; font-family:Symbol; }
	.WW8Num30z1 { font-family:Courier New; }
	.WW8Num30z2 { font-family:Wingdings; }
	.WW8Num30z3 { font-family:Symbol; }
	.WW8Num31z0 { font-family:Symbol; }
	.WW8Num31z1 { font-family:Courier New; }
	.WW8Num31z2 { font-family:Wingdings; }
	.WW8Num32z0 { font-family:Symbol; }
	.WW8Num32z1 { font-family:Courier New; }
	.WW8Num32z2 { font-family:Wingdings; }
	.WW8Num35z0 { font-family:Symbol; }
	.WW8Num35z1 { font-family:Courier New; }
	.WW8Num35z2 { font-family:Wingdings; }
	.WW8Num36z0 { font-family:Symbol; }
	.WW8Num36z1 { font-family:Courier New; }
	.WW8Num36z2 { font-family:Wingdings; }
	.WW8Num37z0 { font-family:Symbol; }
	.WW8Num37z1 { font-family:Courier New; }
	.WW8Num37z2 { font-family:Wingdings; }
	.WW8Num39z0 { font-family:Symbol; }
	.WW8Num39z1 { font-family:Courier New; }
	.WW8Num39z2 { font-family:Wingdings; }
	.WW8Num3z0 { font-family:Times New Roman; font-size:12pt; font-style:normal; font-weight:bold; }
	.WW8Num40z0 { font-family:Symbol; }
	.WW8Num40z1 { font-family:Courier New; }
	.WW8Num40z2 { font-family:Wingdings; }
	.WW8Num41z0 { font-family:Symbol; }
	.WW8Num41z1 { font-family:Courier New; }
	.WW8Num41z2 { font-family:Wingdings; }
	.WW8Num43z0 { font-family:Symbol; font-size:10pt; }
	.WW8Num43z1 { font-family:Courier New; font-size:10pt; }
	.WW8Num43z2 { font-family:Wingdings; font-size:10pt; }
	.WW8Num45z1 { font-family:Courier New; }
	.WW8Num45z2 { font-family:Wingdings; }
	.WW8Num45z3 { font-family:Symbol; }
	.WW8Num46z0 { font-family:Symbol; font-size:10pt; }
	.WW8Num46z1 { font-family:Courier New; font-size:10pt; }
	.WW8Num46z2 { font-family:Wingdings; font-size:10pt; }
	.WW8Num47z0 { font-family:Symbol; }
	.WW8Num47z1 { font-family:Courier New; }
	.WW8Num47z2 { font-family:Wingdings; }
	.WW8Num48z0 { font-family:Symbol; }
	.WW8Num48z1 { font-family:Courier New; }
	.WW8Num48z2 { font-family:Wingdings; }
	.WW8Num50z0 { font-family:Symbol; }
	.WW8Num50z1 { font-family:Courier New; }
	.WW8Num50z2 { font-family:Wingdings; }
	.WW8Num51z0 { font-family:Symbol; font-size:10pt; }
	.WW8Num51z1 { font-family:Courier New; font-size:10pt; }
	.WW8Num51z2 { font-family:Wingdings; font-size:10pt; }
	.WW8Num52z0 { font-family:Symbol; }
	.WW8Num52z1 { font-family:Courier New; }
	.WW8Num52z2 { font-family:Wingdings; }
	.WW8Num54z0 { font-family:Symbol; }
	.WW8Num54z1 { font-family:Courier New; }
	.WW8Num54z2 { font-family:Wingdings; }
	.WW8Num55z0 { font-family:Symbol; }
	.WW8Num55z1 { font-family:Courier New; }
	.WW8Num55z2 { font-family:Wingdings; }
	.WW8Num57z0 { font-family:Symbol; }
	.WW8Num57z1 { font-family:Courier New; }
	.WW8Num57z2 { font-family:Wingdings; }
	.WW8Num59z0 { font-family:Symbol; }
	.WW8Num59z1 { font-family:Courier New; }
	.WW8Num59z2 { font-family:Wingdings; }
	.WW8Num60z0 { font-family:Symbol; }
	.WW8Num60z1 { font-family:Courier New; }
	.WW8Num60z2 { font-family:Wingdings; }
	.WW8Num61z0 { font-family:Symbol; }
	.WW8Num61z1 { font-family:Courier New; }
	.WW8Num61z2 { font-family:Wingdings; }
	.WW8Num63z0 { font-family:Symbol; }
	.WW8Num63z1 { font-family:Courier New; }
	.WW8Num63z2 { font-family:Wingdings; }
	.WW8Num67z0 { font-family:Symbol; }
	.WW8Num67z1 { font-family:Courier New; }
	.WW8Num67z2 { font-family:Wingdings; }
	.WW8Num68z0 { font-family:Symbol; }
	.WW8Num68z1 { font-family:Courier New; }
	.WW8Num68z2 { font-family:Wingdings; }
	.WW8Num6z0 { color:#808080; font-family:Symbol; }
	.WW8Num6z1 { font-family:Courier New; }
	.WW8Num6z2 { font-family:Wingdings; }
	.WW8Num6z3 { font-family:Symbol; }
	.WW8Num70z0 { font-family:Symbol; }
	.WW8Num70z1 { font-family:Courier New; }
	.WW8Num70z2 { font-family:Wingdings; }
	.WW8Num71z0 { color:#808080; font-family:Symbol; }
	.WW8Num71z1 { font-family:Courier New; }
	.WW8Num71z2 { font-family:Wingdings; }
	.WW8Num71z3 { font-family:Symbol; }
	.WW8Num72z0 { font-family:Symbol; }
	.WW8Num72z1 { font-family:Courier New; }
	.WW8Num72z2 { font-family:Wingdings; }
	.WW8Num73z0 { font-family:Symbol; }
	.WW8Num73z1 { font-family:Courier New; }
	.WW8Num73z2 { font-family:Wingdings; }
	.WW8Num75z0 { font-family:Symbol; }
	.WW8Num75z1 { font-family:Courier New; }
	.WW8Num75z2 { font-family:Wingdings; }
	.WW8Num76z1 { font-family:Courier New; }
	.WW8Num76z2 { font-family:Wingdings; }
	.WW8Num76z3 { font-family:Symbol; }
	.WW8Num79z0 { font-family:Symbol; }
	.WW8Num79z1 { font-family:Courier New; }
	.WW8Num79z2 { font-family:Wingdings; }
	.WW8Num80z0 { font-family:Symbol; font-size:10pt; }
	.WW8Num80z1 { font-family:Courier New; font-size:10pt; }
	.WW8Num80z2 { font-family:Wingdings; font-size:10pt; }
	.WW8Num8z0 { font-family:Symbol; }
	.WW8Num8z1 { font-family:Courier New; }
	.WW8Num8z2 { font-family:Wingdings; }
	.WW8Num9z0 { font-family:Symbol; font-size:10pt; }
	.WW8Num9z1 { font-family:Courier New; font-size:10pt; }
	.WW8Num9z2 { font-family:Wingdings; font-size:10pt; }
	<!-- ODF styles with no properties representable as CSS -->
	.Sect1 .Tabell2.3 .Tabell3.3 .Tabell4.3 .Tabell5.3 .Tabell6.3 .Table5.5 .Endnote_20_Symbol .Numbering_20_Symbols .T85 { }
	</style></head><body dir="ltr" style="max-width:8.2673in;margin-top:0.7874in; margin-bottom:0.7874in; margin-left:0.7874in; margin-right:0.7874in; "><p class="P154"><span class="T11"><br/></span><span class="T12">SignServer</span></p><p class="P116">Manual</p><p class="P9">Ver: 3.1.1</p><p class="Subtitle_20_Cover">Â </p><p class="Text_20_body"><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/></p><p class="P49">Â </p><p class="P56">Â  Â  Â <span title="date">09-09-18</span></p><p class="P57">Â </p><p class="P57">Â </p><p class="P57">Â </p><p class="P57">Â </p><p class="P57">Â </p><p class="P57">Â </p><p class="P57">Â </p><p class="P57">Â </p><p class="P58">Â </p><h1 class="P152"><a name="1__Introduction_Scope"><span style="min-width:0.762cm;">1 </span></a>Â Introduction/Scope</h1><p class="P50">Â </p><p class="P11"><span class="T20">The SignServer is an application framework performing cryptographic operations Â for other applications. It's intended to be used in environments where keys are supposed to be protected in hardware but there isn't possible to connect such hardware to existing enterprise applications or where the operations are considered extra sensitive so the hardware have to protected more carefully. Another usage is to provide a simplified method to provide signatures in different application managed from one </span>location in the company.<br/></p><p class="P11">The SignServer have been designed for high-availability and can be clustered for maximum</p><p class="P11">reliability.<br/></p><p class="P11">The SignServer comes with a RFC 3161 compliant Time-Stamp signer serving requests through http or client-authenticated https. A MRTD (Machine Readable Travel Document, i.e. electronic <span class="T13">passport) signer. A PDF signer that adds a signature automatically to a uploaded document and a validation service used to lookup the validation of a given certificate.</span></p><p class="P12">Â </p><p class="P12">From version 3.0 there also exists a mail signer framework that can be used to perform cryptographic operation on emails. </p><p class="P50">Â </p><p class="P50">Â </p><div class="Standard"><div style="width: 6.6925in;" id="Frame1" class="fr1"><div><div class="P67"><div style="height: 3.4236in;width: 6.6925in;" id="graphics1" class="fr2"><p><img width="743" height="380" alt="" src="data:image/*;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAH5A9sDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD3+iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACuW0/W9c1Gxt9ZgtbJtLuRvjhywmSI52yFidp4wSgHGTySOeprnovCqwpHaLql6NMhffFZqVAXkkLuA3FAcYUnsMkjigBNJ8WWt7o1rd3GUnc2sUqohwJZ0jZQPb94KRPGFtdWdvdWNnd3EM80UccmzarrIxAcMeOMfdOCMjIGaig8EW1sII4tQvFt4ntZGh+TDvAEVCTtzyI1yAR07UkHgi2t5pZ49QuVuHMR81Y4lJMb7wWAQB2PQsecelAEw8caKY5JTJMIgjSRv5RImRWCMyY5OCy+5ByMipF8X6eLgwzQ3sASVYZZJoCqRO0YkCsex2kfTIzjIrPg+HOj26yJGSkZQxx7IIldAXVuXCbmI2gAkngnOTzWvc+G7K8j1CO4aR4r66S5lTIAysaR7foRGPfk0AQL4w0wplku0kdUaCJ4CHuFc7VKDvk9ehHVsCqNp45tDZvLfQzRyia5/cpCd0cMUhTe4PToOByTnAOKnPg2F2hln1O+mubZI0tJ38vdAEYNwAuGJwAxIOQB061Dd+ANOvdklxcSTXA80PNPDDKWEj7zgMhCkHoQOM85oA0o9bmm8T2+nJa/6DPZSXUd2XUiUq0Q+UA5xiXqcZPTjk7VUE0m3iv7K6jLJ9jtZLWOMY27HMZ/Tylx9TV+gAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoorP1jVotGsluJIpJmklSGKKPaGd3YBRliAOvUkUAaFFZFprwmkWG6sbiwm3OrpcvGNu1A+QQxDjDDlc4wc4xT18S6C0JmXW9NMSsELi6TaGIJAznqdrfkfSgDUorAuvFUKXZg0+xudUCWyXbyWbxFRE5baV3OC+djfdz29RWmuraebyOy+2263kihltnkCykYz9w/N0BPTsaALlFZ9tr2j3kNxNa6rYzxWyb53iuEZYlwTliD8o4PJ9DThrWlGa4hGp2ZltgWnQTruiA4JYZ+X8aAL1FQ2t3bX1slzaXEVxbyDKSwuHVh7EcGpqACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACszXbG51DTDBbC0clwXgvIw8M6d0bg4B9QDggdeladFAHndz4JvFsbmTbDbQeXcMthZM8yw7ogoEYYLuyRkrhRzgdybOj6ZqGseJ2126to7ZI7qFihhkj37LedCR5iqzHdMvJUDC4GcZPd0UAcRd+EL2SAW/wBk0i8hCOIDPuiks2Lsd0bopYjDL8uVwRweaSLwRdxa1HPLeG6h+0wXUk011KrF40ReYVwjMTGDuJ4zghsc9xRQBx6eDJRpvh+1NxEn2K1itL4KDtnjTY+B9XjA5/hd+5rKf4d3b2t1a+fGy+TdRwSy3czgmYn/AJZH5E4PON2SM4Fei0UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABWTd+J9FsL97G71CKG4jUO6vkBFIJBJxgcA9TWtXCaloOvXXiHxPdaZfXNiZra2W3ASMx3JVX3KSylh1xkEY3Z5xQB3MciSxrJG6ujAMrKcgg9CDTq4G3i1S3CWVpp+pW9s93p8tumflgt0WJZEY54xsYFe+c8g5quuiaxBoWmsJ9WS5lsB9tIleY+YssJAZS4P3TICFIJXIHYUAejVSttX0+8umtbe6jknQyKyL1BjYK/5FgPxrL0i41Gw8JrLPp001xFI/wC4V2LvH5p+YCQlgdnzBCSeAua4+PRLxLme/n03Vdt0dRlt/ssjRSxtLKjRbtpBUkLnngd+egB6jRXnUlj4kaNopv7TbW2nG67tptsBg8vDbQW2A9QARnfhunNMjsdbOl+Swv0jjuY3EvlTHzv3TBlkh87eADt5RsFiDjg0AekUVk6BeSzadBbXUMkN7BbQ/aEdzJtZl6bycseDknmtagAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigDnfGPiG58N6fZ3dtbxzh7oJOrZyIgjyOVx/FtQ4qvP4wW38ZHSnRDp4t0zcKCSJ2kjUL1xtxNGc/7Vbmo6XBqb2bTlsWs/nqoxhzsdMNnthzXOXPgqGz0KS20/zrq4FlNZx/aJQMiV1O9m29U2Lj2Ud8UAP1rxZNb3Ea2b2trZ7pY31C+idofNjcIY8qQF53fMxA+U4B5xNba3rOsu0elw6fA1vDC9y1w7TI0kiB/LRkIBUKVO/nO77tWY/DctpaWUVhq93aSW8AgdlVWWbuXZGBG8nJ3D1Ociq48FxWtssGl6pfacGjjjmeErul2cqxJHDeuMAjggjAABL4c8Svr93cobcQLDbwuUzllkZpUkUnoQGiwDgZpmn6xrOrBNSsYLJ9La5aEQksJmRZDG0m4naOhbbjkDGcmorDwbLpZjax1y6tmEEcEvlwxEShGchjvVjuO85IPJJPHSrY8LhHMUWqXkWntcm6azTYBvL+YVD7dwQtyRnuRnHFAEGleL7a50v7ReDZPH5XmiNDtHmzNFHjn1XmnS+MbZrNrmysru6QXEcCsseFfdMsTYbpkFvunBP0yREvga0j2pFf3iQkQiWMbD5nlStKmSVyPmY5xjIApf+EItfts94L2dbmTGJUjiVsiVJVLEJ+8IaNQC2eM+pNAE8vjTR4GufMklEcCzt5vlnbIYQTIF7kja312nGcVtWdyLy0S4EM0IfOEnQo45xyD0rl3+HmlPJfEOUF0lwuVg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zstOVvLth5bYBcDlm5HJPqO4FerW1nBZ20dvawRwQRjakcShVUegA4FTzdh2OGsfh2t3fpq3i/UJPEGpryizjFtB7JF0/Pr1xmu1WIKoVVAUDAA7VZ2UbKhpsZX2UbKsbKNnBPYdTSsO5X2U2RUWNmlKrHj5i54qG71OKAERASP6n7o/xrnL66mum3TSFsdB2H0FZzmolKLZyWt22l+HPGfhzUfC6z6dNfazbWd6tu+yC4jcncDF0/HjqeM817dXhXib/kM+D/8AsY7L/wBCNe61rRk5RuyZpJ2QUUUVqQFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB4V4c1fTdGXxLNqlwkFvL4lu4QzqSpZiMA4HA4PJ4r0uwvZ4IkMLC6tmAKqX5A7bW7j2P515poKW7aX41a8sheWqa7evNAQDuQMuSM8ZA57dOorovAegWNtptxceHvEc1xZyNm3srhg0UHcqcjeOvqMZ5DVz295tGl9D0CDUrSdgnmeVKf8AllL8rfgD1+ozV3ZXl9l8VPDr3j6T4igl0e/jbZJDex7oy3+y4GCP9ogCu6QQwW4FrhYXwwCN8p+nbH0q7tbisnsaEk0cecHc3oKyrueSUYZvl/ujpTt9QzciolK40jOmrOmrRmrOmrmmao5HxN/yGfB//Yx2X/oRr3WvCvE3/IZ8H/8AYx2X/oRr3WurDfAZVPiCiiitzMKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigDxzwE5juvFJGDnxBegg9CMjil1TwFcRXzat4Qvm02+bl4Afkfv0PB6ng8ZOcE80zwL/x8eKf+xhvP/QhXXTaxp+nXFvb3d1HDLcHEat35A/AZIGT3IFc12ps06HEXniq+trR7bx34OS9toAWe4hgEqgDvtIIH1JT2FemzbIoY0RVRF+VVUYAAHQCodRtodU0y60+7G+3uYXgcd9rAg4PY4NLdP8AulP+1Tk9ASG76RmyKr76N9Z3KsRTVnTVozHIrOmrKZaOR8Tf8hnwf/2Mdl/6Ea91rwfxXNHb6n4TmmkSOKPxDZu7uwCqoJJJJ6AV7tHIksayRurowyrKcgj2NdWG+AyqfEOooorczCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAorhfFHxU0Tw9dNp1mk2saqv3rOx+by/Xe3RfpyfatTwp480HxhGw066KXkY/fWVwPLni9cqev1GRS5le3UfK7XtodNRRRTEFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB414F/4+PFP/AGMN5/6EK1vEXhqbWgzWt1HA81ubWfzYy4MZ5yBkYYZOOxz9K5zw5cNa2vi2dLgW5TxDdnzWiMir86/eA52+p4wOcjFdbY6/DLJFa3ii0u5B+7VmzHN7xP0cd8fex1Arld1JtGjSlGzNyP8AdxqmSdoAyTyaju3/ANHQ/wC0f5U3fUV4/wDosZ/2z/IVLehSWpDvo31W3+9G/wB6yuXYsF8jFU5qk3+9U9RvrWwtHury4jggQfM8jBQKT1GjmPFAVtX8Iq4BU+IrMEHoRuNesSeEdMSRpdMM+kTscl9Ok8pSfUx4MbH3ZTXjImvPHOs6O2kafMNKsNRivJNRnHlpJ5ZPyoDy2c9a920u4ae1w5yyHGfUdq6q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O0qLIcReZvSNsF17ZGeRyMZNQweMybazmFhPPaSzJam63qP3u3LHb6AgjPqOmOaAJfDmhXum63f3dyqCKZZAm1sk7ru4lH/jsqfn7VzV14M1q6vHm+y267knWZN0axzBpkk2jau8q4QqS5b73TGa3x45C6cL2bSp4Y3gguYmaRSvlykgM5GdgGMnrjIqG7+JOl2ZiEix8wrPJtuo2+VnZf3e0nzPuk8Y4x3O0AEMPhKS41Np5tIs7e0a7nnFsSrBd1vFGCQBjJZGPH1qtB4Kv7caaILe3iEdpYpc7GA3yxeb5jHH3j84575reTxhGs0j3dhLbWCyXUSXbOGDtAX3/KORkRyEZ/umqMPxF09tTSxngMExkWB42lUyJKUDEbOu0E7d3r2xzQBVg8GXNtYaalvbW8M0cOnLc+WwXe8Mu5zkdTgnnqai0zwnqFjaGP8As6F4YXs2jhlMJkJjdtwEiqoZQp+UuNx5yea7HQ9Tk1nSLfUXtHtUuEEkSO4YlGAKk44GQelaNAHm914IvTo9paQafaCRoLpbiRFi3mWRl2li6sNu0HJA3cDFPl8H6vcRPHHDBazSZc3KyDduawMHOBn5ZOc+jZHevRaKAODXwnPd6xa3TaPZ2Fik9u0tirIyny45wXwBjrIijuQvOMCtObw9cJ4VGm28EJEN+062hYCOWEXJkEfoBswAOmQAeM11NFAHGaP4YntvE0OqvYW1rCGunWBCCYA4hCgYGOSkrnHALn1qW48NPc+IjLNp1q9m2qpeu7bT5iizeLBUjqJMH/gWfWuuooA8xj8Casl18zyCPeq25t5IUFtGk7sgy8bMoClSNhHOQcda9OoooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAyvEPhzSvFOkyaZq9qtxbvyOzI3ZlPUH3/pXmt1oPjHwS5Fqk3ijQx93BAvYB6Ef8tR9OfpXr9FKUVJWY02tjxSPxH4R8QyiO8aCG+hOPJv08ieJvQbsEH/AHTW9rep2enaLHd3dzFDAJG/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6/JLo7SxLJq5iiBicxyM0e7Z5YGVi5IyN+3rjEMPiXWRe6aZ9QLwStGixIiRy3Cm4dFl8t0+dXjCMdjLs5O3FAHo1FcV4R8Q3VxPPBquorcsI4SJkZPKDsxXbwiMjE4/duCRjqa7WgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigArlR4+0z/hFNQ8QG3ulgsZmhkhKr5hYEYxzjBDK3Xoa6qvP5Ph/ePps9p9qtgs1jNG6c7TclZEjfp02SnPfKLjpQB1+o65p+maXcahPco0EAkz5bBizRhi6KM8sAjcdtpz0NUv+EnENrPPf6Vf2flqhjVlSXzy7bUVGjZlLFiBgkfeB6c1krolzeeI9Zns3e2gjRvszT2pCC6kULIwVvvptjXkcHzXwaZD4Mui00scWnaSQIpIrexZ3geeORZBI6kKByu3AGcMec4wAasnixLRjFqOl3tlP+7McUnlt5itKkRZWRivytImQSCNw65rQ1TVxp8tvbQ2dxe3lwHaO3g2glVxuYliFAG5RyerDFctqnh7xRrl6bm9GkR+Qg+xxRTyEKfOgkbexQZz5JAIAxnvnI1nsdflv7XV2g0xb+3jlt/IFxIY5Yn2N9/y8qwaMfwkYz+ABbt/EttJdw21zb3FjLJFJIwuwqBCkiR4zkg5Z1wQSD61cuda0qyJF1qdlAQ5j/ezqvzAAleT1wQce4rmtQ8Ma3qjLdXV7aNdrE21ACI0bz4ZUQHGSoEWCxGec47CC78JavdG8uc2aXlzPNIrRXUsfkrJHEmNwXDjMXzKy4b5T8uMUAdG+v6HKl0Lm/s0jtLkQSmeVAqyrhwOT1GMjvlT6Vdi1PT57w2cV9bSXQTzDCkql9uAd23OcYZefcetclf+EdUub+O6+0RyNBM7oY7uW1aQSRorEtGp2ENHwBkEMRxWr4T8Nt4ciu4y0JWUw7BFu+UJCiY+Yk4ypxyeDQB0VFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFcZqvjmXTbu5RbGOeGJriNXR5PvRQPLgt5ezJ8srtDFhnOOCB2dYN7ofh37dELuzhNxeySrGrbsM7Rt5mB0BKb8njP1oApnxNqi30Onvplqt5cvD5BF0xjCvHM53HZnIEDjgc5HTms2/1fVrf4Y3OoPK66kl4yExSBiMXmzYG4BG35c8cV111o2nXoP2i1RyQgzyCNhJTBHIILNyPU1XvLDRdP0B7W6t4otLjYO0e0lQTIGBwOfvkGgDmdR8YajpusySXWk3dugtokjtXdZN8kk6xh8Rbzxu6AEnHAp114/urfTbif8AshlmtlmeSKVJ0LqgUhlXytyqQ33nCgEEc9a6f7LpGvQvcmGK6R1a3Z2U9EkORz0w65B9RkVSudA8NxPbWlxZQh7lniRTuJmJBdw5/i4Un5s9KAKf/CRaneamkdrbW8VpHqKWkjvMS8gMQkb5dmAMMO/UVlWPjPVNL8NaZLqdkl1NdWKSwSQzNI8jeZFF84VCRkzIfl3HqME4z2P9h6b5Ji+yIEMyT8Eg+YoUK2eoICqPwqCHwvocEEsEemwCKSLyWUjI2ZztGegzzxjnnrQBhN42uhb4/sxo7kPKoSWG4UyKio25E8rzCPnAJKgAjqcjOn4V1m81yO9u50jS2Z4WtkDZZFe3ikKngZ5fr7nsBVv/AIRjRSkamwjOwsdxJLNuxu3HOWyFUENnIUDsKs2GkWGl7vsNskG5I42CZwVRdqfkoAz6AUAXaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK5bxrpuq6hDYtpAb7RC053pIEKbreRRgk8ElgAexIPaupooA89utM1IySCw0a4h0ySaE/Zrh/MKsscu9/LEqggkxLgtjcu7B61SHh7WZ9JW31LTb25nFpFHa4uFxbukrlsnf3Xy/XIGPavT6KAPNU0HV7SGb7BpF0lyDetcs92AlysjsUVdrg5+YMPu7QpGRuzUY0TxCiTSRabIwS6mmt4lcQABrJoxtAlYpmT0YHnOR1Hp1FAHnem6BqkuoxQ3lnKmmm/jmaNf3MZQW0yn5BI5A3+XkE85BI61ZtdH1G0uY0u9Pvb5Iooo7Ei72iArNJks27IyhiJOCSFx7V3dFAHldl4c8Tm2MVybkyskSXZX935zi4iZn3+cSx2iUhgF4JGBwB6hBBHbW8cEK7YokCIuc4AGAOakooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/9k="/></p></div>Drawing <a name="refDrawing0"/>1: Overview of a possible set up of a highly available SignServer solution</div></div></div></div><p class="P59">Â </p><h2 class="Heading_20_2"><a name="1_1_Changes_from_previous_versions"><span style="min-width:1.016cm;">1.1</span></a>Â Changes from previous versions</h2><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="1_1_1_Changes_between_Version_3_0_and_Version_3_1"><span style="min-width:1.27cm;">1.1.1</span></a>Changes between Version 3.0 and Version 3.1</h3><p class="Standard">Â </p><ul><li><p class="P129" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>A new Cluster Class Loader, simplifying the management of customized workers in a cluster. All the resource data including the classes themselves are stored in database and accessible from all nodes simultaneously. It is also possible to run multiple versions of the same worker in the same SignServer cluster, this is useful when migrating a worker to new code since both the old and new worker can be run at the same time.<span class="odfLiEnd"/>Â </p></li><li><p class="P129" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>PDF Signer, Time-Stamp Authority and MRTD and their specific libraries have been moved into separate module archives (MAR files) that have to be uploaded to the SignServer installation before usage.<span class="odfLiEnd"/>Â </p></li><li><p class="P129" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>For minor changes see the change log at <a href="http://jira.primekey.se/">http://jira.primekey.se</a><span class="odfLiEnd"/>Â </p></li><li><p class="P129" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Installation packages for Linux/Windows of both SignServer and MailSigner using generation software from Bitrock.<span class="odfLiEnd"/>Â </p></li></ul><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="1_1_2_Changes_between_Version_2_and_Version_3"><span style="min-width:1.27cm;">1.1.2</span></a>Â Changes between Version 2 and Version 3</h3><p class="Standard">Â </p><ul><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Complete refactorisation of J2EE from EJB2 to EJB3 to simplify further development.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Renamed component âServiceâ to âTimedServiceâ since 3.0 supports other services.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>A âTimedServiceâ can now be configured with a 'cron-like' settings to have services executed in other than just periodical intervals.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>A Validation Service API used to validate certificate from different issuers. The Validation Service API have it's own easy to use Web Service used to integrate with other platforms.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>A Group Key Service API used to generate and manage group keys, symmetric or asymmetric.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Possibility to have customized authorization of requests, not just the built in client certificate authorization list.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>The name SignToken is changed to CryptoToken and introduced a new concept of ExtendedCryptoToken that supports symmetric operations.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>The RMI-SSL interface have been removed and replaced with a JAX-WS interface with a simple client framework supporting different load-balance or high availability policies.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>All request data have changed from serialization to externalization to be easier to translate to other platforms.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>A completely new MailSigner API based upon the JAMES SMTP server to perform automated cryptographic operations on e-mails very similar to the plug-ins for the SignServer.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Java 1.4 is no longer supported.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>A lot of new JUnit tests in the test suite.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>A PDF Signer that can add a signature to a PDF document through a simple HTML interface.<span class="odfLiEnd"/>Â </p></li><li><p class="P145" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>PKCS11 Crypto Token to connect to different PKCS11 implementations.<span class="odfLiEnd"/>Â </p><p class="P145" style="margin-left:0.635cm;">Â </p></li></ul><p class="P115">Â </p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="1_1_3_Changes_between_Version_1_and_Version_2"><span style="min-width:1.27cm;">1.1.3</span></a>Â Changes between Version 1 and Version 2</h3><p class="P20">Â </p><ul><li><p class="P130" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span><span class="T15">signserver_server.property file have been removed and replaced with a global configuration </span><span class="T20">store.</span><span class="odfLiEnd"/>Â </p></li></ul><ul><li><p class="P134" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>It is now possible to dynamically add and remove available signers<span class="odfLiEnd"/>Â </p></li><li><p class="P134" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>A new type of component, âServiceâ that is run on a timely basis, used to perform maintenance or report generation.<span class="odfLiEnd"/>Â </p></li><li><p class="P131" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span><span class="T20">Improved cluster deployment functionality.</span><span class="T22"> </span><span class="odfLiEnd"/>Â </p></li><li><p class="P146" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>New CLI tools to batch configure the SignServer, and to backup a current configuration. This makes it possible to set-up a configuration in test environment, dump the configuration and configure the same it in production.<span class="odfLiEnd"/>Â </p></li></ul><p class="P13">Â </p><p class="P62">Â </p><p class="P13">Â </p><p class="P13">Â </p><p class="P13">Â </p><h1 class="Heading_20_1"><a name="2__Document_History"><span style="min-width:0.762cm;">2 </span></a>Â Document History</h1><table border="0" cellspacing="0" cellpadding="0" class="Table3"><colgroup><col width="84"/><col width="106"/><col width="111"/><col width="441"/></colgroup><tr><td style="text-align:left;width:0.7597in; " class="Table3_A1"><p class="Table_20_Heading">Version</p></td><td style="text-align:left;width:0.9583in; " class="Table3_A1"><p class="Table_20_Heading">Date</p></td><td style="text-align:left;width:1in; " class="Table3_A1"><p class="Table_20_Heading">Name</p></td><td style="text-align:left;width:3.9743in; " class="Table3_D1"><p class="Table_20_Heading">Comment</p></td></tr><tr><td style="text-align:left;width:0.7597in; " class="Table3_A2"><p class="P68">0.1</p></td><td style="text-align:left;width:0.9583in; " class="Table3_A2"><p class="P68">2006-06-04</p></td><td style="text-align:left;width:1in; " class="Table3_A2"><p class="P68">Philip Vendil</p></td><td style="text-align:left;width:3.9743in; " class="Table3_D2"><p class="P68">Initial version of this document.</p></td></tr><tr><td style="text-align:left;width:0.7597in; " class="Table3_A2"><p class="P68">1.0 RC1</p></td><td style="text-align:left;width:0.9583in; " class="Table3_A2"><p class="P68">2006-08-22</p></td><td style="text-align:left;width:1in; " class="Table3_A2"><p class="P68">Philip Vendil</p></td><td style="text-align:left;width:3.9743in; " class="Table3_D2"><p class="P68">Prerelease version</p></td></tr><tr><td style="text-align:left;width:0.7597in; " class="Table3_A2"><p class="P68">2.0</p></td><td style="text-align:left;width:0.9583in; " class="Table3_A2"><p class="P68">2007-08-10</p></td><td style="text-align:left;width:1in; " class="Table3_A2"><p class="P68">Philip Vendil</p></td><td style="text-align:left;width:3.9743in; " class="Table3_D2"><p class="P68">Update with new features for version 2</p></td></tr><tr><td style="text-align:left;width:0.7597in; " class="Table3_A2"><p class="P68">2.1</p></td><td style="text-align:left;width:0.9583in; " class="Table3_A2"><p class="P68">2007-09-22</p></td><td style="text-align:left;width:1in; " class="Table3_A2"><p class="P68">Tomas Gustavsson</p></td><td style="text-align:left;width:3.9743in; " class="Table3_D2"><p class="P68">Updated with PDF Signer</p></td></tr><tr><td style="text-align:left;width:0.7597in; " class="Table3_A2"><p class="P68">2.1.1</p></td><td style="text-align:left;width:0.9583in; " class="Table3_A2"><p class="P68">2007-09-27</p></td><td style="text-align:left;width:1in; " class="Table3_A2"><p class="P68">Tomas Gustavsson</p></td><td style="text-align:left;width:3.9743in; " class="Table3_D2"><p class="P68">Added PKCS11 sign token</p></td></tr><tr><td style="text-align:left;width:0.7597in; " class="Table3_A2"><p class="P68">3.0</p></td><td style="text-align:left;width:0.9583in; " class="Table3_A2"><p class="P68">2008-01-06</p></td><td style="text-align:left;width:1in; " class="Table3_A2"><p class="P68">Philip Vendil</p></td><td style="text-align:left;width:3.9743in; " class="Table3_D2"><p class="P68">Big update Â with 3.0 documentation.</p></td></tr><tr><td style="text-align:left;width:0.7597in; " class="Table3_A2"><p class="P68">3.1</p></td><td style="text-align:left;width:0.9583in; " class="Table3_A2"><p class="P68">2008-06-29</p></td><td style="text-align:left;width:1in; " class="Table3_A2"><p class="P68">Philip Vendil</p></td><td style="text-align:left;width:3.9743in; " class="Table3_D2"><p class="P68">Update for 3.1 with cluster class loader documentation.</p></td></tr><tr><td style="text-align:left;width:0.7597in; " class="Table3_A2"><p class="P68">3.1</p></td><td style="text-align:left;width:0.9583in; " class="Table3_A2"><p class="P68">2008-07-17</p></td><td style="text-align:left;width:1in; " class="Table3_A2"><p class="P68">Philip Vendil</p></td><td style="text-align:left;width:3.9743in; " class="Table3_D2"><p class="P68">Further update of cluster documentation after feedback from Tomas.</p></td></tr><tr><td style="text-align:left;width:0.7597in; " class="Table3_A2"><p class="P68">3.1.1</p></td><td style="text-align:left;width:0.9583in; " class="Table3_A2"><p class="P68">2008-09-09</p></td><td style="text-align:left;width:1in; " class="Table3_A2"><p class="P68">Philip Vendil</p></td><td style="text-align:left;width:3.9743in; " class="Table3_D2"><p class="P68">Installation package documentation and mail signer packaging.</p></td></tr></table><p class="Standard">Â </p><p class="P59">Â </p><table border="0" cellspacing="0" cellpadding="0" class=""><colgroup/><p class="Contents_20_Heading">Table of Contents</p><tr><td><p class="P125">1 Â Introduction/Scope<span style="margin-left:6.6925in;"/>2</p></td></tr><tr><td><p class="P126">1.1 Changes from previous versions<span style="margin-left:6.5528in;"/>3</p></td></tr><tr><td><p class="P127">1.1.1Changes between Version 3.0 and Version 3.1<span style="margin-left:6.4138in;"/>3</p></td></tr><tr><td><p class="P127">1.1.2 Changes between Version 2 and Version 3<span style="margin-left:6.4138in;"/>3</p></td></tr><tr><td><p class="P127">1.1.3 Changes between Version 1 and Version 2<span style="margin-left:6.4138in;"/>4</p></td></tr><tr><td><p class="P125">2 Â Document History<span style="margin-left:6.6925in;"/>5</p></td></tr><tr><td><p class="P125">3 Â Quick start of a Simple Time-stamp Server<span style="margin-left:6.6925in;"/>9</p></td></tr><tr><td><p class="P126">3.1 Required Software<span style="margin-left:6.5528in;"/>9</p></td></tr><tr><td><p class="P126">3.2 Installation Steps<span style="margin-left:6.5528in;"/>9</p></td></tr><tr><td><p class="P125">4 Â Quick start of a Simple Mail Signer<span style="margin-left:6.6925in;"/>11</p></td></tr><tr><td><p class="P126">4.1 Required Software<span style="margin-left:6.5528in;"/>11</p></td></tr><tr><td><p class="P126">4.2 Installation Steps<span style="margin-left:6.5528in;"/>11</p></td></tr><tr><td><p class="P125">5 Â Terms Used in This Document<span style="margin-left:6.6925in;"/>13</p></td></tr><tr><td><p class="P125">6 Â Overall Architecture <span style="margin-left:6.6925in;"/>16</p></td></tr><tr><td><p class="P126">6.1 SignServer<span style="margin-left:6.5528in;"/>16</p></td></tr><tr><td><p class="P126">6.2 MailSigner<span style="margin-left:6.5528in;"/>17</p></td></tr><tr><td><p class="P125">7 Â Available Plug-ins<span style="margin-left:6.6925in;"/>18</p></td></tr><tr><td><p class="P126">7.1 Configuring a plug-in<span style="margin-left:6.5528in;"/>18</p></td></tr><tr><td><p class="P126">7.2 SignServer Signers<span style="margin-left:6.5528in;"/>18</p></td></tr><tr><td><p class="P127">7.2.1 Time-stamp Signer<span style="margin-left:6.4138in;"/>18</p></td></tr><tr><td><p class="P128">7.2.1.1 Overview<span style="margin-left:6.2752in;"/>18</p></td></tr><tr><td><p class="P128">7.2.1.2 Available Properties<span style="margin-left:6.2752in;"/>19</p></td></tr><tr><td><p class="P127">7.2.2 MRTD Signer<span style="margin-left:6.4138in;"/>20</p></td></tr><tr><td><p class="P128">7.2.2.1 Overview<span style="margin-left:6.2752in;"/>20</p></td></tr><tr><td><p class="P128">7.2.2.2 Available Properties<span style="margin-left:6.2752in;"/>20</p></td></tr><tr><td><p class="P127">7.2.3 PDF Signer<span style="margin-left:6.4138in;"/>21</p></td></tr><tr><td><p class="P128">7.2.3.1 Overview<span style="margin-left:6.2752in;"/>21</p></td></tr><tr><td><p class="P128">7.2.3.2 Available Properties<span style="margin-left:6.2752in;"/>21</p></td></tr><tr><td><p class="P126">7.3 SignServer Validation Service Framework<span style="margin-left:6.5528in;"/>22</p></td></tr><tr><td><p class="P127">7.3.1 DefaultValidationService<span style="margin-left:6.4138in;"/>22</p></td></tr><tr><td><p class="P128">7.3.1.1 Overview<span style="margin-left:6.2752in;"/>22</p></td></tr><tr><td><p class="P128">7.3.1.2 Available Properties<span style="margin-left:6.2752in;"/>23</p></td></tr><tr><td><p class="P127">7.3.2 The Validation CLI interface.<span style="margin-left:6.4138in;"/>25</p></td></tr><tr><td><p class="P126">7.4 SignServer Group Key Service Framework<span style="margin-left:6.5528in;"/>26</p></td></tr><tr><td><p class="P128">7.4.0.1 Overview<span style="margin-left:6.2752in;"/>26</p></td></tr><tr><td><p class="P128">7.4.0.2 Available Properties<span style="margin-left:6.2752in;"/>26</p></td></tr><tr><td><p class="P126">7.5 Mail Processors<span style="margin-left:6.5528in;"/>27</p></td></tr><tr><td><p class="P127">7.5.1 SimpleMailSigner<span style="margin-left:6.4138in;"/>27</p></td></tr><tr><td><p class="P128">7.5.1.1 Overview<span style="margin-left:6.2752in;"/>27</p></td></tr><tr><td><p class="P128">7.5.1.2 Available Properties<span style="margin-left:6.2752in;"/>27</p></td></tr><tr><td><p class="P125">8 Â Available CryptoTokens<span style="margin-left:6.6925in;"/>29</p></td></tr><tr><td><p class="P126">8.1 P12CryptoToken<span style="margin-left:6.5528in;"/>29</p></td></tr><tr><td><p class="P127">8.1.1 Overview<span style="margin-left:6.4138in;"/>29</p></td></tr><tr><td><p class="P127">8.1.2 Â Available Properties<span style="margin-left:6.4138in;"/>29</p></td></tr><tr><td><p class="P126">8.2 PrimeCardHSMCryptoToken<span style="margin-left:6.5528in;"/>29</p></td></tr><tr><td><p class="P127">8.2.1 Overview<span style="margin-left:6.4138in;"/>29</p></td></tr><tr><td><p class="P127">8.2.2 Available Properties<span style="margin-left:6.4138in;"/>29</p></td></tr><tr><td><p class="P126">8.3 PKCS11CryptoToken<span style="margin-left:6.5528in;"/>30</p></td></tr><tr><td><p class="P127">8.3.1 Overview<span style="margin-left:6.4138in;"/>30</p></td></tr><tr><td><p class="P127">8.3.2 Available Properties<span style="margin-left:6.4138in;"/>30</p></td></tr><tr><td><p class="P127">8.3.3 Example usage<span style="margin-left:6.4138in;"/>30</p></td></tr><tr><td><p class="P126">8.4 SoftCryptoToken<span style="margin-left:6.5528in;"/>31</p></td></tr><tr><td><p class="P127">8.4.1 Overview<span style="margin-left:6.4138in;"/>31</p></td></tr><tr><td><p class="P127">8.4.2 Available Properties<span style="margin-left:6.4138in;"/>31</p></td></tr><tr><td><p class="P127">8.4.3 Example usage<span style="margin-left:6.4138in;"/>31</p></td></tr><tr><td><p class="P125">9 Â Setting Authorization Type<span style="margin-left:6.6925in;"/>32</p></td></tr><tr><td><p class="P126">9.1 SignServer<span style="margin-left:6.5528in;"/>32</p></td></tr><tr><td><p class="P126">9.2 MailSigner<span style="margin-left:6.5528in;"/>32</p></td></tr><tr><td><p class="P125">10 Â Disabling a Worker<span style="margin-left:6.6925in;"/>32</p></td></tr><tr><td><p class="P125">11 Â Archiving Responses (SignServer only)<span style="margin-left:6.6925in;"/>32</p></td></tr><tr><td><p class="P125">12 Â The Global Configuration Store<span style="margin-left:6.6925in;"/>33</p></td></tr><tr><td><p class="P126">12.1 SignServer specific<span style="margin-left:6.5528in;"/>33</p></td></tr><tr><td><p class="P126">12.2 MailSigner Specific<span style="margin-left:6.5528in;"/>33</p></td></tr><tr><td><p class="P125">13 Â Timed Services<span style="margin-left:6.6925in;"/>34</p></td></tr><tr><td><p class="P126">13.1 CertificateExpireTimedService (MailSigner only)<span style="margin-left:6.5528in;"/>34</p></td></tr><tr><td><p class="P127">13.1.1 Overview<span style="margin-left:6.4138in;"/>34</p></td></tr><tr><td><p class="P127">13.1.2 Available Properties<span style="margin-left:6.4138in;"/>34</p></td></tr><tr><td><p class="P127">13.1.3 Available Substitution Variables<span style="margin-left:6.4138in;"/>35</p></td></tr><tr><td><p class="P125">14 Â The Main WebService Interface<span style="margin-left:6.6925in;"/>36</p></td></tr><tr><td><p class="P126">14.1 Overview<span style="margin-left:6.5528in;"/>36</p></td></tr><tr><td><p class="P126">14.2 Java Client API<span style="margin-left:6.5528in;"/>36</p></td></tr><tr><td><p class="P127">14.2.1 Load Balance Policies<span style="margin-left:6.4138in;"/>37</p></td></tr><tr><td><p class="P127">14.2.2 CLI Client <span style="margin-left:6.4138in;"/>37</p></td></tr><tr><td><p class="P125">15 The Cluster Class Loader<span style="margin-left:6.6925in;"/>38</p></td></tr><tr><td><p class="P126">15.1 How to configure your worker to use the Cluster Class Loader<span style="margin-left:6.5528in;"/>39</p></td></tr><tr><td><p class="P126">15.2 Building Module Archives<span style="margin-left:6.5528in;"/>39</p></td></tr><tr><td><p class="P127">15.2.1 The MAR Descriptor <span style="margin-left:6.4138in;"/>39</p></td></tr><tr><td><p class="P127">15.2.2 Including Worker Configurations<span style="margin-left:6.4138in;"/>40</p></td></tr><tr><td><p class="P127">15.2.3 Using ANT<span style="margin-left:6.4138in;"/>40</p></td></tr><tr><td><p class="P127">15.2.4 Building Manually<span style="margin-left:6.4138in;"/>42</p></td></tr><tr><td><p class="P127">15.2.5 Managing Module Archives<span style="margin-left:6.4138in;"/>42</p></td></tr><tr><td><p class="P127">15.2.6 Changing the default configuration of the Cluster Class Loader<span style="margin-left:6.4138in;"/>43</p></td></tr><tr><td><p class="P125">16 Â Building and Deploying the SignServer or MailSigner<span style="margin-left:6.6925in;"/>44</p></td></tr><tr><td><p class="P125">17 Â Administrating the SignServer<span style="margin-left:6.6925in;"/>45</p></td></tr><tr><td><p class="P126">17.1 General Commands<span style="margin-left:6.5528in;"/>45</p></td></tr><tr><td><p class="P126">17.2 SignServer Specific Commands<span style="margin-left:6.5528in;"/>47</p></td></tr><tr><td><p class="P127">17.2.1 Authorization Related<span style="margin-left:6.4138in;"/>47</p></td></tr><tr><td><p class="P127">17.2.2 Database Related<span style="margin-left:6.4138in;"/>47</p></td></tr><tr><td><p class="P127">17.2.3 Archive Related<span style="margin-left:6.4138in;"/>48</p></td></tr><tr><td><p class="P127">17.2.4 Group Key Service Related<span style="margin-left:6.4138in;"/>48</p></td></tr><tr><td><p class="P127">17.2.5 Module Archive Related<span style="margin-left:6.4138in;"/>49</p></td></tr><tr><td><p class="P126">17.3 MailSigner Specific Commands<span style="margin-left:6.5528in;"/>49</p></td></tr><tr><td><p class="P125">18 Â Making the SignServer highly-available<span style="margin-left:6.6925in;"/>50</p></td></tr><tr><td><p class="P126">18.1 HTTP access requires a load balancer<span style="margin-left:6.5528in;"/>50</p></td></tr><tr><td><p class="P126">18.2 Setting up a MySQL Cluster<span style="margin-left:6.5528in;"/>50</p></td></tr><tr><td><p class="P126">18.3 MailSigner<span style="margin-left:6.5528in;"/>50</p></td></tr><tr><td><p class="P125">19 Installation Packages<span style="margin-left:6.6925in;"/>51</p></td></tr><tr><td><p class="P126">19.1Using the Installation Packages<span style="margin-left:6.5528in;"/>51</p></td></tr><tr><td><p class="P127">19.1.1 SignServer Node<span style="margin-left:6.4138in;"/>52</p></td></tr><tr><td><p class="P127">19.1.2 SignServer Management<span style="margin-left:6.4138in;"/>54</p></td></tr><tr><td><p class="P127">19.1.3 MailSigner Server<span style="margin-left:6.4138in;"/>55</p></td></tr><tr><td><p class="P127">19.1.4 MailSigner Management<span style="margin-left:6.4138in;"/>57</p></td></tr><tr><td><p class="P126">19.2 Generating Installation Packages<span style="margin-left:6.5528in;"/>57</p></td></tr><tr><td><p class="P125">20 Â For Developers<span style="margin-left:6.6925in;"/>59</p></td></tr><tr><td><p class="P126">20.1 Building with Customized Code<span style="margin-left:6.5528in;"/>59</p></td></tr><tr><td><p class="P126">20.2 Implementing Workers<span style="margin-left:6.5528in;"/>59</p></td></tr><tr><td><p class="P127">20.2.1 The ISigner Interface<span style="margin-left:6.4138in;"/>60</p></td></tr><tr><td><p class="P127">20.2.2 The ITimedService Interface<span style="margin-left:6.4138in;"/>60</p></td></tr><tr><td><p class="P127">20.2.3 IValidationService Interface<span style="margin-left:6.4138in;"/>61</p></td></tr><tr><td><p class="P127">20.2.4 IGroupKeyService Interface<span style="margin-left:6.4138in;"/>61</p></td></tr><tr><td><p class="P127">20.2.5 IMailProcessor Interface<span style="margin-left:6.4138in;"/>63</p></td></tr><tr><td><p class="P126">20.3 Implementing Crypto Tokens<span style="margin-left:6.5528in;"/>63</p></td></tr><tr><td><p class="P127">20.3.1 The ICryptoToken Interface<span style="margin-left:6.4138in;"/>63</p></td></tr><tr><td><p class="P127">20.3.2 The Extended Crypto Token Interface<span style="margin-left:6.4138in;"/>65</p></td></tr><tr><td><p class="P126">20.4 Other Customizations<span style="margin-left:6.5528in;"/>66</p></td></tr><tr><td><p class="P127">20.4.1 The IValidator Interface<span style="margin-left:6.4138in;"/>66</p></td></tr><tr><td><p class="P127">20.4.2 The IAuthorizer Interface<span style="margin-left:6.4138in;"/>67</p></td></tr><tr><td><p class="P126">20.5 Using the Global Configuration Store<span style="margin-left:6.5528in;"/>68</p></td></tr><tr><td><p class="P125">21 Â Testing<span style="margin-left:6.6925in;"/>69</p></td></tr><tr><td><p class="P126">21.1 Automatic Junit Tests<span style="margin-left:6.5528in;"/>69</p></td></tr><tr><td><p class="P126">21.2Testing the TimeStamp Authority<span style="margin-left:6.5528in;"/>69</p></td></tr><tr><td><p class="P127">21.2.1 The TSA Test Client<span style="margin-left:6.4138in;"/>69</p></td></tr><tr><td><p class="P127">21.2.2 Manual Tests<span style="margin-left:6.4138in;"/>69</p></td></tr><tr><td><p class="P125">22 Â References<span style="margin-left:6.6925in;"/>70</p></td></tr></table><h1 class="P153"><a name="3__Quick_start_of_a_Simple_Time-stamp_Server"><span style="min-width:0.762cm;">3 </span></a>Â Quick start of a Simple Time-stamp Server</h1><p class="P11">This section will show how to set up a quick and simple standalone time-stamp server, accepting</p><p class="P11">time-stamp requests over plain HTTP.</p><p class="P11">Â </p><h2 class="Heading_20_2"><a name="3_1_Required_Software"><span style="min-width:1.016cm;">3.1</span></a>Â Required Software</h2><p class="P15">Â </p><ul><li><p class="P135" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Java 1.6 (or 1.5) (http://java.sun.com)<span class="odfLiEnd"/>Â </p></li><li><p class="P135" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>JBoss-4.2.2.GA (http://www.jboss.org)<span class="odfLiEnd"/>Â </p></li><li><p class="P135" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Ant version 1.7 (http://ant.apache.org)<span class="odfLiEnd"/>Â </p></li><li><p class="P132" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span><span class="T15">SignServer-3.0 (</span><span class="T16">http://www.signserver.org</span><span class="T15">)</span><span class="odfLiEnd"/>Â </p></li><li><p class="P135" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>1 web-server key-store in Java key-store format (JKS), (make sure that the server certificate have the right host name in it's CN, optional (used for HTTPS))<span class="odfLiEnd"/>Â </p></li><li><p class="P135" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>1 Root certificate of the web-server in DER encoding (<span class="T20">optional (used for HTTPS)).</span><span class="odfLiEnd"/>Â </p></li><li><p class="P135" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>1 Time-stamp key-store in PKCS12 format<br/><span style="margin-left:0.635cm"/><span class="odfLiEnd"/>Â </p></li></ul><h2 class="P151"><a name="3_2_Installation_Steps"><span style="min-width:1.016cm;">3.2</span></a>Â Installation Steps</h2><p class="P94">Â </p><p class="P11">1. First make sure that ant, Java and JBoss is installed properly.<br/></p><p class="P11">2. Set the JAVA_HOME, JBOSS_HOME and SIGNSERVER_HOME environment variables.<br/></p><p class="P11">3. Set the SIGNSERVER_NODEID environment variable, it should be a server unique string</p><p class="P11">identifying the node in a cluster. (optional for one node installations).<br/></p><p class="P11">4. Unzip the SignServer package and go to it's home directory.<br/></p><p class="P11">5. If you are going to protect the HTTP communication with SSL, you2 need a JKS SSL server</p><p class="P11">key store. Rename the web server key store to tomcat.jks at put it in a 'p12' subdirectory.</p><p class="P11">Also place the web server root certificate in DER encoding in the same directory, call it</p><p class="P11">rootcert.cer</p><p class="P11">Â </p><p class="P11">6. Then copy the signserver_build.properties.sample file to signserver_buld.properties and edit</p><p class="P11">the file. At least configure the httpsserver.password property. If you are not using https</p><p class="P13"><span class="T15">uncomment the row â</span><span class="T38">j2ee.web-nohttps=</span><span class="T40">trueâ.</span></p><p class="P23">Â </p><p class="P11">7. Do 'ant deploy' and then start JBoss (JBOSS_HOME\bin\run.sh) in another console.</p><p class="P11">Â </p><p class="P11">8. Edit the signserver_cli.properties and set all properties starting with 'hostname.'</p><p class="P11">Â </p><p class="P11">10. Use the signserver cli to upload the Time-Stamp Authority module to the SignServer . (if it's not executive use chmod +x bin/signserver.sh) </p><p class="P11">Â </p><p class="P16"><span class="T15"><br/></span>bin/signserver.sh module add dist-server/tsa.mar demo </p><p class="P11"/><p class="P11">This command uploads the Time-Stamp related code to the cluster and creates a demo configuration with a preconfigured soft key store and certificate.</p><p class="P11">Â </p><p class="P11">(In the path section, use '\\' for '\' in windows environment.)</p><p class="P11">Â </p><p class="P11">Then run</p><p class="P16">bin/signserver.sh getconfig 1</p><p class="P11">And double check the configuration. (Important, the properties are case sensitive).</p><p class="P11">Â </p><p class="P11">Finally run</p><p class="P16">bin/signserver.sh reload 1</p><p class="P11">To activate the configuration.</p><p class="P11">Â </p><p class="P11">11. Run the test-client to see that everything is up.</p><p class="P16">cd dist-client</p><p class="P13"><span class="T38">java -jar timeStampClient.jar â</span><span class="T17">http://localhost:8080/signserver/process?workerId=1</span><span class="T38">â</span></p><p class="P11">Â </p><p class="P11">`</p><p class="P11">The message âTimeStampRequest Validatedâ should appear once a second.</p><p class="P11">Â </p><p class="P11">Also check JBOSS_HOME/server/default/log/server.log that successful messages appear.</p><p class="P13"><span class="Example"><span class="T19"/></span></p><p class="P24">Â </p><p class="Standard">Â </p><p class="Standard">Â </p><h1 class="P153"><a name="4__Quick_start_of_a_Simple_Mail_Signer"><span style="min-width:0.762cm;">4 </span></a>Â Quick start of a Simple Mail Signer</h1><p class="Text_20_body">This section will do a fast and minimal configuration of a Mail Signer that will sign all authorized mails sent through it with a PKCS12 cryptographic token.</p><p class="Text_20_body">Â </p><h2 class="Heading_20_2"><a name="4_1_Required_Software"><span style="min-width:1.016cm;">4.1</span></a>Â Required Software</h2><ul><li><p class="P135" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Java 1.6 (or 1.5) (http://java.sun.com)<span class="odfLiEnd"/>Â </p></li><li><p class="P135" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Ant version 1.7 (http://ant.apache.org)<span class="odfLiEnd"/>Â </p></li><li><p class="P132" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span><span class="T15">SignServer-3.0 (</span><span class="T16">http://www.signserver.org</span><span class="T15">)</span><span class="odfLiEnd"/>Â </p></li><li><p class="P147" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>1 mail signing key-store in PKCS12 format (The key store should have a RFC822Name that matches the sender address that will be replaces by the Simple Mail Signer plug-in). There exists one keystore in src/test/mailsigner_test1.p12 with a RFC822Name of <a href="mailto:mailsigner@someorg.org"><span class="T36">mailsigner@someorg.org</span></a> that can be used for testing.<span class="odfLiEnd"/>Â </p></li></ul><p class="Standard">Â </p><p class="Standard">Â </p><h2 class="P151"><a name="4_2_Installation_Steps"><span style="min-width:1.016cm;">4.2</span></a>Â Installation Steps</h2><p class="P94">Â </p><p class="P11">1. First make sure that Ant and Java is installed properly.<br/></p><p class="P11">2. Set the JAVA_HOME and SIGNSERVER_HOME environment variables.<br/></p><p class="P11">3. Set the SIGNSERVER_NODEID environment variable, it should be a server unique string</p><p class="P11">identifying the node in a cluster. (optional for one node installations).<br/></p><p class="P11">4. Unzip the SignServer package and go to it's home directory.</p><p class="P11">Â </p><p class="P11">5. Then copy the signserver_build.properties.sample file to signserver_buld.properties and edit</p><p class="P37"><span class="T18">the file. First uncomment row â</span><span class="T53">build.mode=MAILSIGNER</span><span class="T24">â</span><span class="T30"> to instruct that this installation is a MailSigner and not a SignServer. Then go to the end of the file and fill in the required properties: </span><span class="T24">mailsigner.primarydns</span><span class="T30">, </span><span class="T24">mailsigner.secondarydns </span><span class="T30">and</span><span class="T24"> mailsigner.postmaster.</span></p><p class="P23">Â </p><p class="P11">6. Then build the mail signer with the command 'ant' in the SIGNSERVER_HOME directory.</p><p class="P11">Â </p><p class="P11">7. Edit the sample-configs/qs_simplemailsigner_configuration.properties file and set the sender and from addresses as well as the path and password to the cryptographic token that should be used.</p><p class="P11"><span class="T20"><br/>8. Start the mail signer application with the command: </span><span class="T25">ant run<br/></span></p><p class="P18"><span class="T21">9.</span><span class="T20"> Open up another console, go to SIGNSERVER_HOME and use the signserver CLI to upload the configuration file. (if it's not executive use chmod +x bin/signserver.sh) </span></p><p class="P16"><span class="T20"><br/></span><span class="T21">bin/signserver.sh setproperties sample-configs/ qs_simplemailsigner_configuration.properties</span></p><p class="P11">Â </p><p class="P11">Then run</p><p class="P16">bin/signserver.sh getconfig 1</p><p class="P11"/><p class="P11">Finally run</p><p class="P16">bin/signserver.sh reload 1</p><p class="P11">To activate the configuration.</p><p class="P11">Â </p><p class="P11">19. <span class="T21">Finally add an authorized SMTP user with the command:<br/>bin/signserver.sh addauthorizeduser &lt;username&gt; &lt;password&gt;</span></p><p class="P11"><br/>20. Now is the simple mail signer ready to be used for signing outgoing emails. Configure you e-mail client to connect to the MailSigner server using the username and password you just provided and send a mail to a colleague to verify it is signed properly.</p><h1 class="P152"><a name="5__Terms_Used_in_This_Document"><span style="min-width:0.762cm;">5 </span></a>Â Terms Used in This Document</h1><table border="0" cellspacing="0" cellpadding="0" class="Table5"><colgroup><col width="371"/><col width="371"/></colgroup><tr><td style="text-align:left;width:3.3458in; " class="Table5_A1"><p class="Table_20_Heading">Term</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B1"><p class="Table_20_Heading">Explanation</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Signer</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A Processable service performing signatures upon requests. This could be a ready made signer or a custom developed one.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Crypto Token (former Sign Token)</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A Crypto Token is a name for the entity containing the private key and is responsible for its cryptographic operations. Every Processable have a Crypto Token that can be a PKCS12, Smart Card or HSM connection.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Extended Crypto Token</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">An enhanced Crypto Token with support for symmetric key operations.</p></td></tr><tr class="Table55"><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">PKCS11CryptoToken</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A Crypto Token able to communicate with Hardware Security Modules through the standard PKCS11 interface.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">TimedService (former Service)</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A TimedService is a task that is run on a timely basis, performing maintenance tasks like changing active key or generate a report.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Worker</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A common name for Processable (Signer or other type of service), Mail Processor and TimedService</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Processable</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A type of worker that is used to process requests, i.e. not a TimedService.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Worker Configuration</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">Each Worker can be configured with properties specific for that worker. There are two sets of worker configuration one âActiveâ that is used by the signer and one âcurrentâ which is the one configured by the administrator. The current configuration isn't used in production until the administrator issued the reload command. This makes it possible for the administrator to configure multiple properties and double-check them before they are actually used.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Global Configuration Store</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">Is a dynamic store used to define available Workers and their Crypto Tokens. But other data that needs to be read globally could be set there as well. The global configuration properties are activated immediately. There are two different scopes for the store data, Global Scope and Node Scope.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Global Scope</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">Data stored in the global configuration that can be read by all nodes in the cluster.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Node Scope</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">Data that is node specific and can only be read within the same node.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Worker Id</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">Unique identifier of a worker, an integer larger than 0</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Worker Name</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A name used as a human readable synonym for a Worker Id</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Mail Processor</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A plug-in used for the mail signer to perform automated cryptographic operations on e-mails sent through the mail server. This could for instance be the Simple Mail Signer for attaching a SMIME signature to all mails.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Validation Service </p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A Processable that checks if a certificate is valid or not. Have a Default Validation Service implementation that should work in most cases.</p><p class="Table_20_Contents">A Validation Service should have one or more Validators configured.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Group Key Service</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A Processable that can be used to manage, generate and distribute group keys to a set of clients. The service support four types of calls, fetch group key (used by clients), pre-generate group keys, switch encryption key (key used to safely store the group keys in database) and remove group keys. Â There exists a Default Group Key Service that should satisfy most use cases.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Validator</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A Validator is responsible for checking the status of one or more issuer's certificates. This could be as a OCSP client or a CRL checker or just looking up the status in a database.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Authorizer</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">An interface that enables developers to integrate the authorization parts with existing authorization systems of who is authorized to perform requests to a Processable.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Time Stamp Signer</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A Signer that can be used to set up a Timestamp Authority according to RFC 3161. </p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">MRTD Signer</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A Signer that performs signatures of MRTD (Machine Readable Travel Documents, i.e. Electronic Passports) blobs.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">PDF Signer</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A Signer that attaches an electronic signature signature to a PDF document.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Simple Mail Signer</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A Mail Processor that envelopes authorized mails with a SMIME signature.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Cluster Class Loader</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A Java Class Loader specific for the SignServer project. The class loader simplifies the distribution of new code to a cluster by uploading and fetching it from database. It also enables the use of multiple versions of the same worker code in the same cluster.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table5_A2"><p class="Table_20_Contents">Module Archive or MAR file</p></td><td style="text-align:left;width:3.3465in; " class="Table5_B2"><p class="Table_20_Contents">A 'Module Archive' is a specific packaging format used by the cluster class loader to upload code to a cluster. A MAR files is structured in a specific way with a descriptor containing module and version information. Â The MAR file also contains one or more parts depending on were in the system the code will be deployed.</p><p class="Table_20_Contents">Â </p><p class="Table_20_Contents">A Module Archive have the postfix .mar and can be generated with a specific ANT-task.</p></td></tr></table><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="P66">Â </p><h1 class="Heading_20_1"><a name="6__Overall_Architecture_"><span style="min-width:0.762cm;">6 </span></a>Â Overall Architecture </h1><p class="Text_20_body">Since the 3.0 version the SignServer project have two different builds, one is the classical SignServer and the other is a Mail Processing Server called the MailSigner. </p><p class="Text_20_body">Â </p><h2 class="Heading_20_2"><a name="6_1_SignServer"><span style="min-width:1.016cm;">6.1</span></a>Â SignServer</h2><p class="Text_20_body">The SignServer is a framework designed to perform different kind of cryptographic operations for different applications. </p><p class="Text_20_body">Â </p><p class="Text_20_body">Since the 3.0 version there are three kind of processable services. Signers (used to sign or in other way Â process requested data). Validation Services used to verify the validity of a certificate against a set of backed issuers. The validation service can be used to simply the integration of PKIs into existing applications. The the third processable service is a group key service framework used to manage and to distribute group keys for different applications, these keys can be both symmetric and asymmetric. In addition to processable services there also exists another concept called Timed Service (called just 'service' in 2.0 edition) which are plug-ins run at defined intervals performing maintenance or reporting routines.</p><p class="Text_20_body">Â </p><p class="Text_20_body">Out-of-the-box are there three Signers ready to be used. They are a MRTD Signer used for signing Machine Readable Travel Documents (also known as Electronic Passports), a Timestamp Signer that can be used to set up a Timestamp Authority and a PDF signer that can be used to automatically sign documents. </p><p class="Text_20_body">Â </p><p class="Text_20_body">The main way of communicating with the SignServer is through a WebService interface (previous versions had a RMI-SSL interface, but that have been replaced by the WS for better platform independence.) but the Timestamp Signer is also available through HTTP communication and the PDF signer have a simple HTML page that allows users to upload documents to be signed.</p><p class="Text_20_body">Â </p><p class="Text_20_body">For an overview of the different concepts in the SignServer see illustration 1. The base component is called Worker which is assigned an id, optionally a name and a configuration. A sub component is a Processable which receives and processes requests. A Processable (optionally) have access to a cryptographic token (CryptoToken) in charge of managing the keys of a Processable. A CryptoToken can be either software or hardware based.</p><p class="Text_20_body">Â </p><p class="Text_20_body">The applications i administrated through a command-line interface, where the properties and access control can be configured.</p><p class="Text_20_body">Â </p><p class="Text_20_body">One SignServer can have multiple services for different purposes.</p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><h2 class="Heading_20_2"><a name="6_2_MailSigner"><span style="min-width:1.016cm;">6.2</span></a>Â MailSigner</h2><p class="Standard">Â </p><p class="Standard">The MailSigner is a different build of the SignServer, targeted to perform automated cryptographic operations on e-mails. The MailSigner is an add-on to the James SMTP project and the James SMTP binaries is shipped along with the SignServer package for simplified set-up.</p><p class="Standard">Â </p><p class="Standard">The MailSigner's main component is the MailProcessor which is the base for all MailSigner plug-ins. There exists one ready to use MailSigner called the SimpleMailSigner. It generates a signed SMIME message of all mails sent to through the server.</p><p class="Standard">Â </p><p class="Standard">One instance can have more than one MailProcessor configured. Then will the plug-ins be called by worker id in ascending order.</p><p class="Standard">Â </p><p class="Standard">The MailSigner have similar CLI interface and is administrated much in the same way as the SignServer. The SMTP server have support for SMTP Authentication. For more information about the James SMTP server see <a href="http://james.apache.org/">http://james.apache.org</a> .</p><p class="Standard">Â </p><div class="Standard"><div style="width: 6.6925in;" id="Ram1" class="fr1"><div><div class="P117"><div style="height: 2.5453in;width: 6.6925in;" id="grafik1" class="fr2"><p><img width="743" height="283" alt="" src="data:image/*;base64,iVBORw0KGgoAAAANSUhEUgAABFMAAAGlCAYAAAA217kyAABA6klEQVR42u3dL8wUa5o34JPsyQ4CgUCQDQKBQJANAkEmCLIhWbJhEzZBIBAIBAKBQJAsCZsgjkCQLAJBMggEySIQiCMQCMQRiJMJAoE4myCYBHEEAoGoL7/ar2eYprrfqu6q6vpzXUlnzvAWzdtVz1313Hc/f34oAAAAAKjtB6cAAAAAoD7FFAAAAIAGFFMAAAAAGlBMAQAAAGhAMQUAAACgAcUUAAAAgAYUUwAAAAAaUEwBAAAAaEAxBQAAAKCB2sWUH3744buX4xznOMc5znGOc5zjHOc4xzmu3eNaSfScZ8c5buvjWiumAAAA0J02iylAh7EqGAEAAAaSoMm7YByxKqgBAAAA6lMhAQAAAGavySASxRQAAABg9hRTAAAAABpQTAEAgIF0zFdtvdnVFrhD/fwSsfn+LjDFGBZhAADQU6e87QS3j3+jrd9tDsl9G5/R1sj9XZe65+jb46raddcF020/u4JmN3/fbj4AANBTp75OUrbquLrJ2rpkr+q4vd63zt/fNHlt+rs1/Rybfv5tfrc6566PvEv+VuzZbjY5R+tieGjnXUGz439LMAIAQP+d+lVJ2V4FhL2SubrJ1KrizXLBoM7f3yR3aPLee52Duuenz7+3aSKrmNJNLNYpptQZYdKkmNJGwbTO76Wgufr4LkfmKKYAAEDHSVyTBK1pUt5kmkGd993092q7mNLGsbv82ab5k2JKN3G47n83va67KJgqaHZf0FRMAQCAgSZ1bRZT9vo3VhVb6hZT6v79qRVTmp63VT/b1TQfmhVTtonVLgumCpqb/6zrWFJMAQCAjgsnXRVTmk4zqJMctZGs1fm2fEyJ3Ka/i3xqXMWUOgW0bUajbNoWFTT7LWi2XkwBAAC6L6Zskzi0WYjZpnDQ9L22TeS6LlK18a24YsqwiyltTfPpo2C6zc8UNJvftxVTAABgB0lck/VMmiZ5e/0byz/fK2nY9u/X/btN37tO8rTt599kMdKq36WvxS9pXkxp8t9dFlO2HWlRNwYVNDe7ZymmAADABJI/nCvaayPb7Laz7u/0VTDdpDigoPlDJ7tpufMAAMAAkj2jGLZPlHFeXB+fpa/PIsIAAAAmlpgqpgzvuk61YKqYIhgBAAAmkZjK36DjWBWMAAAAA0nQFFNgHLEqGAEAAAaSoCmmwDhiVTACAAAMJEGTd8E4YlVQAwAAANSnQgIAAADMnq2RAQAAABpQTAEAAABoQDEFAABAUgh0FDciDAAAYITJXB/vA+JvxbGCEQAAYHzJnPwNdhirghEAAGAgCZpiCowjVgUjAADAQBI0xRQYR6wKRgAAgIEkaPIuGEesCmoAAID/y3m8dveCSRZTAAAAFFO8FFOY8j1AMQUAAGCDYgrOO/Nti7WPdboAAAAk9c472qJiCgAAgKTeeYdGbbH2sU4XAACApN55R1vsoJiicQMAAJJ6nHdQTAEAAJDUO+/QrN02aeAAAABjTdZt5Tvs6wOjardNGjgAAMBYk/UhFlOq3qfun00lh1NMYZT3lakFIgAAQJfJepfFlMX/X/Xn27z3XK4P9NJunQIAAGDSSc/IiylVx1T9Dst/d11Bpu57jPH6QFvxuPZYpwsAAJh6gjTUYspyArdXMaVOgWSvv9fkPcZ4faCNWNzzWKcLAACYeoI0hmLKpqNU9vrZXlOG1r3HGK8PbBuLtY51ugAAgKknSHMtpqyayrNqMV3FFOZ+r6h9rNMFAABMPUGa88iUvY7bNJkc6vmEbWOx1rFdvCkAAMCQEqQhF1PW5VvbTNHZdM2UsV8f6KXdbhvcAAAAg056JlRM+fbfb1JoWf7/dd9jjNcHemm32wY3AADAoJOeijVC2njR7vWBUbXbJg0cAABgrMm6Ysqwrw+Mqt02aeAAAACSepx3Zt9unQIAAABJvfOOtmhrZAAAAEm98w6N2mLtY50uAAAASb3zjraomAIAACCpd96hUVusfazTBQAAIKl33tEWOyimaNwAAICkHucdFFMAAICZePv2bfHs2bPi8ePHxU8//VRcv369ePPmjaR+10mp884Y222TBg4AALBLX79+/e7Pnj9/Xty4caO4cuVKcf78+eLMmTPFixcvvkvW237RUlLqfDLGdtukgQMAALTp06dPxa+//lp8+PDhu589ffq0LI6cPHmyOHz4cPHjjz8WT548+e64FFPu379fjjhJEeXVq1fl+y4n64opA01KnU/G2G6bNHAAAIBVfv/993IqTYoZmU7z6NGjslCyLFNs9u/fX+YYBw8eLI4fP14WQpbl76ZQ8ssvv5TFlqpRKbtI1iX/LSelzidjbLdOAQAAsM5vv/1WFjVS8Lh3715x8+bN8v8vy89SGMk0m4sXL5bTbn7++efvjkvRJa+xJuuS/2FfH9imLdY+1ukCAIDp+/Lly3d/lhEf3641kuk0mS6zLEWUCxculMelkJKiSdWIk7kk65L/YV8f2KYt1j7W6QIAgPHJmiCZUvP+/fvvfvby5cuy+HHq1KniyJEjxb59+8qda5alIJLCyGKtkexs0+eIkbEm65L/YV8f2KYt1j7W6QIAgN36/PnzX9cayfSZhw8fVk6jyeKrBw4cKDv8+d9jx46V648sS4Ela5a8fv26/O+qUSmSdcn/VK8PbNMWax/rdAEAQDcyeiQjPjLyI9Nnbt26VS7KuiyFj8VaIxlRcu3atcpiSoou3+5Sw26Sdcn/sK8PbNMWax/bxZsCAMAUZETHx48fv/vzd+/elWuHZA2RxXSa/PeyTKM5d+5c+bOsTZJRJBktwriTdcn/sK8P9NJumzRwAAAYu4zuyNSXTKtZlgVZswhr1hnJNJoff/yxuHTp0nfHZXebFEYy4mQxnSZb9zKOZD3XL2vFZCRQ1TQpyf9urw+Mot02aeAAADAkX79+LUeJZK2RTKfJFJqsK7IsRZJDhw6Vfdr9+/cXR48erVyQNYuv5tgk26bTTC9Zb/tFu9cHRtVumzRwAADoQ0aP/Pzzz+XIj4wcSOEj02SWpeiRwsjp06fLrX2vXr1auSbJquk6TLf9pCi2nKwrpgw0KXU+GWO7bdLAAQCgrqqRHSloZBHWrCFy8eLFsgiSNUWqjjt79mxx+fLl8vgHDx6UI09glWwHnXaVHY5SYMsivpL6kSSlzjtjbLdOAQAAdWR0R0aCZFHVZSl+ZP2JJLIHDx4sE6OsPbIs02ju3r1bjh55+vRpOT0n65fANjLdK8W3O3fulG0q/19SP6Kk1HlnQG2x9rFOFwDAPKWIkYVTF9NpsnXvshRQDh8+XC7Eum/fvnJh1uxeU3VcktisX2KtEdqW4sibN2/KIlyKJl0t9iup310C67wzlLZY+1inCwBgWklniiMPHz4sv6XPVIeq4keOS2EkW/p+O52mSkajpFgCu5Bdd9JWM+opOytlgeGMcJLUTyuBdd4ZSlusfazTBQAwLKsWSl0UR1L4SAEkyWWVrEGS43J8iioprsDQZaRU1ZSvTCurmlomqZ9WAuu8M5S2WPtYpwsAoFsZBZJpCdldpGoth4wcSWFkMZ0mW/hWWRRH8s18FtvMlBoYq4wuyaLC2YEpC8am3VftxCSpn0cC67wzlLZY+9gu3hQAYMoWhZEUNFLYyNa9VdNgsgBr1hlJPyqJYv5/1aiTvFcKI3nfTRfOhLF5/vx5uWhxpvEkBoYwlayrLZS9bDXNBAsviikAAP/n2bNnZWFkMZ3m/PnzlcWPrDOSVxLBrOFw8+bNyjUcUhyx1ghzlkVjb9++XY4+GUVypKChmAKKKQDA3GQXmariRabGpDhy5cqVcj2R48ePV67BkKJIFmFdTKfJFATFEGgmo6tSPMm0tRQdb9y4URZV6Dfv6jp/y2iijLjLVucwy1gdSjACACzLaI+3b9+W02mqRn6kQJK1RrLTR6bTHDx4sDJpy7a/Dx48KP83i7HmPRVJYHvZ6alqalribNVCykwn78r1zz04hWiYXaxOMagBgGFKcpVix6tXr4qnT5+WayWkM74sU2f2799fHDhwoOyoZzpN1UiS/FkKI7buhX4sFo1NITNrAJ04caJyBx7m4/Pnz+WoP8Uz5kaFBADYWoojKYws1hrJVJr82bIUSZKAfbvWSFUxJZ3ydNCBYUnSnNjNwstVsQswZrZGBgAayVojVcWLjB65fv363601km+ll2U708VaI/lvQ/xhnDLC6/Xr12UsZ0FmgDlRTAEACVH5rXEWCMyOMsuyY00KI4u1RjKdJtuULsufLdYaSREl02qMGIHpSQHl4sWL5fS6TK1LEdWisWwqz5+qZwoMnWIKAExM1ilYrDWSb4vv379fFkqWZdpMkqEUSFIoyU4aWbx12bt37/661ojiCMxHFoutmp6Te0KKphmlxvySwrbleZUFwVOMh6nGjWIKAOxQOpyLtUbyTfCFCxfKqTXLckwWesxaI/n2OMdWrUmyaroOMF+Zcpfpd5cvXy6LrLnPMI1kro/32VQWJs5zK+toVe34BGOPP7v5AMAWUrio2rI3a4ZknZHz58+XBZAsuppkZlmGQd+4caMspuQbvIw6sagj0JZM+Tt06FBZQHn48GHlrliMN5kbev6W52NGSOYLAJhcrI4pGAGg605fChkZLZL1Qaqm0WQYfL5py7e7mU6TV6bcLMvfzW4XmWKT97MYK9CV3F9yz7p69WplcZeRJWgTKqbEqqllMPpYHVswAkATSSzyTexirZGM/siokWX5xjbPunyDm8UXz549W/7ZsnQI837WGgF2LQtJZ9Tbjz/+WO62lRFu1jyZQII2sWIKTDZWBSMAY5S52CmMLNYayToiVSNEMpIku9Zkqk2GuWfuth0GgLHJdJ1luZdl9JsCysQStBnkXdZQYRKxKqgB2FViUDX1JaM+siNNFkrM6JDFFp3Lso1n/jzFlBRRsmhrdqMAmIKMqstUwUzdOXr0aGWxGMYqI6mqRn/CmKiQALC1THdZTH/JFJqqrXizhkiGo2etkQMHDpTD0i9duvTdcXmP7FyzWG8kBRLTaYA5SXE4BZQUjPPfHz58cFKYlPQZ0sbt9MPQjH5r5HwAr2m9gPHJyJEUMrLWSIaS5xukqi17UzzZt29fWSTJdJqMJrl79+53x+Vb1hRU0oEyJB2Yu9wTs2isb+eZcwxkhEq+WPGlCYopiileiikweJlak857pscsptPkf5el8JEpNllrJNv7Zqh51da+ANRPHnPvzSi9jNDLlrFZ+wnmKqNSrly5YstuFFPaLqYwjcboWkL7HY+qtUbyZymKpFOSb3pSCEmHfVlGm2RYbTr0i+k02boXgHbv1cvTF/Lte+7TGZHim3iGlBQCzeNGMQXXEnbc2c5c+Ldv35brg6SDvSzTYvLtZabRHDx4sIyp/P9l+cYzxZHsXpOpNyma5M8A6Od+nhF9uQ+noJ37tUWx6TqZ6+N9QPytOHaIwSgBn1ZjdC2ZY4c6HegUNFLYyNSYqmHcKZJkEdbDhw//dTpN1a41WbskO9dkK+CqESkA7F7Wi8powBs3bhTPnj0r7/HQdTI3lPytTen3VK3RBoOL1SEGowR8Wg8D15KpSJEkhZEsrnrr1q1yOs2FCxe+Oy4jTVIcyTeTOSbHWmsEYPxS0M79vGp9hySA0Fb/eUjv07csUp/CZPpPdvph0LE6xGCUgE/rYeBaMrSOcFUHOIuw5lvFxXSaLAxYZVEcSUElHeqMPgFgurKmVEabHDp0qHw2pIie6TzQZf95SO+zC5mmnH5ZFsC3vhCDjdUhBqMEfFoPA9eSrqQwkqkvmQKzajhops5klEg6wWmLmVJTZbHOyGI6jW8YAeanKmnLcyELdmdtK9+S01f/mf+TnQRTUIFBxmqfQW3b3Xk+DFwjmsgUmXzjl/nm9+/fL0eBVHVuUxzJ6+jRo8Xp06eLS5cuVb7fq1evyvVL8r46wQB8K8+FjDz56aefymkFKcADw5IvuWCQue4uEmvFlBk1MNeI/y8jR9JZvX37dvktQ9YTqdppJtNs8rp48WK5GGum09iRBoC2ZXRjRiumiJJnU0YnGpUIIH+tfeyYE+um77dXQaaPpH/53+iyMDSEIoZiynRkMbCqkR03b94sCyOL6TT79++v3MEgx2WUSYZKP3z4sNwCWKcVgK6lIP/kyZPKUY7WYoDxMdKYPvP1tceOObHe5v12leB/++9W/Q5TKzwopgxTvo1LwWMxnSaFkmXXrl0riyNZjHXfvn3FwYMHy6kyy/L3823eYjqNjikAu/by5cuyiJ/nWKaDZqRj1TMMGJ+MWs4oZ0UVus7X9zx2zIl128WUqkLH8r+x6t9cN7pk1eiXOsWUVe+76vdb/lmd89XllKkm72sqx3ZSIFkURx48eFAOWa7qOGYKTQojKZIsptOkCLIs2z5msb0UXTysABiTjIK8d+9euXisZxiSwmnJyObsqpWdGH2Jxy7jRjFlxZ/tVURZVxRZd9xexZR1v+Oq96pTTNnkd+/zGmXKR745UlD5XkZ9pEOYjmFGi2RF8xQ6lqUoknnfebjkuBxfNd0GAMYsxZGMPMlzLs+9Vbu5wRySuT7eZ6jS3z1x4kT5hSLsIv52sptP34l63c/TpMiwSTFl1f/fa/RJk/etWzSp+/t1fY1STc6NMCMkqkZHjF2mz6SgUVU1z+iRFEa+XWskU2WWZdHWDFX+dq0RRScA5ihrn+R5mSJKpu48f/7cN9PMOpnr432GLP3k3AdgJ7HaZzBOuZiyqijStFix7ftuUkzpehHcVe+ZKSnHjx8viwRjWYh0URxZTKepGvmRz5NRNunsLabTZHTJsgw9TmHEWiMA8PcyzTTPyGX5MsGoSyafoCmmdMbmB7Qaq30G41xGpmzz97Z9321HpnTxMFj+NzI8NwWHDMtLUWLXUshIYeTx48fldJobN26UhY5lly5d+mtxZDGdpuq4vF9eRo8AQD35QiHP4UxZPXToUPnK2l8wywRNMaUTyUHSj6/aeAE2irE+g3Hu03zqrJmy6fShpr9H3c/Z9jVKkSFTejK1p+tiw5s3b8qpNCncZChwFqlaNY0mnbcrV66U02nu379fvH//3t0BAHqSPkGexXluewYz+wRNEWQrjx49WrnwdL4MzbR5aCVW+wzqqiklbbzaukltWkxZ/mzrCgpN1kxZ975NiylVhY06v3tb1zxy48r0l6phu8tyA8xONFWV4yw0t1hrJNOEDhw4UBZElmX+ZIooKaakc5Z51oYGA0D/MvIkX2hk9Ge+GTbUHuhC7i3nzp0ri7NVX9xmNHq+2IVeiyltJtZDKKbQ7zX/13/91+Jf/uVfytX3U0yp2o0mxZYURzKVJn8nQ3xTBFmWv5tCSTplmVNtqB4ADFdGfebZni9C8gVHnt22Kwa6kvtLCrdZUmA5T8jPcj8yAo51+WvtY4ecgDONxpjXP/zDPxT/9E//VK41ks5U1arbGTWSQontzQBgfFIkqXqGr9rVDqBLGbmekXDL96UsN5DCLqzKX2sfO+QEnGk0xrwy3Sa725w9e7bc2cY3UgAwbklQMvU2a5ItFmfPCFSAoch6jcuyAUaWHpCPsCp/rX3skBNwptEYF9cyw+zu3r1bTt/JdJ6s2m/ONACMU9Yiu3r1ajl91w52MO6kcG5STBnCrqKMO24UU+j9WqaAklW2jx07VhZWMgRPJwwAhiXP5owmzZonKZoAw0vm+nifqcmIlEzzyXQf2CZufhhiMCqmTKsxrruWWTvl9OnT5RSgLBRltx0A2K1M38mOedktL8/oW7du+QYXBprMDSV/G4q9Rr1nRF12+/nzn/9cfqlrlDxbxdgQg1ExZVoPgzrXMp20S5culR03NzUA6F6+na1a4yR/nqk7FoSH3fWfh/Q+Y5EcIrlEpvBcuHChLASneJINLr7NLzIiJSPks9tP1aYYUDvGhhiMiinTehg0uZZW+weA7mQxxvv375ffzGZ70Cwa69kLw+s/D+l9uswRvKb7UkxRTMG1BNDB9Gq9E7mrtcKy9kl233n27JmptTDxYopnnZdiyoSKKS6UYgoAOphz70S+efOmnKvfRUElBZJsV3zlyhXD1wE5wh6y2yjyv86LKUPuICKYANw3GcP1yxphmdP/+PHjVv/drAtw/Pjxcq2AixcvFg8ePCg+fPjgggCedbi2DX//2seO+cQKQsEE4L7JWK7f69evy3VKMnJkU1lEsWph2KyFkvfP4rEAnnW4tpv//rWPHfOJFYSCCcB9kzFcv20KKZm6c+/evXLEyZEjR4o7d+440YBnHa5tR79/7WPHfGIFoWACcN9k6NdvUUjJoq9NZapOdtzJFp+vXr2y8w7QSVLoWYdr2zxuFFMQTADum3R0/VJIyWKz6wopKZhkxEp22jFNB5jT1sjox4w5/naym48LJZgAcN+c+vVLISWLza4qpNy8ebNcNDbHnDt3rlw01sgTYMzFFBuOYDefjoJRMUUwAcz9fqiDOY/rnF17FmukZAvkqiJJduDJ1B2jUYAuiiCKKcj/Ov6sfQajYopgApj7/VAHcx7Xef/+/cV//Md/FGfOnClHnqRwAtBX3tXm+4wt31t1fN33+fa45f/2DJb//d1n7TMYFVMEE4D74W7fb4qdwXWfoe/Ptzin//iP/1j88Y9/LP7rv/6r+N///V8BALRyT/Os2+zvbPPMXHdd5Dnzzv92UkzxrZxgAnA/3M37TbEzOMRiyvPnz4sbN26UO/Hs27evHKFy+/ZtO/IAnnUdv1/dYsqqfHLdyJR1z5jFf68azVL3s9X5O239rOp3lv91UExp88QqprihArgfDrOYMvbO4LpO8V7v39V1yZopKa5kwdkTJ06UU4BOnz5d3LlzpyyufPnyRYAAnnUtFlPW/e+qZ0MbxZS2/40+ftb289BuPhJwXEuA2RZTxt4Z3OT36vO6pLjy4sWLcuTKorhitArgWddfMWWv5+C6Z02dES1Nn2nb/J2mP6v7nnPN/xRTcC0BdDDX/r2xdQbrdnzrdoqH1IlUSAE869p7v7rFlFXPwiYjU7p4fu71jN509OYmn2mO+Z9iCq4lgA7mRp2EoXYG63Z89+oIdz1V2HMPGGNSOLdiSlvTfLp4frZxfTcd9ek5qJiCawkw+fvh0Ispu+wMbtoR9twDxpbM9fE+Y3vWNS2M7Hpkyq6nyXoObtGHGWIw6ohIHgDcD7t5vyl0Bqs6vmNaMwWgj7xrl8WUXW440uQZsNeolW2KKcvno+7zYhcLuHsObvhZFVNwLQHm0cGcSmdwVQd3qLv5ACim2L1V/qeYMuog9NrdC0Dnwv1VJxJg2sUU90oUUxRTvHT2AXRCcP2A0RZT3CtxbWdYTAEAnRBcPwD3SlzbwX5WlxsAdEJw/QDcK5n7tR391sgAoBOC6wfgXolr2/fvX/tYlxsAdEJw/QDcK5n7tVVMAQCdEFw/YOb3I/dKXNvu4kYLBgCdEFw/YITJXB/v417JnK5tJ8UUjR0AdEJw/YDhJHNDy98W98C2X3gODvKzDjkYAWBqnQsdTJ1IgD7yLsUUPAc7/qxDDkYAmFrnQgdTJxKgj7xrl8UU91TPwVl81iEHIwDoXOis6EQCc7uPuAe6p2oDI/iscwhqANDBRCcSwLMOz8HWPqvLDQA6mLguAJ51zP2a2RoZAHQw0YkE8KzDc7Dh71/7WJcbAHQwcV0APOuY+zVTTAEAHUx0IoGZ34886/Ac7C5utEwA0MHEdQFGmMz18T6edczpmnVSTNGIAaCbzsW7d++Kx48fl/+rg6kTCbiPDOl9NrkHtv3Cc3CQn3XIwQgAU+tc6GDqRAL0kXcppuA52PFnHXIwAsDYvX//vnj79q0Opk4kQK9515DvRe6VnoOT+KxTCEYAGIpPnz4Vjx49Kq5du1YcPny4OHLkSHH//n2dEJ1IAHmXe6VrO6XPKqgBYDOfP3/+7s9+/fXX4sqVK8WDBw8arYGig6kTCeBeiWs7os/qcgNAPR8/fixevHhR3Lhxozh27Fhx4sQJnRBcPwD3SiZybW2NDAAt+/LlS3Hw4MHi7Nmzxd27d8t1UPJnOiG4fgDulUzj2iqmAEBDHz58KJ49e1Zcv369OH78eDkKRScE1w/AvZL5XFvFFABo4PTp0+VisRcvXizu3btXvHnzpvj69atOCK4fMIukcFf3Sq/pvhRTAGACslDskydPylEnv/zyy3c///3333dWPNHB1IkE6KIIopji5Tk4kGKKjgEAY/P48eNyys6BAwf+Ourkt99+G/xD3EsnElBMmXIxZW7u3LnjJEwxVgUjAGOWhWAfPXpUPH/+vPJnmbLTxUKxXcsWy5cuXSr2799fbrX8/v17F7sFnz59KhcQHmObAGaSoCmmwDhiVTACMDavX78uR5ocOXKkfKXY8PPPP0/qM96+fbscSZPkn/Zkytfly5eLU6dOObfAMBM0xRQYR6wKRgCGKlNyqtY4effuXTmFp6vtiZm+jE7JFLC0JYBBJWjyLhhHrApqAIYiowZSJMlCsceOHSsOHjxYXL16ddKfN0n9uXPnXPwdSFs7ceKEghwA0JgKCQA7UbUQbHbVyfSdFBgylWeq8jl/+umncjvm8+fPF69evdIgdmQouzgBMF0WoB0PWyMDMDhZUDULxWa9iiyqeujQoXJkxhxljZeMuDHFBAAk6IzzWrmqAPQiIzCyO839+/eLjx8/OiEMUgp8Vev0AEAfCTrjuVauKgBbS3EkWxOnWJK1TqY8RaeJ7DCUKUuMR0ZQZfpVpmEBSODZVnaOyxpwTC9uRBgAW7l27Vpx4MCB4syZM8WDBw+KN2/ezH5Bz5cvXxanT58uTp48WTx9+lQjGZkUB3Ptbt68aU0VYNDJXB/vw3ayRtyRI0eciAnGn918ANizE3Dv3r1yYdiHDx9+9/NMi5Bw/s3Zs2fLQsqTJ0+clxHLIsGZmpYXwFCTOfnbOJ4nmeLMBGNVMAJQJdN2Miw1r0zfyTayVTvw8PcynJfpeP/+vZMA9JugKabAOGJVMALMV4ojKZJUjTjJNymKJ6tlbY2MPgGAVhM0xRQYR6wKRoB5yciJbM17/Pjx4ujRo+X0nax1Qj0pomSkTtaJuX37thMyM5nWNvc1gYCOEzR5F4wjVgU1wPRkrY4sBFs1ciI/e/HiRfHhwwcnqqFz586Vi8hlpxfTeeYp1/7UqVNGbQHAzKmQAExIRphcvny5TPizRXFGUOSbdNqRUSkWlSULCSbGrKcCwF4sQDsutkYGmLhs3Vo11SDfmmf9kyT9bC7n1sgD1smW14cOHSoXagaAVWyNPC6KKQATfBAnebtx40aZwGW9jlevXjkxLcvUnbt375bnOP8L67x9+7Z4/fq1EwHA2j6cYsp4KKYAjFjViJMMD71+/Xq5806mFphq0q6cz6tXr5bbQGdxXuvJADCnpJDuKKZMN25EGMCOk/gUR1IkuXbtWrnDzp07d5yYHUjBytQeAMaUzPXxPmxHMWW68Wc3H4AdShElU0qyaGyS+ax1YtvVbqWAlcXgoAvZarxqFy2AvvMu+dswWIB2wrEqGAG6S9qzPXEKJpmik5En7PZ6ZHHefDt069YtJ4ROvHv3rhxhljZmOh6wUYKmmALjiFXBCNC+7LaT9TeOHj1ajjrJlsW//PKLE7MDSWhz/nMtzpw5U7x48UKSS6fyLeTZs2eLc+fOlfcCgEYJmmIKjCNWBSPAZrLWyb1798qFS6uS88+fPztJA5BpUxkZlBED0Kesf2TrZKBxgibvgnHEqqAGaCYjTQ4fPlyOPMnUnUwdUTgBAID5UCEBqJCh+c+ePSs+ffr03c9evXpVjnIwVWRYsj7NpUuXyik9AABDkN18sn4e42BrZIANPH36tFxTY9++fcWBAwfK9Q6yuw7DlrVoUkTJwrKPHj2yUw+Dlqk/1lEBmI98CZf+JeOgmAKwQkaTvH37tlzvpOph9/LlS8n4iOTbnuycYqoVY5FiSqYJZiQVANOnmDIuiikASwl3pn5cuXKlHHGyGMEAsAuZQpj7UHaWAhhCUkh3FFOmGzciDJiUqtEJeYilkJKCih1dximjhbJzUq4lTEFGx2W7bvckYJtkro/3YTuKKdONP7v5AKOWUSf5lje76uSbXg+r6V3fmzdvliOKzp8/bw0bJsUi1kCXeZf8bTh9GQvQTjRWBSMwVvlG99SpU8X169fLh1TWQvny5YsTMxFZU+LQoUPlGhNVa9wAwCQTNMUUGEesCkZgqJJAZ22TjEjIcHjmJd/aWwyYucnuVMDMEzTFFBhHrApGYIgyZSevy5cvl9N4MkSSacpoosXIIpizDx8+FMeOHStu3LhhChDMOUGTd8E4YlVQA7vw6dOncjvbrHVSNYXDNrfTl2TxyZMnf13rxnoo8H/3vozGO3v2rJFZADBgKiRAr+7evVt+85rXYoedjx8/OjEzk6kMmbp16dIlO/TAkhQab9++XcZIk/ujIjTA8FiAdlxsjQzsVBYOTZGkKknOA0WHn0ztsagsrNdk2+TE1MGDB8tRfwAMh62Rx0UxBejd69evi4sXL5ZTNjLq5OrVq+WfMQ3bTDdI0cQuS9C9CxculIt2AzAciinjopgCdCYjS6p2m8h6F1n/It+kWjhxWvJNd6YbNB1RlHayKLBZDwXasa6wmXvwuXPnnCSgcVJId7KRQvpDTC9uRBiwVhLozPO8fv16OeLk0KFDxc2bN52YGclimE2+7U7h5PTp02VbyXQvxTVoR0b7HT58eOU6Qym07N+/31QfmFEy18f7sJ30o7NOINOLP7v5AKUkvFXbD2fxw1u3bpVV9Wzbybxkx6UUU5pYLLRmag+0L4WUFFSeP39e+XNTfWBeyZz8bfjyJdOqezYjj1XBCPOVaRgZOZDOd77NPH78uJPCX2XKVqborNtNJD8z8gT69fbt2zI279y5893PTPWBCSRoiikwjlgVjDBPSYBPnTpVDjvMt5iGhVPVPl68eFH58xRRrl27Vk7lSWIH9CtTep4+fVr556b6wMgTNMUUGEesCkaYpky1yDeUiwVAq6bwwCr5xjvFkmXZmSc7NWWaQaZ/SdhgeEz1gZEnaPIuGEesCmqYZkf65MmTZdKbtSsycsD6FdSV6V+Z8lW1e09Gqty7d2+rrZKBbpnqAwDdUyGBEcrogLt375YLg66ahgGbSAElhZSq7a+B3dqrKP7TTz+Vu6395S9/MdUHYCAsQDsutkaGDu3yG/ksFpsOctapyKiTfPtohx3alHb1n//5n+UUgRRV1i0+C/QnhZQDBw4UR48eLUcfZppdngHppC+KLCmGZmrn2bNni3//93831QdgAGyNPC6KKTVPkpfXqtcqL1++LAsZXRVU0iF+8+ZN2QHOVsTLktjuuniifXhtEjuAe6h7HaCYgmKKzozXDDtJKaTkW8EuptVk2s7ly5fLUScHDx4s57pX7dIgdrwkGKD/4eVeB20nhSimoJjSuDMDddpFG4WUjDrJOhRVI04y0uXnn38exY47Yme60g7TBjM6Km0+D/8sNnv79u2yE5A1ek6fPl3uDpXC37ftQLuA4d1DrZniGcj0k7k+3oftKKZMN/5mu5uPhyF128U2hZSvX7+WCwJmDnumB2UNiqrtZsUO7qkgVnD9oM28S1sdBgvQTjhW5xqMHobUaRdNCin5Rj/Fk2VZJDAV6UzlETtIMECsiBXXD/rIu7RV6DhW5xqMHobs1S72KqS8e/euLJJk95Osc5JX/kxHEgkGIFZcP9imnQ3pfYAVMTbXYPQwZF27qDMiJetI3Lx5s9yacgxrnYgdtAsQK7h+jKOdASOI1bkGtYch69pFFtfMiJNLly4Vhw8fLkegIHbQLkCsuH6uHwDlM2GqDzlb4LFN+/nDH/5Q/PGPfyz+9Kc/FR8+fJjVZxc7SDDAPRT3OqAdFqAd332+9rE6M910ZnbdEVr1727z+3TZwRtKx2Tx2R49elScOXOmnOqTESqvXr2SCHQcO9u02eUterdtZ3XfT/xIMGCqxZR1v8ecY929DmjK1siKKbN9yG3yfkPodFT9m9sWUoZaAOmy/WQtlLt37xbHjh0rjhw5Uq6TMtVFZncdO20VU/o8TvxIMGBI/Q/3LPc6YHgUU8Z3n699rIdc/wnh4r+X/6zOtz+r3qfJ31v3b676e3U6Vnt9hr1+Vue8d/1t3br3fvPmTXH9+vVy156TJ08WDx48KD59+iR2Wny/Ou14r/a+ri3Veb/lP2uznU85fiQY6HzNp5hS9z677v5V976nmAL9JIV05969e+WmFSim6My0cPLrFjDq/GzVsXtNU2iSlNX5XHV/zzrvX/dz7Coh/Pr1a7nLTxanPXToUPH582ex00Mxpe7P1v13m++3aTxONX4kGOh8TbuYUvd+uel9cd3fU0xBMqeYMmZ37twpX8y4mDKWYBxaMaXJ6I9tEshVP6s7daLO320yf7rpaJc6iedQiinf+vLli0Sgp2JKk878Lt6vyaiaKcaPBAOdr+kUU5rcs/r4mWIKkjnFlDHL2otzWH9xlrGqmNJtMWXTpKuNn+01RWdVR2mT0Sh13q+NZLDrhfnm3EkaSiLQpN1uW0xp8/2aFiumFj8SDCQ/0yqm1O3HbNtPqXPfU0xBMUUxBRRTFFN6LabU/TfqJLNN50/X+be3/WZdJ2lexZQupuXs4v2mGj8SDCQ/81wzpYvRJ4opuJ8opoBiykw7M00LGU2Sum3WaNim2LLN+zVZs2XTDptO0rQSgTrtrc01U7oemTKH+JFgIPlRTGlzTTjFFBRTAMWUmXZm1g2lb7rLxiar5NcdIbPp77jJqvxNizdD281HIrDbYkqdWNirLTXZgWLT3Xz2+j2mGj8SDCQ/81wzpe69eZv7qWIKAKMupoytM9P2a6ifdYzvPafOsNjR4RQ74B46p3vo1O8D7nVAUxagne5zTDFFMWV2HSGdJLGD2AH30G4+t3sdwN+zNbJiioch2gXOEdoFiBXXz/UDGlBMGd99vvaxHoagXThHaBcgVnD9mG9SSHcUU6YbN4opoF04R2gXIFZw/RhhMtfH+7AdxZTpxt8Pcw1GD0O0C+cI7QLECq4fY07m5pS/jZUFaCccq3MNRg9DtAvnCO0CxAquH0NsZ0N6H2BFjM01GD0M0S6cI7QLECu4fgyxnQ3pfYAVMTbXYPQwRLtwjtAuQKzg+jHEdgaMIFbnGtQehmgXzhHaBYgVXD8ANnomTPUh1/YLnaS5fHaxg9gB91Dc64B2PH/+vPj111+diBHd52sfqzOjM4NOkthB7IB7KO51QPuuXLlSPH782IkY0X2+9rEech6auN5iB9cb3ENxXYD2KaaM7z5f+1gPOQ9NXG+xg+sN7qG4Lsw3KaQ7iinTjRvFFA9NXG+xg+sN7qG4LowwmevjfdiOYsp0429yu/nozOB6ix3EDriH4l7HHJK5KeRvU2cB2gnH6tSCUWcG11vsIHbAPRT3Osbczob0PsCKGJtaMOrM4HqLHcQOuIfiXseY29mQ3gdYEWNTC0adGVxvsYPYAfdQ3OsYczsDRhCrUwtqnRlcb7GD2AH3UNzrAOj0mTDVh1zbL3SS5vLZxQ5iB9xDca8D2mEB2vHd52sfqzOjM4NOkthB7IB7KO51QPtsjTy++3ztYz0MQbtwjtAuQKzg+gHtU0wZ332+9rEehqBdOEdoFyBWcP2Yb1JId86fP1+8ePHCiZhg3CimgHbhHKFdgFjB9WOEyVwf78N2zpw5U7x69cqJmGD8/TDXYPQwRLtwjtAuQKzg+jHmZG5O+dtYZYrPb7/95kRMMVbnGowehmgXzhHaBYgVXD+G2M6G9D7AihibazB6GKJdOEdoFyBWcP0YYjsb0vsAK2JsrsHY1RaGXtN4IXa8xA64h3q51zHmYgqgmKIz46WTJHa8xA64h3q51wEwvmIK03bnzh0nAcQOMHBfv34tbt68WXz48MG9EWAELEA7LrZGptNGA4gdgLHfG798+VJ8/PjRxQI6ZWvk6T6/ZAFICGEL+/fvLz5//uxEAK379OlT8fTpU/fGjrx8+bI4ePBgcffu3XLED0AXFFOmmxfLoGncaIC/OXLkiKGbQOtSREmif/36dffGDmW61IULF4oTJ05IdtC/pxOKKdONGxGGmy3MIGEAxiEd7lOnThVnz54tfv31V/fGnmSUysmTJ8vRQDCVfrn+/TAopkw3/n4QjISF4mAz9+/fL37//XcnAmjtnvLixQv3RpDMDeZ92I4FaCccq4IRAAC+pyDEThI0xRQYR6wKRgCA/mXYt4VPh+3SpUvllKv37987GfSXoCmmwDhiVTACAPTn3bt3xfnz54ujR4/amnfgUuzKlKXFrj92b6OXBE3eBeOIVUENANC9TBm5detWcejQoeLevXvFly9fnJSRyMiUixcvliNVACBUSChZgBY2Y1ExoK5ffvmluHLlSrkdr3vjOFlDBXA/nDZbI9NpowH+Jt9UPnv2zIkAmOm90bo3wDq2Rp5uXiyDpnGjAf4m3zLnGweAb2X0yZy/iZzLvTHr3xw7dqx4/vy5Rg9UUkyZbl4sg6ZxowH+5urVq8WjR4+cCKCUdVAydTYLlj558sS9cQZevnxZLiacRYXt+oP+PcuOHz9evH371omYYNyIMNxsYQtJmqw5BERGJySpziKlc58fP7d7Y3b5uX37dnHgwIGyuAJD6Jfr3w/DkSNHrJky0fizmw9/7fQAzWXYpqGbQKSI8vPPPzsRM743ZmSKXZroM5mTvw1ftle3ePVEY1UwAgAADCRBU0yBccSqYAQAqC+7t7x+/dqJoJaM/r1586ZvpqmfoCmmwDhiVTACANSTaTxZTPDChQtOBrV8/PixXJDXrj/Iu2BisSqoAQDWy1oYWRNFQsymUohL+1GIA5gGFRJKFqCFzfz6668SK5iBBw8eFHfv3i13bcG9cVOmiMH8WIB2XGyNTKeNBvibx48fF1euXHEiANwbAb5ja+Tp5sUyaBo3GuBvnj17Vly8eNGJgAnJyAHb27o39iWjVTJCWLIF06SYMt28WAZN40YD/M2rV6+KM2fOOBEwAenspgCQju/bt2+dkA7ujYpUReU5uX79enHgwIHip59+anyOnFP074dNMWW6cSPCZibffjRpNKuOB/GzPmEQPzDM512VzGW/detWcfDgweL27duS0wZWrSFTdW/MrjYpGDi/1d69e1ecO3euOHz4cHn+6si5PHToULlAMvNM5vp4H7Z77qwqpugnjj/+7OYzMydPniw7M8uqFqD99OlTebxOD6yOnzwcszaA+IHhaBp/v/zyS7m+x4cPH5y8BlJIyTbRKQIsq7o3plB19uxZJ24P2fUnC/jWlW2X7RA032RO/jb8PKtqAVr9xInEqmCcl4cPHxaXL1+u/XBO8APiB8ZE/PXnxYsXxalTp/b8hjWFl4y4ePnypZPWsiRv+/fvL4uCTCRBU0zRT2QcsSoY5+fEiRN7Dh/NAznHqZaC+IEx2Sv+8u2g9VDalaSgaoTrt7K1dL6FNax9Mxmpsm5L5Zz/06dPO1FTSdAUU/QTGUesCsb5djTXdWjS4ak7XxfEj/iBoVgVf4nZfAuYdVGyyCftWUz3WTcyImsGPHnyxMnaUEb05BxeunSpchpBrkHWTskuSkwgQZN36ScyjlgV1PO0bmhZkyFqIH7EDwzFqvh7/vx5cfTo0XJxz6r1PWgngUhBpWpB2pz/JPpGpWwn32IvFkrOSJTlb7Uz+ufYsWPOM+gn0hMVkpnKokf5hmPx7cZieG7+PB1Oi/BBvfjJlIHFA1P8wG7jclX85dv8LOpJt9KXuHbtWvnf394bM/3E2gDtSRtPUWW5aJL/nxh49OiRkwTyLDZka2Rq+bYyumg0FkOCZvGTHSvywBQ/sFvib/eSzGcx2hSuFvfGrPOR7ZCXd7KgG4tRQKu2rAbkWaynmEJti0WS0mgshgTN4+d//ud/yh0qxA/szrfxt26RTrqXaVQpovz5z38u743nz58vbt686cT0IOuqLApaey0IDMizqKaYQuMOaBqNxZCgefz88z//c7Fv3z7xAzuU+PvTn/5UPs+SSOqs7la+kf23f/u34g9/+EN5f6xaMJX2Xbx4sVwz5b//+7/LrZKdd6x5Kc+i27j5YWwfzMtrjC/x4+U1/Phxrr36bp/OnzagHWgjXRZB+u6DutZeY8qNei2mDOFDa3hebhjix0v8iBEvxRQvxRQvxRTFFC99u53nV2MsptA+Q6Kn32bFj/gRP2Jkina1DWybxZSp+stf/uIetcN24Nk03jYy9mIKYnEubUQxBWbSZsUP4keMMKz2os1pA9qBNtJl3qWYgtyo488z1GAUoLhhiB/Ej2IKU26f2pw2oB1oI0PNu7RltJEan2dMQS1AccMQP4gfMcJU2qc2pw1oB9qIz4uYGPHncfJhHm1W/CB+xAjDai/anDagHWgjPi9iYni/Y+1jnXyYR5sVP4gfMcKw2os2pw1oB9qIz4uYGN7vWPvYIZ1UWy7hhiF+oKtERYzQV/vU5rQB7YApFRe0ZRRTFFNAMUX8oJgiRlBMQTGFWSSObe4KpC2jmDLwYsqu3q+N4N72M3z7d6veZ9c3nnUdxrZuzEN8eIypmCJ+/v6/t2mze8Vj03ZW9/3ET7fFlF38Xnt1Irs61+vaxy6u79B+n76KKUONhXXXYq97S9P3mMK13raYMpR2UOe5uFfSW+eeVuf5NJd2MpWtkYfQlvtuM5v08druI87t2TnpYkqXH3oIyeBWJ7GlDs66QBpCR7jtQspQEzjFlGnET1vFlD6PEz/TK6bs4hrt1T76bitTba9jLaY0bRtN+iBzuTeNuZiyKlnbJDHc9M/m1E4UU4bR1+y6mLJXXLWRD87h2TnKz6OYUv/BsVeFft2f7fUwqaro1/3dqo5t43fY5EG410N53eeqc77r/p51b2pdj/iZazFlqPHTtI3t1ZY2+YxttnPxM/5iSp17cNPzv+7f2STm6vw+27TXujG27t+o+zkUUzYrtG0zWm8K11oxZbtiStMkcUrtRDGln2LKps/SprlP3cLJXqP2mnyOOT07FVMmnAxu2vC3fY+636K39Tts+js1ScrqfK66v2ed99/kWimmTDN+2ny/TeOu7XgUP9MqpmzaBjZtH03b4CbxsOnv0+b56Lt9KqZM61pPqZiy7n93WUyZajtRTOm2r9nXs6vuF3p146qNHHCKz07FFMlg6wll3W++myRS2/ysySiEOoWVbUYhbJIA1v03FFOmGz+bPJR28X5NviERP9MpprRxL2/aPob0+/Txs7kXUzZpG+vWzNjr35jCtZ5bMaXJuieb9Anm1E6GPi10TM/RNtpMG33LTYopm/QR5/jsVEyZeDK4bjGuOg2/zarkLoope03R2etzb1JV3nTqUN1z2PWq4oopu42fvdpfnX+rjYSxi2KK+FFMaXL+2465tttrW8+oOp9j7sWUNu7nm/6bY73WcyumbFJ8bVpMmUs7mdrWyEN6v236apv0LevmOU2/RG5rNMoUnp2TLqZIBtv99nyMxZS6/8ZeD+9Nkoo6//a236yP9YYhfjYrpgxt2tA2PxM/8yymtPHv9P3tXp8xoZjSfzFlqtd6zsWUps+BttdMGXs7UUzprq/ZdzGlzbhqY1mFKT47h9TeFVNaXiF60yBoY355m/+/rTl1bf/ObXbM20hkFVOmEz9121uba6Z0PTJF/CimdFG82HZkStsdwjbXA1NM2byY0uZIhbFe66kVU7ZJ4DYppmzTBxx7O1FMGX4xpc3+Whv9xzk/OxVTtjypbb+2+ff3Om6vIK2zK0bdIFj3b68Ltr3mM6/6HdqYR930d2xrp4o616TueRpbMUX8FBu136YjMzb9/TbdzWev30P8DD9Guiim1L3P1929Y5Ph/pvuFrDpPaCN3bn6Lqbsus1tUkypc29p8h5TuNbbFlOG0g7aGhHdpG9XN0am2k6mVkzZZVvucs2UbXfz2ab/2MaaKVN5diqmjLyjO3ddr4sz13M69WIKDD1+xMh4nx9DPs9jLKbMtQ+imKKdTLkf2Mf5mmpbnmo8jfXZqZji5As8hZTBtlnxg/gRI2PrsE+9fc65zU2hQDDUqYjayfjbyNC2Rp5qW55K3M3t2TmkdvHDmBqbhw2SQfGD+BEjTKV9anPagHagjXSZdymmIDfq+PMMNRgFKG4Y4gfxo5jClNunNqcNaAfaSJd5l2IKcqOOP89Qg1GA4oYhfhA/iilMuX1qc9qAdqCNdJl3KaYgN+r48ww1GAUobhjiB/GjmMKU26c2pw1oB9rIUPMubRltpMbnGVNQC1DcMMQP4keMMJX2qc1pA9qBNuLzIiZG/HmcfJhHmxU/iB8xwrDaizanDWgH2ojPi5gY3u9Y+1gnH+bRZsUP4keMMKz2os1pA9qBNuLzIiaG9zvWPnZIJ7XtF8zhhiF+ED9ihGG1T21OG9AOmFJxQVtGMUUxBRRTxA+KKWIExRQUU5hF4tjmrkDaMoopAy+mzOki4YYhfqDfYooYoe9iijY373uUdsBUtkbWlpnTte+kmNLlhxaguGGIH+iqLYoR+m6f2pw2oB2wzTVTTEFMjOTz9B2MAhQ3DPEDfbZFMULf7VOb0wa0A7a5ZoopiImRfJ6+g1GA4oYhfqDPtihG6Lt9anPagHbANtdMMQUxMZLP03cwClDcMMQP9NkWxQh9t09tThvQDtjmmg3tOmvLuPYrPs8QglqA4oYhfqCrtihG6Lt9anPagHbAlK6Ztoxrv+LzCFAY9w1D/CB+xAjDap/anDagHTCla6YtM6drb2tkAcqMbhjiB/EjRhhW+9TmtAHtgCldM22ZOV370RZT2n7BHG4Y4gfxI0YYZjFFm1NM0Q60kSkVU7RlFFMUU0AxRfygmCJGUExBMYVJJ45t7+ajLaOYMsBiypROPgy1zYofxI8YYVjtRZvTBrQDbWTbZK6P99GWmVMb6aSYMoQPLUBxwxA/iB8xwlTapzanDWgH2kiXeZdiCnKjjj/PUINRgOKGIX4QP4opTLl9anPagHagjXSZdymmIDfq+PMMNRgFKG4Y4gfxo5jClNunNqcNaAfaSJd5l2IKcqOOP89Qg1GA4oYhfhA/iilMuX1qc9qAdqCNDDXv0pbRRmp8njEFtQDFDUP8IH7ECFNpn9qcNqAdaCM+L2JixJ9njCffy2tsL/Hj5TX8+HGuvfpun86fNqAdaCNTTJS9vMYcE5PfGtnLyw1D/HiJHzHipZjipZji5TkmV/MSE4opAAAAADuimAIAACApBDqKGxEGAAAwwmSuj/cB8bfiWMEIAAAwvmRO/gY7jFXBCAAAMJAETTEFxhGrghEAAGAgCZpiCowjVgUjAADAQBI0eReMI1YFNQAAAEB9KiQAAADA7NkaGQAAAKABxRQAAACABhRTAAAAJIVAR3EjwgAAAEaYzPXxPiD+VhwrGAEAAMaXzMnfYIexKhgBAAAGkqAppsA4YlUwAgAADCRBU0yBccSqYAQAABhIgibvgnHEqqAGAAAAqE+FBAAAAJg9WyMDAAAANKCYAgAAANCAYgoAAICkEOgobkQYAADACJO5Pt4HxN+KYwUjAADA+JI5+RvsMFYFIwAAwEASNMUUGEesCkYAAICBJGiKKTCOWBWMAAAAA0nQ5F0wjlgV1AAAAAD1qZAAAAAAs2drZAAAAIAGFFMAAAAAGlBMAQAAkBQCHcWNCAMAABhhMtfH+4D4W3GsYAQAABhfMid/gx3GqmAEAAAYSIKmmALjiFXBCAAAMJAETTEFxhGrghEAAGAgCZq8C8YRq4IaAAAAoD4VEgAAAGD2bI0MAAAA0IBiCgAAAEADiikAAACSQqCjuBFhAAAAI0zm+ngfEH8rjhWMAAAA40vm5G+ww1gVjAAAAANJ0BRTYByxKhgBAAAGkqAppsA4YlUwAgAADCRBk3fBOGJVUAMAAADUp0ICAAAAzJ6tkQEAAAAaUEwBAAAAaEAxBQAAQFIIdBQ3IgwAAGCEyVwf7wPib8WxghEAAGB8yZz8DXYYq02C8dtXnWMc5zjHOc5xjnOc4xznOMc5znHNjmurmOL8Os5xzY9rvZgCAAAAgGIKAAAAQCOKKQAAAAANKKYAAAAANKCYAgAAANCAYgoAAABAA4opAAAAAA0opgAAAAA0oJgCAAAA0IBiCgAAAEAD/w+zdUsbBE7XFwAAAABJRU5ErkJggg=="/></p></div>Illustration <a name="refIllustration0"/>1: Components in the SignServer project</div></div></div></div><p class="Standard">Â </p><p class="P59">Â </p><h1 class="Heading_20_1"><a name="7__Available_Plug-ins"><span style="min-width:0.762cm;">7 </span></a>Â Available Plug-ins</h1><h2 class="Heading_20_2"><a name="7_1_Configuring_a_plug-in"><span style="min-width:1.016cm;">7.1</span></a>Â Configuring a plug-in</h2><p class="Standard">Â </p><p class="Text_20_body">A worker component is configured by entering its class path (and optionally its crypto token class path) Â in a memory bank called the global configuration and then issuing the reload command. There exists sample configurations for most of the plug-ins in the 'sample-configs' directory.</p><p class="Text_20_body">Â </p><h2 class="Heading_20_2"><a name="7_2_SignServer_Signers"><span style="min-width:1.016cm;">7.2</span></a>Â SignServer Signers</h2><p class="Standard">Â </p><p class="Text_20_body">There currently exists three types of signers. The first one is the time stamp signer generating RFC 3161 compliant timestamps using the Bouncycastle library. A MRTD signer creating 'Machine Reader Travel Document' signatures using the RSA algorithm from pre-padded data. The final signer is a PDF Signer used for automatically signed requested PDF documents.</p><h3 class="Heading_20_3"><a name="7_2_2_Time-stamp_Signer"><span style="min-width:1.27cm;">7.2.2</span></a>Â Time-stamp Signer</h3><p class="Standard"><span class="T6">Important</span>, From 3.1 must the Time-Stamp Authority module be uploaded to the SignServer before it can be used. This is done with the command:<br/> '<span class="T52">bin/signserver.sh module add dist-server/tsa.mar</span>'</p><p class="Standard">Â </p><p class="Standard">The time-stamp signer have the class path: org.signserver.server.signers.TimeStampSigner</p><h4 class="Heading_20_4"><a name="7_2_2_1_Overview"><span style="min-width:1.524cm;">7.2.2.1</span></a>Â Overview</h4><p class="Standard">The time stamp server generates time stamp tokens and have the support for the following options:</p><ul><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Set of accepted policies<span class="odfLiEnd"/>Â </p></li><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Set of accepted algorithms<span class="odfLiEnd"/>Â </p></li><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Set of accepted extensions<span class="odfLiEnd"/>Â </p></li><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Accuracy microseconds<span class="odfLiEnd"/>Â </p></li><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Accuracy milliseconds<span class="odfLiEnd"/>Â </p></li><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Accuracy seconds<span class="odfLiEnd"/>Â </p></li><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Included certificate chain (currently doesn't include CRLs)<span class="odfLiEnd"/>Â </p></li><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Ordering<span class="odfLiEnd"/>Â </p></li><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>TSA name<span class="odfLiEnd"/>Â </p></li></ul><p class="Standard">Â </p><p class="Standard">Â </p><p class="Standard">The time stamp signer currently don't support:</p><ul><li><p class="P141" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>CRL inclusion<span class="odfLiEnd"/>Â </p></li><li><p class="P141" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Signed attributes<span class="odfLiEnd"/>Â </p></li><li><p class="P141" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Unsigned attributes <span class="odfLiEnd"/>Â </p></li></ul><p class="Standard">Â </p><p class="Standard">Timestamps requests are served through a http service at the URL: </p><p class="Standard">'http://&lt;host name&gt;/signserver/process?workerId=&lt;worker Id&gt;'</p><p class="Standard">If no 'worker Id' parameter is specified then will the id of 1 be used as default.</p><p class="Standard">Â </p><p class="Standard">The time-stamp signer requires a time-stamp certificate with the extended key usage 'time-stamp' only. The extended key usage extension must be critical.</p><h4 class="Heading_20_4"><a name="7_2_2_2_Available_Properties"><span style="min-width:1.524cm;">7.2.2.2</span></a>Â Available Properties</h4><p class="Text_20_body">Â </p><p class="Text_20_body">The following properties can be configured with the signer:</p><p class="Text_20_body">Â </p><p class="P75"><span class="T7">TIMESOURCE</span> = property containing the class path to the ITimeSource implementation that should be used. (OPTIONAL, default LocalComputerTimeSource)</p><p class="P75">Â </p><p class="P75"><span class="T7">ACCEPTEDALGORITHMS</span> = A ';' separated string containing accepted algorithms, can be null if it shouldn't be used. (OPTIONAL, Strongly recommended)</p><p class="P90">Supported Algorithms are: <span class="T6">GOST3411, MD5, SHA1, SHA224, SHA256, SHA384, SHA512, RIPEMD128, RIPEMD160, RIPEMD256</span></p><p class="P75">Â </p><p class="P75"><span class="T7">ACCEPTEDPOLICIES</span> = Â A ';' separated string containing accepted policies, can be null if it shouldn't be used. (OPTIONAL, Recommended)</p><p class="P75">Â </p><p class="P75"><span class="T7">ACCEPTEDEXTENSIONS</span> = A ';' separated string containing accepted extensions, can be null if it shouldn't be used. (OPTIONAL)</p><p class="P75">Â </p><p class="P75"><span class="T7">DEFAULTTSAPOLICYOID</span> = The default policy ID of the time stamp authority (REQUIRED, if no policy OID is specified in the request then will this value be used.)</p><p class="P75">Â </p><p class="P75"><span class="T7">ACCURACYMICROS</span> = Accuracy in micro seconds, Only decimal number format, only one of the accuracy properties should be set (OPTIONAL)</p><p class="P75">Â </p><p class="P75"><span class="T7">ACCURACYMILLIS</span> = Accuracy in milliseconds, Only decimal number format, only one of the accuracy properties should be set (OPTIONAL)</p><p class="P75">Â </p><p class="P75"><span class="T7">ACCURACYSECONDS</span> = Accuracy in seconds. Only decimal number format, only one of the accuracy properties should be set (OPTIONAL)</p><p class="P75">Â </p><p class="P75"><span class="T7">ORDERING</span> = The ordering (OPTIONAL), default false.</p><p class="P75">Â </p><p class="P75"><span class="T7">TSA</span> = General name of the Time Stamp Authority. (OPTIONAL)</p><p class="Text_20_body">Â </p><p class="P66">Â </p><p class="Text_20_body">Â </p><h3 class="Heading_20_3"><a name="7_2_3_MRTD_Signer"><span style="min-width:1.27cm;">7.2.3</span></a>Â MRTD Signer</h3><p class="Standard">Â </p><p class="Standard"><span class="T6">Important,</span> From 3.1 must the MRTD Signer module be uploaded to the SignServer before it can be used. This is done with the command:<br/> '<span class="T52">bin/signserver.sh module add dist-server/mrtdsigner.mar</span>'</p><p class="Standard">Â </p><p class="Standard">The MRTD signer have the class path: org.signserver.server.signers.MRTDSigner</p><h4 class="Heading_20_4"><a name="7_2_3_1_Overview"><span style="min-width:1.524cm;">7.2.3.1</span></a>Â Overview</h4><p class="Standard">Â </p><p class="Standard">The MRTD Signer performs a RSA signing operation on incoming data. The data should already be padded. This signer i used to sign 'Machine Readable Travel Documents' i.e. electronic passports.</p><p class="Standard">Â </p><h4 class="Heading_20_4"><a name="7_2_3_2_Available_Properties"><span style="min-width:1.524cm;">7.2.3.2</span></a>Â Available Properties</h4><p class="Standard">Â </p><p class="Standard">No configuration properties exists.</p><p class="Standard">Â </p><p class="Standard">Â </p><p class="Standard">Â </p><p class="P59">Â </p><h3 class="Heading_20_3"><a name="7_2_4_PDF_Signer"><span style="min-width:1.27cm;">7.2.4</span></a>Â PDF Signer</h3><p class="Standard">Â </p><p class="Standard"><span class="T6">Important,</span> From 3.1 must the PDF Signer module be uploaded to the SignServer before it can be used. This is done with the command:<br/> '<span class="T52">bin/signserver.sh module add dist-server/pdfsigner.mar</span>'</p><p class="Standard">Â </p><p class="Standard">The PDF signer have the class path: org.signserver.server.signers.PDFSigner</p><p class="Standard">Â </p><h4 class="Heading_20_4"><a name="7_2_4_1_Overview"><span style="min-width:1.524cm;">7.2.4.1</span></a>Â Overview</h4><p class="Standard">Â </p><p class="Standard">The PDF signer signs PDF files and have the support for the following options:</p><ul><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Reason<span class="odfLiEnd"/>Â </p></li><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Location<span class="odfLiEnd"/>Â </p></li><li><p class="P140" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Rectangle<span class="odfLiEnd"/>Â </p></li></ul><p class="Standard">Â </p><p class="Standard">Â </p><p class="Standard">The PDF signer currently don't support:</p><ul><li><p class="P142" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Inclusion of time stamps in the signature<span class="odfLiEnd"/>Â </p></li></ul><p class="Standard">Â </p><p class="Standard">PDF signing requests are served through a http service at the URL: </p><p class="Standard">'http://&lt;host name&gt;/signserver/process?workerId=&lt;worker Id&gt;'</p><p class="Standard">If no 'worker Id' parameter is specified then will the id of 1 be used as default.</p><p class="Standard">Â </p><p class="Standard">The PDF signer requires a signing keystore with a signing certificate.</p><h4 class="Heading_20_4"><a name="7_2_4_2_Available_Properties"><span style="min-width:1.524cm;">7.2.4.2</span></a>Â Available Properties</h4><p class="Text_20_body">Â </p><p class="Text_20_body">The following properties can be configured with the signer:</p><p class="Text_20_body">Â </p><p class="P75"><span class="T7">REASON</span> = The reason included in the PDF signature and displayed by the PDF reader. Default value is âSigned by SignServerâ.</p><p class="P75">Â </p><p class="P75"><span class="T7">LOCATION</span> = The location included in the PDF signature and displayed by the PDF reader. Default value is âSignServerâ.</p><p class="P75">Â </p><p class="P75"><span class="T7">RECTANGLE</span> = The coordinates and size of the visible signature field added to the PDF file. Has the form âllx,lly,uux,uuyâ, where llx is lower left x coordinate etc.</p><p class="P75">Â </p><p class="P107">Â </p><p class="P113">Â </p><h2 class="Heading_20_2"><a name="7_3_SignServer_Validation_Service_Framework"><span style="min-width:1.016cm;">7.3</span></a>Â SignServer Validation Service Framework</h2><p class="Standard">Â </p><p class="Standard">The validation service framework is used to validate certificates from one or more issuers. It can be used to Â have one central point of performing revokation statuses to simplify the integration of external PKIs within an enterprise. </p><p class="Standard">Â </p><p class="Standard">The validation service framework also provides a validation cache that can be used to increase performance for those cases a application does multiple lookups of the same certificate within a short period of time. </p><p class="Standard">Â </p><p class="Standard">Out-of-the-Box there exists a DefaultValidationService that should satisfy most use cases but it's possible to develop a custom ValidationService if necessary. See the developer section for more details.</p><p class="Standard">Â </p><p class="Standard">All Validation Services is configured by specifying the <span class="T24">org.signserver.validationservice.server.ValidationServiceWorker </span><span class="T30">in the global configuration, then is the actual ValidationService configured in the worker configuration setting the class path in the property </span><span class="T24">TYPE </span><span class="T30">(Not necessary for the DefaultValidationService).</span></p><p class="P19">Â </p><p class="P19">The validation service framework is mostly used with X509v3 certificates but other kinds of certificates is supported as well by design.</p><p class="P19">Â </p><p class="P19">Another concept in the Validation Service Framework is that the client also can ask the service to check the type of certificate that the certificate might be used for. A certificate type could be IDENTIFICATION or ELECTRONIC SIGNATURE.</p><p class="P19">Â </p><h3 class="Heading_20_3"><a name="7_3_1_DefaultValidationService"><span style="min-width:1.27cm;">7.3.1</span></a>Â DefaultValidationService</h3><h4 class="Heading_20_4"><a name="7_3_1_1_Overview"><span style="min-width:1.524cm;">7.3.1.1</span></a>Â Overview</h4><p class="Standard">Â </p><p class="Standard">The default validation service have a set of Validators. A validator is responsible to checking the validity against one or more issuers using for example CRL check or OCSP/XKMS lookup or just by checking some database. Currently there are no ready to use validators, these remain to be developed in future versions of the SignServer.</p><p class="Standard">Â </p><p class="Standard">The Default Validation Service supports validations to be cached for some or all issuers for a specified amount of time. </p><p class="Standard">Â </p><p class="Standard">If not configured otherwise will the validation service use the DefaultX509CertTypeChecker that determines the certificate type from the key usage in the certificate. Â Key Encipherment and Digital Signature indicates a IDENTIFICATION type and Non-reputation indicates ELECTRONIC SIGNATURE. </p><p class="Standard">Â </p><p class="Standard">Â </p><p class="Standard">There exists a validation specific WebService that can be used for platform independent client calls.</p><p class="Standard">The WebService must be enabled during the build and isn't by default. The WebService WSDL file is located at the URL <a href="http://localhost:8080/signserver/validationws/validationws?wsdl"><span class="T26">http://&lt;hostname&gt;:8080/signserver/validationws/validationws?wsdl </span></a><a href="http://localhost:8080/signserver/validationws/validationws?wsdl"><span class="T31">and it contains two calls one is 'isValid' that performs the validation check and the other is a getStatus call that checks the health of the node and its underlying systems. The last calls can be used by clients for monitoring or implementing redundancy.</span></a></p><p class="P24">Â </p><p class="Standard"><span class="T6">Important</span>, Due to class path conflict in JBoss 4.2.x own JBoss WebService stack and the JAX-WS stack used by the SignServer must the JBoss WebService stack be removed before the WebService is used. This is done by going to JBOSS_HOME/server/default/deploy and remove the directory jbossws.sar.</p><h4 class="Heading_20_4"><a name="7_3_1_2_Available_Properties"><span style="min-width:1.524cm;">7.3.1.2</span></a>Â Available Properties</h4><p class="Text_20_body">Â </p><p class="Text_20_body">The following properties can be configured with the default validation service:</p><p class="Text_20_body">Â </p><p class="Text_20_body">The validation service have three types of properties, general properties (that applies for the service and all configured validators), validator properties (that only applies for a specific validator) and issuer properties (that only applies for an issuer configured in a specific validator).</p><p class="Text_20_body">Â </p><p class="P54">General Properties:</p><p class="Text_20_body">Â </p><p class="P75"><span class="T7">CACHEDISSUERS</span> = A ';' separated list of issuer names (usually issuer DNs) Â (Optional, no validation is cached if unset.)</p><p class="P75">Â </p><p class="P75"><span class="T7">CERTTYPECHECKER</span> = Certificate type checker that should be used to determine the type of certificate (Optional, default is <span class="T24">org.signserver.validationservice.server.DefaultX509CertTypeChecker)</span></p><p class="P75">Â </p><p class="P75"><span class="T7">TIMEINCACHE</span> = Time in seconds a certificates validation should be cached (Optional, default is 10 seconds)</p><p class="P75">Â </p><p class="P108">Validator properties:</p><p class="P107"><span class="T30">Validator properties is specified with the prefix of '</span><span class="T24">validator&lt;validatorId&gt;.' </span><span class="T30">or</span><span class="T24"> 'val&lt;validatorId&gt;.</span><span class="T30">' were validator Id should be an integer between 1 and 255. For instance, to specify the type of a validator with an id of 1 then specify 'val1.classpath=some.classpath.SomeClass'. This validator will be initialized with all its validator specific properties (with 'val&lt;id&gt;.' prefix removed) as well as the general ones.</span></p><p class="P110">Â </p><p class="P75"><span class="T32">CLASSPATH</span><span class="T30"> = Class path to the validator that should be used. (Required for each configured validator)</span></p><p class="P77">Â </p><p class="P111">Â </p><p class="P111">Â </p><p class="P111">Â </p><p class="P108"><span class="T33">Issuer properties: </span><span class="T34">Â Issuer properties are specified as 'val&lt;val id&gt;.issuer&lt;issuer id&gt;.&lt;property&gt;' were issuer id is a positive integer between 1 and 255. All generic and validator specific properties (with the given validator id) will also be propagated to the specific issuer configuration.</span></p><p class="Standard"/><p class="P75"><span class="T32">CERTCHAIN</span><span class="T30"> = The certificate path of the CA certificates used to verify the certificate. Should be a appended BASE64 string. (Required for each configured issuer).</span></p><p class="P77">Â </p><p class="P110">Here is an example configuration of a validation service to clarify things even further </p><p class="P110">Â </p><p class="P110"># Set up the worker -&gt; validation service wrapper</p><p class="P107"><span class="T24">GLOB.WORKER1.CLASSPATH=</span><span class="T30"> </span><span class="T24">org.signserver.validationservice .server.ValidationServiceWorker</span></p><p class="P112">#Uncomment and set class path to custom validation service, othervise is default #used.</p><p class="P112">#WORKER1.TYPE=</p><p class="P112">Â </p><p class="P112"># Name of Service (Optional)</p><p class="P112">WORKER1.NAME=ValidationService1</p><p class="P112">Â </p><p class="P112"># Define TestCA2 and TestCA3 as a cached for 15 seconds, TestCA1 is Not cached.</p><p class="P112">WORKER1.CACHEDISSUERS=CN=TestCA2;CN=TestCA3</p><p class="P112">WORKER1.TIMEINCACHE=15</p><p class="P112">Â </p><p class="P112"># Define a validator in charge of issuer TestCA1 and TestCA2</p><p class="P112">WORKER1.VAL1.CLASSPATH=&lt;Class path to some validator&gt;</p><p class="P112">WORKER1.VAL1.ISSUER1.CERTCHAIN=EFWAASDFADFASDFKASDKFW1231.....</p><p class="P112">WORKER1.VAL1.ISSUER2.CERTCHAIN=EFWAASDFADFASDFKASDKFW1231.....</p><p class="P112">Â </p><p class="P112"># Define a validator in charge of issuer TestCA3</p><p class="P112">WORKER1.VAL2.CLASSPATH=&lt;Class path to some validator&gt;</p><p class="P112">WORKER1.VAL2.ISSUER1.CERTCHAIN=EFWAASDFADFASDFKASDKFW1231.....</p><p class="P112">Â </p><p class="P112">Â </p><p class="P114">Â </p><h3 class="Heading_20_3"><a name="7_3_2_The_Validation_CLI_interface_"><span style="min-width:1.27cm;">7.3.2</span></a>Â The Validation CLI interface.</h3><p class="Standard">Â </p><p class="Standard">There exists a Java CLI tool that can be used to check the validity of a certificate from scripts. It supports a clustered SignServer installation by using the âUse first host that response OKâ policy.</p><p class="Standard">Â </p><p class="Standard">When compiling, make sure that setting validationclient.enabled is set to âtrueâ in the build properties. The client is found in dist-client/validationclient. Just copy the validate.jar and all the files in the 'lib' directory to the location where you want to use the client.</p><p class="Standard">Â </p><p class="Standard">Use the client with 'java -jar validate.jar &lt;options&gt;'.</p><p class="Standard">Â </p><p class="Standard">Here is a list of available options:</p><p class="Standard">Â </p><p class="Standard"><span class="T6">Â -cert &lt;cert-file&gt;</span> <span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/>: Path to certificate file (DER or PEM) (Required).</p><p class="Standard"><span class="T6">Â -certpurposes &lt;certpurposes&gt;</span> Â <span style="margin-left:;"/>: A ',' separated string containing requested certificate <span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/>purposes.</p><p class="Standard"><span class="T6">Â -der</span> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/>: Certificate is in DER format.</p><p class="Standard"><span class="T6">Â -help Â  Â  Â  </span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/>: Display this info</p><p class="Standard"><span class="T6">Â -hosts &lt;hosts&gt; Â  </span>Â  Â  Â  Â  Â  Â  Â  <span style="margin-left:;"/><span style="margin-left:;"/>: A ',' separated string containing the hostnames of the <span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/>validation service nodes. Ex <span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/>'host1.someorg.org,host2.someorg.org' (Required)</p><p class="Standard"><span class="T6">Â -pem Â </span>Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="margin-left:;"/> Â  Â  Â  <span style="margin-left:;"/><span style="margin-left:;"/>: Certificate is in PEM format (Default).</p><p class="Standard"><span class="T6">Â -port &lt;port&gt; </span>Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="margin-left:;"/><span style="margin-left:;"/>: Remote port of service (Default is 8080 or 8442 for SSL). </p><p class="Standard"><span class="T6">Â -service &lt;service-name&gt;</span> Â  Â  Â  Â <span style="margin-left:;"/>: The name or id of the validation service to process request. <span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/>(Required)</p><p class="Standard">Â <span class="T6">-silent</span> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/>: Don't produce any output, only return value.</p><p class="Standard"><span class="T6">Â -truststore &lt;jks-file&gt; </span>Â  Â  Â  Â  <span style="margin-left:;"/><span style="margin-left:;"/>: Path to JKS truststore containing trusted CA for SSL Server <span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/>certificates.(for HTTPS connections)</p><p class="Standard"><span class="T6">Â -truststorepwd &lt;password&gt; </span>Â  Â  Â <span style="margin-left:;"/>: Password to unlock the truststore.</p><p class="Standard">Â </p><p class="Standard">Â </p><p class="Standard">The following return values is used:</p><p class="Standard">Â </p><p class="P101">Â  -2 Â  : Error happened during execution</p><p class="P101">Â  -1 Â  : Bad arguments</p><p class="P101">Â  Â 0 Â  : Certificate is valid</p><p class="P101">Â  Â 1 Â  : Certificate is revoked</p><p class="P101">Â  Â 2 Â  : Certificate is not yet valid</p><p class="P101">Â  Â 3 Â  : Certificate have expired</p><p class="P101">Â  Â 4 Â  : Certificate doesn't verify</p><p class="P101">Â  Â 5 Â  : CA Certificate have been revoked</p><p class="P101">Â  Â 6 Â  : CA Certificate is not yet valid</p><p class="P101">Â  Â 7 Â  : CA Certificate have expired.</p><p class="P101">Â  Â 8 Â  : Certificate have no valid certificate purpose.</p><p class="P60">Â </p><h2 class="Heading_20_2"><a name="7_4_SignServer_Group_Key_Service_Framework"><span style="min-width:1.016cm;">7.4</span></a>Â SignServer Group Key Service Framework</h2><h4 class="Heading_20_4"><a name="7_4_0_1_Overview"><span style="min-width:1.524cm;">7.4.0.1</span></a>Â Overview</h4><p class="Standard">Â </p><p class="Standard">The group key service framework is used to manage and distribute group keys to clients in an organisation. The keys can be generated on demand or pre-generated at times when the system is not utilized a lot. The group keys can be both symmetric and asymmetric but one service can only distribute one type of key. If several kinds of keys are required should multiple services be set up within the same server.</p><p class="Standard">Â </p><p class="Standard">The group keys are stored encrypted in database. The encryption key can be configured to be switched automatically after a defined number of encryptions to avoid overexposure of the cryptographic data. It is also possible to switch the encryption key manually.</p><p class="Standard">Â </p><p class="Standard">The Framework requires an ExtendedCryptoToken, the difference are that the extended token have additional support for key export and symmetric key operations.</p><p class="Standard">Â </p><p class="Standard">The Group Key Service have CLI commands for administration of the service such as pre-generate keys, manual switch of encryption key and removal of group keys.</p><p class="Standard">Â </p><p class="Standard">The communication to the group key service is mainly done through the main Web Service interface. But other ways of communicating with the server might come in the future.</p><p class="Standard">Â </p><p class="Standard">Authorization to group keys is very important and therefore should a special plug-in be developed Â that looks up which clients that should have access to a specific group key which fit into the organisation needs. See the authorization chapter of how to develop a customized authorization plug-in.</p><p class="Standard">Â </p><p class="Standard">The basic configuration of a group key service is very similar to that of a validation service. Two entries is required in the global configuration. The first is the class path for the Worker to GroupKeyService wrapper, then a class path reference to the extended crypto token used with the service. If not the default group key service should be used it is possible to define a custom one by specifying its class path in the TYPE worker property.</p><h4 class="Heading_20_4"><a name="7_4_0_2_Available_Properties"><span style="min-width:1.524cm;">7.4.0.2</span></a>Â Available Properties</h4><p class="Standard">Â </p><p class="P75"><span class="T7">USEPREGENERATION</span> = Setting defining of keys should be pre-generated or generated on the fly when needed. If the pool of pre-generated keys gets empty will new keys always be generated automatically. (Optional, default is true)</p><p class="P75">Â </p><p class="P75"><span class="T7">ENCKEYALG</span> = Â Encryption algorithm used to encrypt the group keys stored in database. ( Optional, default is âAESâ)</p><p class="P75">Â </p><p class="P75"><span class="T7">ENCKEYSPEC</span> = Specification of the encryption key. (Optional, default is â256â)</p><p class="P75">Â </p><p class="P75"><span class="T7">GROUPKEYALG</span> = Â Defines the type of group keys that this service should generate ( Optional, default is âAESâ)</p><p class="P75">Â </p><p class="P75"><span class="T7">GROUPKEYSPEC</span> = Specification of the generated group keys. (Optional, default is â256â)</p><p class="P75">Â </p><p class="P75"><span class="T7">KEYSWITCHTHRESHOLD</span> = Setting defining the number of group keys that should be Â encrypted by the same encryption key before it's switched. (Optional, default is 100000)</p><p class="P75">Â </p><p class="P75">Â </p><p class="P75">Â </p><h2 class="Heading_20_2"><a name="7_5_Mail_Processors"><span style="min-width:1.016cm;">7.5</span></a>Â Mail Processors</h2><p class="Standard">Â </p><p class="Standard">This section lists the available plug-ins for the MailSigner. These plug-ins are configured in the exact same way with class path of both plug-in and its crypto token.</p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="7_5_1_SimpleMailSigner"><span style="min-width:1.27cm;">7.5.1</span></a>Â SimpleMailSigner</h3><p class="Standard">Â </p><p class="Standard"><span class="T6">Important,</span> From 3.1 must the SimpleMailSigner module be uploaded to the MailSigner before it can be used. This is done with the command:<br/> '<span class="T52">bin/signserver.sh module add dist-server/simplemailsigner.mar</span>'</p><h4 class="Heading_20_4"><a name="7_5_1_1_Overview"><span style="min-width:1.524cm;">7.5.1.1</span></a>Â Overview</h4><p class="Standard">The SimpleMailSigner is a plug-in that generates a signed SMIME message from any authorized mail sent through the MailSigner server. It can be used prove the origin of the message to the receivers .</p><p class="Standard">Â </p><p class="Standard">There exists a demo configuration in the 'sample-configs' directory.</p><h4 class="Heading_20_4"><a name="7_5_1_2_Available_Properties"><span style="min-width:1.524cm;">7.5.1.2</span></a>Â Available Properties</h4><p class="Standard">Â </p><p class="P82"><span class="T63">EXPLAINATIONTEXT Â =</span><span class="T67"> Â Text attached to the e-mail describing the signature for the recipient. (Optional)</span></p><p class="P85">Â </p><p class="P82"><span class="T63">USEREBUILDFROM = </span><span class="T67">Â </span><span class="T68">Setting indicating if the from field of the SMIME should be altered.</span><span class="T61"> </span>(Optional, default is true)</p><p class="P85">Â </p><p class="P82"><span class="T63">SIGNATUREALG Â = </span><span class="T68">Setting configuring the signature algorithm that should be used in the SMIME message.</span><span class="T62"> </span><span class="T67">(Optional, default is </span>DIGEST_SHA1<span class="T67">)</span></p><p class="P84">Â </p><p class="P82"><span class="T63">POSTMASTERSIGNS = </span><span class="T67">Â </span><span class="T68">Indicates if postmaster mail should be signed.</span><span class="T60"> </span><span class="T67">(Optional, default is false)</span></p><p class="P85">Â </p><p class="P82"><span class="T64">FROMADDRESS</span><span class="T27"> = </span><span class="T68">The from email address used if rebuild from is set. </span><span class="T68">(Required if USEREBUILDFROM is true)</span></p><p class="P83">Â </p><p class="P82"><span class="T63">FROMNAME = </span><span class="T68">Readable name used in from address field. (Optional)</span></p><p class="P85"/><p class="P82"><span class="T63">CHANGEREPLYTO = </span><span class="T68">Indicates if the reply-to field should be altered to </span><span class="T68">the original sender. (Optional, default is false)</span></p><p class="P86">Â </p><p class="P82"><span class="T63">REPLYTOADDRESS = </span><span class="T68">The reply to email address if the reply always should be changed to</span></p><p class="P83">a default address. (Required if CHANGEREPLYTO is true)</p><p class="P84">Â </p><p class="P82"><span class="T63">REPLYTONAME = </span><span class="T68">Readable name used in reply-to address field. (Optional)</span></p><p class="P86">Â </p><p class="P82"><span class="T63">SIGNERADDRESS = </span><span class="T68">The email address that should be in the sender field. (Required)</span></p><p class="P87">Â </p><p class="P82"><span class="T64">SIGNERNAME = </span><span class="T68">Readable name used in sender address field. (Optional)</span></p><p class="P88">Â </p><p class="P82"><span class="T64">REQUIRESMTPAUTH = </span><span class="T68">Setting defining if SMTP AUTH should be required to</span></p><p class="P83">sign the mail. (Default is true).</p><p class="P59">Â </p><h1 class="Heading_20_1"><a name="8__Available_CryptoTokens"><span style="min-width:0.762cm;">8 </span></a>Â Available CryptoTokens</h1><p class="Text_20_body">There exists four types of crypto tokens (Formerly known as sign tokens), two for storing the keys in software, one general for communicating with cryptographic hardware through the PKCS11 interface and one for SmartCards. See the developer section for information about developing support for other HSMs.</p><h2 class="Heading_20_2"><a name="8_1_P12CryptoToken"><span style="min-width:1.016cm;">8.1</span></a>Â P12CryptoToken</h2><p class="Standard">The P12CryptoToken signer have the class path: org.signserver.server.cryptotokens.P12CryptoToken</p><h3 class="Heading_20_3"><a name="8_1_1_Overview"><span style="min-width:1.27cm;">8.1.1</span></a>Â Overview</h3><p class="Standard">A CryptoToken using a PKCS 12 key-store in the file-system. Can only contain one signing key.</p><p class="Standard">Â </p><p class="Standard">In a clustered environment must the key store be at the same location at all nodes.</p><p class="Standard">Â </p><p class="Standard">The P12CryptoToken, doesn't support the destroyKey() method</p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="8_1_2_Available_Properties"><span style="min-width:1.27cm;">8.1.2</span></a>Â  Available Properties</h3><p class="Standard">Â </p><p class="P75">Â <span class="T7">KEYSTOREPATH</span> : The full path to the key-store to load. (required)</p><p class="P75">Â </p><p class="P75"><span class="T7">KEYSTOREPASSWORD</span> : The password that locks the key-store. Used for automatic activation.</p><p class="P75">Â </p><h2 class="Heading_20_2"><a name="8_2_PrimeCardHSMCryptoToken"><span style="min-width:1.016cm;">8.2</span></a>Â PrimeCardHSMCryptoToken</h2><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="8_2_1_Overview"><span style="min-width:1.27cm;">8.2.1</span></a>Â Overview</h3><p class="Standard">Â </p><p class="Standard">Using PrimeCardHSM it's possible to use a SmartCard to generate 2048-bit RSA signatures. The SmartCard can perform about one signature a second. PrimeCardHSM is proprietary software by PrimeKey Solutions AB.</p><p class="Standard">Â </p><p class="Standard">PrimeCardHSM requires PCSCD software and SmartCard drivers. See separate documentation about installing PrimeCardHSM.</p><p class="Standard">Â </p><p class="Standard">The PrimeCardHSMCryptoToken, doesn't support the destroyKey() method.</p><p class="Standard">Â </p><p class="Standard">The PrimeCardHSMCryptoToken signer have the class path: org.signserver.server.cryptotokens.PrimeCardHSMCryptoToken</p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="8_2_2_Available_Properties"><span style="min-width:1.27cm;">8.2.2</span></a>Â Available Properties</h3><p class="P79">DEFAULTKEY = Â <span class="T14">Â Hash value of the signing key on the card. See PrimeCardHSM documentation for more information.(Required)</span></p><p class="P80">Â </p><p class="P79">AUTHCODE = <span class="T14">Authentication code for automatic activation (Optional).</span></p><p class="P80">Â </p><h2 class="Heading_20_2"><a name="8_3_PKCS11CryptoToken"><span style="min-width:1.016cm;">8.3</span></a>Â PKCS11CryptoToken</h2><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="8_3_1_Overview"><span style="min-width:1.27cm;">8.3.1</span></a>Â Overview</h3><p class="Standard">Using PKCS11 it's possible to use a HSM that has a PKCS11 module, such as Utimaco, nCipher or Eracom.</p><p class="Standard">Â </p><p class="Standard">The PKCS11CryptoToken have the class path: org.signserver.server.cryptotokens.PKCS11CryptoToken</p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="8_3_2_Available_Properties"><span style="min-width:1.27cm;">8.3.2</span></a>Â Available Properties</h3><p class="P79">DEFAULTKEY = Â <span class="T14">Â Hash value of the signing key on the card. (Required)</span></p><p class="P80">Â </p><p class="P79">PIN = Â <span class="T14">Â Authentication code for activation. (Required)</span></p><p class="P80">Â </p><p class="P79">SHAREDLIBRARY = Â <span class="T14">Â Full path to the library containing the PKCS11 interface. (Required)</span></p><p class="P80">Â </p><p class="P79">SLOT = Â <span class="T14">Â Slot to use (Required)</span></p><p class="P80">Â </p><h3 class="P156"><a name="8_3_3_Example_usage"><span style="min-width:1.27cm;">8.3.3</span></a>Â Example usage</h3><p class="Standard">Edit qs_pdfsigner_configuration.properties and choose the sign token setting for the PKCS11 sign token. Run the following command to set up a PDF signer using the PKCS11 properties configured:</p><p class="P30">bin/signserver.sh setproperties qs_pdfsigner_configuration.properties</p><p class="P95">Â </p><p class="P36">You also need a certificate for the signer. Generate a certificate request with the command:</p><p class="P31">bin/signserver.sh generatecertreq 8 "CN=PKCS11 Signer token" SHA1WithRSA /tmp/certreq.pem</p><p class="P36">Â </p><p class="P36">Add a user in EJBCA with a certificate profile suitable for signing, and enrol for a âServer Certificateâ using the public web pages. </p><p class="P36">Â </p><p class="P36">Create the certificate chain file with the command:</p><p class="P32">cat /tmp/cert.pem /tmp/AdminCA1.pem &gt; /tmp/certchain.pem</p><p class="P32">Â </p><p class="P32">The signer certificate must be first, and the root CA certificate last.</p><p class="P32">Â </p><p class="P36">Upload the signing certificate chain to the signer using the command:</p><p class="P32">bin/signserver.sh uploadsignercertificatechain 8 GLOB /tmp/certchain.pem</p><p class="P32">Â </p><p class="P32">After the certificate chain has been uploaded to the server, the configuration must be reloaded and the server must be restarted. It is not sufficient to only reload the configuration.</p><p class="P32">Â </p><h2 class="Heading_20_2"><a name="8_4_SoftCryptoToken"><span style="min-width:1.016cm;">8.4</span></a>Â SoftCryptoToken</h2><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="8_4_1_Overview"><span style="min-width:1.27cm;">8.4.1</span></a>Â Overview</h3><p class="Standard">The SoftCryptoToken is a simple token managing it's own soft keys instead through a pkcs12. It can be used for test and demonstration purposes. The keys are stored in the worker's properties and is generated when genCertificateRequest is called. One key is used for all purposes and a new key is generated for every certificate request.</p><p class="Standard">Â </p><p class="Standard">The method destroyKey is not supported. </p><p class="P48">Â </p><p class="Standard">Â </p><p class="Standard">The SoftCryptoToken have the class path: org.signserver.server.cryptotokens.SoftCryptoToken</p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="8_4_2_Available_Properties"><span style="min-width:1.27cm;">8.4.2</span></a>Â Available Properties</h3><p class="P79">KEYDATA = Â <span class="T14">Â The serialized KeyPair generated by genCertificateRequest, usually is this setting configured by the SoftCryptoToken itself.</span></p><p class="P80">Â </p><p class="P79"><span class="T7">KEYALG</span><span class="T14"> = The algorithm used when generating new keys. (Optional, default is âRSAâ)</span></p><p class="P80">Â </p><p class="P79">KEYSPEC = Â <span class="T14">Â The key specification used when generating new keys. (Optional, default is â2048â)</span></p><p class="P80">Â </p><p class="P80">Â </p><h3 class="P156"><a name="8_4_3_Example_usage"><span style="min-width:1.27cm;">8.4.3</span></a>Â Example usage</h3><p class="Standard"><span class="T14">First change the global property of </span><span class="T55">WORKER&lt;ID&gt;</span><span class="T24">.CRYPTOTOKEN.CLASSPATH </span><span class="T30">of the worker you want to use the SoftCryptoToken with. After reload will an empty and inactive SoftCryptoToken be created.</span></p><p class="P95">Â </p><p class="P36">Then generate a certificate request with the command, in this step will new keys be generated</p><p class="P31">bin/signserver.sh generatecertreq &lt;id&gt; "CN=Soft Signer token" SHA1WithRSA /tmp/certreq.pem</p><p class="P36">Â </p><p class="P36"><span class="T13">Then u</span>pload the signing certificate Â to the worker using the command:</p><p class="P32">bin/signserver.sh uploadsignercertificatechain &lt;id&gt; GLOB /tmp/cert.pem</p><p class="P32">Â </p><p class="P32">After the certificate chain has been uploaded to the server, the configuration must be reloaded and the SoftCryptoToken will be active and ready to use.</p><h1 class="P152"><a name="9__Setting_Authorization_Type"><span style="min-width:0.762cm;">9 </span></a>Â Setting Authorization Type</h1><h2 class="Heading_20_2"><a name="9_1_SignServer"><span style="min-width:1.016cm;">9.1</span></a>Â SignServer</h2><p class="Standard">Â </p><p class="Text_20_body">By default is client-certificate authentication required for a signature request to be processed. This can be changed with the <span class="T7">AUTHTYPE</span><span class="T14"> property. </span></p><p class="P51">Â </p><p class="P81"><span class="T65">AUTHTYPE</span> = Â NOAUTH, sets the server to not require any authentication.</p><p class="P76">Â </p><p class="P81"><span class="T65">AUTHTYPE = Â </span>CLIENTCERT (default) requires a certificate of all the clients. The certificates must be in the signers access control list and be trusted by the Java distribution, i.e imported in JAVA_HOME/jre/lib/security/cacerts. Authorized clients is configured manually using the CLI interface.</p><p class="P76">Â </p><p class="P109"><span class="T14">This authorization functionality doesn't work for all use cases. Then it's possible to create a customized authorizer and specify it's class path as value in the AUTHTYPE property. The Processable will then automatically instantiate and use it. </span>How to develop such a plug-in is explained in the developers section. </p><p class="P109">Â </p><h2 class="Heading_20_2"><a name="9_2_MailSigner"><span style="min-width:1.016cm;">9.2</span></a>Â MailSigner</h2><p class="Standard">Â </p><p class="Standard">The MailSigner support SMTP Authentication which is configured in the build properties. It's then possible to authorize users by adding them manually through the CLI interface. SMTP authorization is global for all MailProcessors.</p><h1 class="Heading_20_1"><a name="10__Disabling_a_Worker"><span style="min-width:0.762cm;">10 </span></a>Â Disabling a Worker</h1><p class="Text_20_body">Any Processable worker in the SignServer and MailSigner can be disabled, which means that it won't be executed or be included in the health check. </p><p class="Text_20_body">Â </p><p class="Text_20_body">To disable a worker set the property âDISABLEDâ to âTRUEâ</p><p class="Text_20_body">Â </p><h1 class="Heading_20_1"><a name="11__Archiving_Responses__SignServer_only_"><span style="min-width:0.762cm;">11 </span></a>Â Archiving Responses <span class="T6">(SignServer only)</span></h1><p class="Text_20_body">If there is a need to save all generated responses, then set the property âARCHIVEâ to âTRUEâ and all generated responses for that signer will be saved to database.</p><p class="Text_20_body">Â </p><p class="Text_20_body">The archived responses can later be extracted from data base using the CLI interface. See the CLI section for more information.</p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><h1 class="Heading_20_1"><a name="12__The_Global_Configuration_Store"><span style="min-width:0.762cm;">12 </span></a>Â The Global Configuration Store</h1><p class="Text_20_body">The available workers and its crypto tokens and services is configured in something called the global configuration store that is slightly different from a worker configuration.</p><p class="Text_20_body">Â </p><p class="Text_20_body">Is is dynamically configured and activated immediately. I can contain any type of data (in string representation) and can be of two types, either with global scope or node scope. A Global scoped property can be accessed by Â all nodes in the cluster while a Node scoped property in only used within a node and cannot be accessed by the other nodes.</p><h2 class="Heading_20_2"><a name="12_1_SignServer_specific"><span style="min-width:1.016cm;">12.1</span></a>Â SignServer specific</h2><p class="Text_20_body">Â </p><p class="Text_20_body">Database failure is handled differently. If a node looses connection to the database it put itself in a state called 'unsynchronised' and will continue its operation without storing the data to database by using a cached global configuration. It is possible to later resynchronise one nodes cached global configuration data Â with the database with a CLI command called 'resync'. But it is only possible to sync one of the nodes global configuration to the database.</p><h2 class="Heading_20_2"><a name="12_2_MailSigner_Specific"><span style="min-width:1.016cm;">12.2</span></a>Â MailSigner Specific</h2><p class="Standard">Â </p><p class="Standard">The MailSigner doesn't store its data in database but in a regular file handled internally. It have therefore no functionality for database fail-over and cannot be resynchronized. There currently aren't any difference in global and node scoped variables.</p><h1 class="P152"><a name="13__Timed_Services"><span style="min-width:0.762cm;">13 </span></a>Â Timed Services</h1><p class="Table_20_Contents">A Timed Service (formerly called just service) is a task that is run on a timely basis, performing maintenance tasks like changing active key, or it could generate a report.</p><p class="Table_20_Contents">Â </p><p class="Table_20_Contents">Currently isn't the SignServer shipped with any services out of the box, but read the developer section about how to write custom services. The MailSigner although have a timed service that checks if a Mail Processor have an expiring certificate and sends e-mail notifications about this to the administrators.</p><p class="Table_20_Contents">Â </p><p class="Table_20_Contents">A Timed Service framework supports a couple basic properties that is used to calculate when and how a timed service should run. These properties are:</p><p class="Table_20_Contents">Â </p><p class="P81"><span class="T65">ACTIVE</span> = Â âTRUEâ if the service should be run, otherwise it is disabled.</p><p class="P81">Â </p><p class="P81"><span class="T65">SINGLETON</span> = Â âTRUEâ if the service only should be run on one of the nodes in the cluster at the time. If it's not set or set to FALSE is the service run simultaneously on all nodes in the cluster. If the node running a singleton service fails will another node sense this and start up the service. (Not used for the MailSigner)</p><p class="P81">Â </p><p class="P81"><span class="T65">INTERVAL</span> = Â <span class="T66">Property that should define the interval i seconds the service should run.</span></p><p class="P81">Â </p><p class="P81"><span class="T65">CRON</span>= <span class="T66">Property that should define a CRON expression of how often the service should run. Â It should conform to Unix CRON standard. (One of INTERVAL or CRON is required)</span></p><p class="Table_20_Contents">Â </p><h2 class="Heading_20_2"><a name="13_1_CertificateExpireTimedService__MailSigner_only_"><span style="min-width:1.016cm;">13.1</span></a>Â CertificateExpireTimedService (MailSigner only)</h2><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="13_1_1_Overview"><span style="min-width:1.27cm;">13.1.1</span></a>Â Overview</h3><p class="Standard">The CertificateExpireTimedService Â is a timed service specific for the MailSigner. It checks all available mail processors if they have a certificate about to expire. In that case a notification about this is sent to the administrators. By default is this done 30 days before expiration. If the Mail Processor isn't updated a reminder message is sent.</p><p class="Standard">Â </p><p class="Standard">The CertificateExpireTimedService have the class path: org.signserver.mailsigner.module.common. CertificateExpireTimedService and is compiled into a the dist-server/mailsigner-module-common.jar that can be included in MAR files that needs the service.</p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="13_1_2_Available_Properties"><span style="min-width:1.27cm;">13.1.2</span></a>Â Available Properties</h3><p class="P101"><span style="margin-left:;"/></p><p class="P101"><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/></p><p class="P79">EXPIRETIMEDAYS = Â <span class="T14">Â Number of remaining days of the certificate before a notification is sent.(Optional, default 30 days).</span></p><p class="P80">Â </p><p class="P79"><span class="T7">REMINDERTIMEDAYS</span><span class="T14"> = Number of remaining days of the certificate before a reminder notification is sent.(Optional, default 10 days).</span></p><p class="P80">Â </p><p class="P79"><span class="T7">ADMINEMAIL</span><span class="T14"> = The email address of were the notifications is sent. (Optional, default is the configured postmaster address.)</span></p><p class="P80">Â </p><p class="P79">FROMEMAIL = Â <span class="T14">Â The from email used in the notifications is sent. Â (Optional, default is certexpire@&lt;postmaster-domain&gt;)</span></p><p class="P80">Â </p><p class="P79">MESSAGESUBJECT Â = Â <span class="T14">Â The subject used in the first notification message. Â (Optional, default is </span><span class="T28">"WARNING: Mail Processor with id : ${WORKERID} is about to expire."</span><span class="T14">)</span></p><p class="P80">Â </p><p class="P79">REMINDERSUBJECT Â = Â <span class="T14">Â The subject used in the reminder notification message. Â (Optional, default is </span><span class="T28">"REMINDER: Mail Processor with id : ${WORKERID} is about to expire."</span><span class="T14">)</span></p><p class="P80">Â </p><p class="P79">EXPIREMESSAGE Â = Â <span class="T14">Â The message body in the notifications is sent. Â (Optional, default is </span><span class="T28">"A mail processor at host ${HOSTNAME} have a certificate about to expire.${NL}${NL}The Mail Processor have id ${WORKERID} and a certificate with DN '${cert.CERTSUBJECTDN}' and will expire the ${cert.EXPIREDATE}. ${NL}"</span><span class="T14">)</span></p><p class="P80">Â </p><p class="P79">REMINDERMESSAGE = Â <span class="T14">Â The message body in the remainder notifications is sent. Â (Optional, default is </span><span class="T28">"This is a reminder that a mail processor at host ${HOSTNAME} have a certificate about to expire.${NL}${NL}The Mail Processor have id ${WORKERID} and a certificate with DN '${cert.CERTSUBJECTDN}' and will expire the ${cert.EXPIREDATE}. ${NL}"</span><span class="T14">)</span></p><p class="P80">Â </p><h3 class="Heading_20_3"><a name="13_1_3_Available_Substitution_Variables"><span style="min-width:1.27cm;">13.1.3</span></a>Â Available Substitution Variables</h3><p class="P80">The following substitution variables can be used in notification subject and message bodys.</p><p class="P80">Â </p><p class="P79"><span class="T7">${NL}</span><span class="T14"> Â = New line</span></p><p class="P79"><span class="T7">${DATE}</span><span class="T14"> Â = The current date</span></p><p class="P79"><span class="T7">${HOSTNAME}</span><span class="T14"> Â = Name of the host running the application.</span></p><p class="P79"><span class="T7">${WORKERID}</span><span class="T14"> Â = Id of the worker.</span></p><p class="P79"><span class="T7">${WORKERNAME}</span><span class="T14"> Â = Name of the worker.</span></p><p class="P79"><span class="T7">${cert.CERTSERIAL}</span><span class="T14"> Â = The serial number of the certificate about to expire.</span></p><p class="P79"><span class="T7">${cert.EXPIREDATE}</span><span class="T14"> Â = The certificates expiration date.</span></p><p class="P79"><span class="T7">${cert.CERTSUBJECTDN}</span><span class="T14"> Â = The certificate subject DN.</span></p><p class="P79"><span class="T7">${cert.CERTISSUERDN}</span><span class="T14"> Â = The certificate issuer DN.</span></p><p class="P80">Â </p><p class="P89">Â </p><h1 class="Heading_20_1"><a name="14__The_Main_WebService_Interface"><span style="min-width:0.762cm;">14 </span></a>Â The Main WebService Interface</h1><h2 class="Heading_20_2"><a name="14_1_Overview"><span style="min-width:1.016cm;">14.1</span></a>Â Overview</h2><p class="Text_20_body">Â </p><p class="Text_20_body">New to version 3.0 is the Main WebService interface. It replaces the RMI-SSL interface in version 1.0 and 2.0 for two reasons, the RMI-SSL were based on a commercial library and it only worked for Java clients.</p><p class="Text_20_body">Â </p><p class="Text_20_body">The WebService interface have two calls, the main one is 'process' which takes a collection of process request to a processable worker and returns a collection of process responses, the second one is getStatus that performs a health check of the node and returns an OK message if the node is healthy.</p><p class="Text_20_body">Â </p><p class="Text_20_body">The WebService stack used is the JAX-WS stack from SUN. And the actual process data is a externalized Base64 byte-arrays. The reason why the are externalized is to simply the integration towards non-Java platforms. See the source of the actual request to see how the data is structured.</p><p class="Text_20_body">Â </p><p class="Text_20_body">The getStatus call can be used to implement high-availability towards the client. The Java client API described in the next section have built in support for different high availability policies.</p><p class="Text_20_body">Â </p><p class="Standard">The WebService WSDL file is located at the URL <a href="http://localhost:8080/signserver/validationws/validationws?wsdl"><span class="T26">http://&lt;hostname&gt;:8080/signserver/</span></a><a href="http://localhost:8080/signserver/validationws/validationws?wsdl"><span class="T26">signserverws/signserverws</span></a><a href="http://localhost:8080/signserver/validationws/validationws?wsdl"><span class="T26">?wsdl</span></a></p><p class="Text_20_body">Â </p><p class="Text_20_body">It's possible to turn off the WebService interface by disabling it in the build configuration.</p><p class="Text_20_body">Â </p><p class="Standard"><span class="T6">Important</span>, Due to class path conflict in JBoss 4.2.x own JBoss WebService stack and the JAX-WS stack used by the SignServer must the JBoss WebService stack be removed before the WebService is used. This is done by going to JBOSS_HOME/server/default/deploy and remove the directory jbossws.sar.</p><p class="Standard">Â </p><h2 class="Heading_20_2"><a name="14_2_Java_Client_API"><span style="min-width:1.016cm;">14.2</span></a>Â Java Client API</h2><p class="Standard">Â </p><p class="Standard">Built along with the WebService is a Java API that can be used by clients. It's located in dist-client/signserverwscli and the file signserverws.jar and all the files in the lib directory is required to use the API. The client API have support for different high availability policies to avoid the need for load balance hardware.</p><p class="Standard">Â </p><p class="Standard">The client classes is in the package org.signserver.protocol.ws.client and the main code are SignServerWSClientFactory creating a client using the specified load balance policy, it returns a </p><p class="Standard">ISignServerWSClient that is used to perform the actual process requests.</p><p class="Standard">Â </p><p class="Standard">Â </p><p class="Standard">Â </p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="14_2_1_Load_Balance_Policies"><span style="min-width:1.27cm;">14.2.1</span></a>Â Load Balance Policies</h3><p class="Standard">Â </p><p class="P118">With version 3.0 is one load balance policy defined and it's called <span class="T18">'</span><span class="T24">CallFirstNodeWithStatusOK' </span><span class="T66">it calls the getStatus method on all the server nodes in the cluster simultaneously and the first node to respond OK it sends its process request to. This to ensure that only one node in the cluster actually performs the signing.</span></p><p class="P121">Â </p><p class="P121">Other future load balance policies could be round robin or that all nodes are called with the requests simultaneously and the first response is used.</p><p class="Text_20_body">Â </p><h3 class="Heading_20_3"><a name="14_2_2_CLI_Client_"><span style="min-width:1.27cm;">14.2.2</span></a>Â CLI Client </h3><p class="Text_20_body">Along with the Java Client API is also a CLI utility provided, used mainly for testing but could in some cases be used for scripting as well. Its located in the dist-client/signserverwscli and all the files in the directory and 'lib' subdirectory is required. First edit the file wsclient.properties, there it's possible to define connection properties such as hosts, ports, SSL usage, load balance policy and so on. It is also possible to define the classes used for request generation, what type of request that should be generated and how the response should be analysed. Default is just dummy requests sent to the DummySigner used Â to test WebService connectivity.</p><p class="Text_20_body">Â </p><p class="Text_20_body">Below is the syntax of the CLI command and can be used to perform continuous requests with a specified rate with a multiple number of concurrent requesting threads. This can be used to test performance of an implemented worker and for stress testing.</p><p class="Text_20_body">Â </p><p class="P55">Â  Usage:</p><p class="P55">Â  wsclient &lt;signer Id or Name&gt; &lt;number of requests&gt; &lt;milliseconds between reques</p><p class="P55">t&gt; &lt;number of threads&gt; &lt;random wait&gt;</p><p class="P55">Â  Where:</p><p class="P55">Â  Â  Signer id or name to send requests to, (required parameter)</p><p class="P55">Â  Â  Number of requests is for each thread (default is '1'), use 'c' or 'continuo</p><p class="P55">us' for infinite number of requests.</p><p class="P55">Â  Â  Minimum milliseconds between requests is the least time the client waits bef</p><p class="P55">ore issuing the next (default is '1000').</p><p class="P55">Â  Â  Number of threads that will send concurrent requests (default is '1').</p><p class="P55">Â  Â  Random wait in milliseconds, used for more random test behaviour and is adde</p><p class="P55">d to the fixed wait time (default is '0').</p><p class="P55">Â </p><p class="P55">Â  The client requires a configuration file 'wsclient.properties' to exist in the</p><p class="P55">Â same directory as the wscli, see the configuration file for more details.</p><p class="P55">Â </p><h1 class="P152"><a name="15__The_Cluster_Class_Loader"><span style="min-width:0.762cm;">15 </span></a>The Cluster Class Loader</h1><p class="P30">Important, this feature is very new in version 3.1 and should still be considered experimental.</p><p class="Standard">Â </p><p class="Standard">New to SignServer 3.1.x is the Cluster Class Loader. Â Simplifying the management of code in clusters. Instead of manually having to synchronize all the required JAR files to all nodes, it is possible to upload the code once and it will be accessible to all nodes in the cluster directly without having to restart the cluster. This is archived by storing the JAR resource data (such as class files) in database instead of in the application server class path.</p><p class="Standard">Â </p><p class="Standard">Each worker will have their own Cluster Class Loader instance that will be reinitialized upon reload.</p><p class="Standard">Â </p><p class="Standard">It is also possible to run multiple code versions of a worker simultaneously in a cluster, something that haven't been possible until now since only one version of class can exists in one JVM. This is a great feature for migration purposes where you have an old worker that is known to be stable, then it is possible to upload a new module beside the old one, with newer code, and migrate calling clients one by one. Â Under the hood is actually a version prefix appended on the fly to the class name by the Cluster Class Loader when converting the byte code into a class. For example a class called somepkg.SomeWorker with version 3 will be called v3.somepkg.SomeWorker internally in the JVM. A developer should have to thing about this when developing his module but it might cause problems when remotely debugging the SignServer since the IDE won't find the source class to the modified code. If remote debugging is going to be used should class versioning be turned off. </p><p class="Standard">Â </p><p class="Standard">To improve the security of the code stored in database it is possible to enforce signature verification of all the uploaded code. This is a good feature if the database is in a different security zone or managed by different administrator than the SignServer nodes itself. If verification is turned on will the Cluster Class Loader check that the class is signed with a certificate issued by issuers stored in a specific trust key store for this purpose. <span class="T6">Important, make sure the v the code signing certificate and it's issuers have a validity long enough to avoid production stop since the signature will not verify after the certificate have expired. </span><span class="T13">The code is signed by a separate JKS key store when the module is uploaded to a cluster. The code signing certificate must have the extended key usage 'code signing' in order for the Cluster Class Loader to verify it.</span></p><p class="P33">Â </p><p class="P33">Before code can be uploaded to the Cluster Class Loader must it's JAR files be packaged in something called a Module Archive (MAR). See section 15.2 for details about generating a MAR file.</p><p class="P30">Â </p><p class="P65">Â </p><h2 class="Heading_20_2"><a name="15_1_How_to_configure_your_worker_to_use_the_Cluster_Class_Loader"><span style="min-width:1.016cm;">15.1</span></a>Â How to configure your worker to use the Cluster Class Loader</h2><p class="P30">Â </p><p class="P33">To enable the use of the Cluster Class Loader in a worker must the module name (and optionally version) be specified in the worker properties. If the version isn't specified will the latest be used.</p><p class="P33">Â </p><p class="P33"><span class="T6">Note:</span> These two settings is set automatically if the workers is configured using property files included in a MAR file.</p><p class="P33">Â </p><p class="P29">Cluster Class Loader Related Properties</p><table border="0" cellspacing="0" cellpadding="0" class="Tabell6"><colgroup><col width="371"/><col width="371"/></colgroup><tr><td style="text-align:left;width:3.3458in; " class="Tabell6_A1"><p class="P71">Property</p></td><td style="text-align:left;width:3.3465in; " class="Tabell6_B1"><p class="P71">Description</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Tabell6_A2"><p class="Standard">MODULENAME</p></td><td style="text-align:left;width:3.3465in; " class="Tabell6_B2"><p class="P102">Which module that should be used by</p><p class="P96"><span class="T30">the cluster class loader.</span><span class="T18"> </span>(Required if the Cluster Class Loader should be used)</p></td></tr><tr class="Tabell63"><td style="text-align:left;width:3.3458in; " class="Tabell6_A2"><p class="P10">MODULEVERSION</p></td><td style="text-align:left;width:3.3465in; " class="Tabell6_B2"><p class="P96"><span class="T30">Indicating which module version that should be used by the cluster class loader for the given worker. If no module version is specified will the latest available version be used.</span> (Optional)</p></td></tr></table><p class="P29">Â </p><p class="P30">Â </p><h2 class="P150"><a name="15_2_Building_Module_Archives"><span style="min-width:1.016cm;">15.2</span></a>Â Building Module Archives</h2><p class="P30">Â </p><p class="P33">A 'Module Archive' is a package containing all the jars required by the module along with a descriptor with information about the name of the module and it's version. A module archive is uploaded once and is then accessible for all the nodes in the cluster. A module archive can also have multiple parts indicating where in the system the code should be uploaded. In 3.1.x is only one part called 'server' supported, but in the future will other parts such as 'admin' exist. In that case will the code that should be executed on the server, such as worker code, be sent to the cluster, while the administrative part of the code is only sent to the node with an administrative web interface.</p><p class="P33">Â </p><p class="P33">A 'Module Archive' have the postfix '.mar' and is managed with the CLI interface using the 'module' commands.</p><p class="P30">Â </p><h3 class="Heading_20_3"><a name="15_2_1_The_MAR_Descriptor_"><span style="min-width:1.27cm;">15.2.1</span></a>Â The MAR Descriptor </h3><p class="Standard">Â </p><p class="Standard">Every Module archive should have a descriptor file in it's META-INF directory. It follows the JAVA Properties notation and is used to specify general information about the module such as version and name of the module. This file is generated automatically when using the ANT tasks.</p><p class="Standard">Â </p><p class="Standard">Â </p><p class="P59">The MAR descriptor supports the following properties:</p><p class="Standard">Â </p><p class="P29">MAR descriptor Properties</p><table border="0" cellspacing="0" cellpadding="0" class="Tabell4"><colgroup><col width="371"/><col width="371"/></colgroup><tr><td style="text-align:left;width:3.3458in; " class="Tabell4_A1"><p class="P71">Property</p></td><td style="text-align:left;width:3.3465in; " class="Tabell4_B1"><p class="P71">Description</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Tabell4_A2"><p class="Table_20_Contents">version</p></td><td style="text-align:left;width:3.3465in; " class="Tabell4_B2"><p class="Table_20_Contents">The version of the module archive, can only contain digits. If not set will â1â be used. (Optional)</p></td></tr><tr class="Tabell43"><td style="text-align:left;width:3.3458in; " class="Tabell4_A2"><p class="Table_20_Contents">modulename</p></td><td style="text-align:left;width:3.3465in; " class="Tabell4_B2"><p class="Table_20_Contents">The name of the module, if not set will the MAR file name be used, but Â without '.mar'. The name will always be converted to upper case. (Optional)</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Tabell4_A2"><p class="Standard">default-description</p></td><td style="text-align:left;width:3.3465in; " class="Tabell4_B2"><p class="Table_20_Contents">The default description of all the resources in the module (Optional)</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Tabell4_A2"><p class="Table_20_Contents">parts</p></td><td style="text-align:left;width:3.3465in; " class="Tabell4_B2"><p class="Table_20_Contents">The parts in the module archive, if not set will only the 'server' part be used. (Optional)</p></td></tr></table><p class="P29">Â </p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="15_2_2_Including_Worker_Configurations"><span style="min-width:1.27cm;">15.2.2</span></a>Â Including Worker Configurations</h3><p class="Standard">Â </p><p class="Standard">It is also possible to include a set of worker configurations in the 'server' part of the module archive, these settings is configured directly after all the JAR files have been uploaded. These worker configurations should be property files that follows the same notation as if they where used with the 'setproperties' CLI command.</p><p class="Standard">Â </p><p class="Standard">By default it should be named 'part-config.properties' and be in the 'server' part directory. It is also possible to have multiple configurations that is used depending on the environment the SignServer cluster is used. For instance it is possible to have one configuration file for test, another for production and a third for development. This makes it easy to manage the module since exactly the same file will be used in all environments. In case of multiple configurations should every property file be named '&lt;environment&gt;-part-config.properties', for instance test-part-config.properties. Later when the module is uploaded and the environment 'test' is specified will the test configuration be used.</p><p class="Standard">Â </p><p class="Standard"><span class="T6">Important</span>, if a part-config.properties file is included in the MAR file will the worker properties MODULENAME and MODULEVERION automatically the be set to all workers defined in the Â configuration file and there is no need to manually define these settings.</p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="15_2_3_Using_ANT"><span style="min-width:1.27cm;">15.2.3</span></a>Â Using ANT</h3><p class="Standard">Â </p><p class="Standard">The simplest way to build a Module Archive is by using ANT. The SignServer have provided two ant tasks to do this. </p><p class="Standard">Â </p><p class="P59">Â </p><p class="Standard">All that is required to use these tasks is to add the following two lines in your target:</p><p class="P124">Â </p><p class="P99"><span class="T18">Â  Â  </span><span class="T78">&lt;taskdef</span><span class="T18"> </span><span class="T78">name=</span><span class="T81">"mar"</span><span class="T18"> </span><span class="T78">classname=</span><span class="T81">"org.signserver.anttasks.MarAntTask"</span><span class="T18"> Â  Â </span></p><p class="P99"><span class="T18">Â  Â  Â  Â </span><span class="T78">classpathref=</span><span class="T81">"signserver.test.compile.classpath"</span><span class="T78">/&gt;</span></p><p class="P104"><span class="T23">Â  Â  </span><span class="T79">&lt;taskdef</span><span class="T23"> </span><span class="T79">name=</span><span class="T82">"part"</span><span class="T23"> </span><span class="T79">classname=</span><span class="T82">"org.signserver.anttasks.PartAntTask"</span></p><p class="P99"><span class="T79">Â  Â  Â  Â classpathref=</span><span class="T82">"signserver.test.compile.classpath"</span><span class="T79">/&gt;</span></p><p class="Horizontal_20_Line">Â </p><p class="Standard">With these two lines included you will have access the the 'mar' and 'part' tasks. The tasks have the following properties.</p><p class="P29">MAR Task Properties</p><table border="0" cellspacing="0" cellpadding="0" class="Tabell2"><colgroup><col width="371"/><col width="371"/></colgroup><tr><td style="text-align:left;width:3.3458in; " class="Tabell2_A1"><p class="P71">Property</p></td><td style="text-align:left;width:3.3465in; " class="Tabell2_B1"><p class="P71">Description</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Tabell2_A2"><p class="Table_20_Contents">version</p></td><td style="text-align:left;width:3.3465in; " class="Tabell2_B2"><p class="Table_20_Contents">The version of the module archive, can only contain digits. If not set will â1â be used. (Optional)</p></td></tr><tr class="Tabell23"><td style="text-align:left;width:3.3458in; " class="Tabell2_A2"><p class="Table_20_Contents">modulename</p></td><td style="text-align:left;width:3.3465in; " class="Tabell2_B2"><p class="Table_20_Contents">The name of the module, if not set will the destfile property be used, but only the file name without '.mar'. Will always be converted to upper case. (Optional)</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Tabell2_A2"><p class="Table_20_Contents">description</p></td><td style="text-align:left;width:3.3465in; " class="Tabell2_B2"><p class="Table_20_Contents">The default description of the module that is set in the MAR descriptor.(Optional)</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Tabell2_A2"><p class="Table_20_Contents">destfile</p></td><td style="text-align:left;width:3.3465in; " class="Tabell2_B2"><p class="Table_20_Contents">The path and file name of the mar file to generate. (Required)</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Tabell2_A2"><p class="Table_20_Contents">verbose</p></td><td style="text-align:left;width:3.3465in; " class="Tabell2_B2"><p class="Table_20_Contents">Set to true if verbose output should be done during execution.(Optional)</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Tabell2_A2"><p class="Table_20_Contents">part</p></td><td style="text-align:left;width:3.3465in; " class="Tabell2_B2"><p class="Table_20_Contents">One or more 'part' tasks is required in order to generate a MAR file. (Required)</p></td></tr></table><p class="P29">Â </p><p class="P29">PART Task Properties</p><table border="0" cellspacing="0" cellpadding="0" class="Tabell3"><colgroup><col width="371"/><col width="371"/></colgroup><tr><td style="text-align:left;width:3.3458in; " class="Tabell3_A1"><p class="P71">Property</p></td><td style="text-align:left;width:3.3465in; " class="Tabell3_B1"><p class="P71">Description</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Tabell3_A2"><p class="Table_20_Contents">name</p></td><td style="text-align:left;width:3.3465in; " class="Tabell3_B2"><p class="Table_20_Contents">The name of the part, if not set will the default 'server' (and the only part supported in 3.1.x) be used. (Optional)</p></td></tr><tr class="Tabell33"><td style="text-align:left;width:3.3458in; " class="Tabell3_A2"><p class="Table_20_Contents">fileset</p></td><td style="text-align:left;width:3.3465in; " class="Tabell3_B2"><p class="Table_20_Contents">One or more 'filesets' are required containing JAR file or worker configurations. (Required)</p></td></tr></table><p class="Standard">Â </p><p class="Standard">Â </p><p class="P59">Here is an example of a simple ANT task building a MAR file, it will have the module name of SOME, version of 3 and have a 'server' part with all the JARs in 'somejarlocation' and all the worker properties in the directory 'someworkerpropertieslocation' :</p><p class="P123">Â </p><p class="P40"><span class="T18">Â  Â  </span><span class="T78">&lt;target</span><span class="T18"> </span><span class="T78">name=</span><span class="T81">"gensomemar" </span><span class="T80">depends=â</span><span class="T83">signserver.earâ</span><span class="T78">&gt;</span></p><p class="P99"><span class="T18">Â  Â  </span><span class="T78">&lt;taskdef</span><span class="T18"> </span><span class="T78">name=</span><span class="T81">"mar"</span><span class="T18"> </span><span class="T78">classname=</span><span class="T81">"org.signserver.anttasks.MarAntTask"</span><span class="T18"> Â  Â </span></p><p class="P99"><span class="T18">Â  Â  Â  Â </span><span class="T78">classpathref=</span><span class="T81">"signserver.test.compile.classpath"</span><span class="T78">/&gt;</span></p><p class="P99"><span class="T18">Â  Â  </span><span class="T78">&lt;taskdef</span><span class="T18"> </span><span class="T78">name=</span><span class="T81">"part"</span><span class="T18"> </span><span class="T78">classname=</span><span class="T81">"org.signserver.anttasks.PartAntTask"</span></p><p class="P99"><span class="T24">Â  Â  Â  Â </span><span class="T78">classpathref=</span><span class="T81">"signserver.test.compile.classpath"</span><span class="T78">/&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/></span><span class="T78">&lt;mar</span><span class="T18"> </span><span class="T78">version=</span><span class="T81">"3"</span><span class="T18"> </span><span class="T78">destfile=</span><span class="T81">"dist/some.mar" </span><span class="T78">verbose=</span><span class="T81">"true" </span><span class="T78">&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/><span style="margin-left:;"/></span><span class="T78">&lt;part&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/> Â  Â  Â  Â  </span><span class="T78">&lt;fileset</span><span class="T18"> </span><span class="T78">dir=</span><span class="T81">"${somelibrarylocation}"</span><span class="T78">&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/> Â  Â  Â  Â  Â  </span><span class="T78">&lt;include</span><span class="T18"> </span><span class="T78">name=</span><span class="T81">"*.jar"</span><span class="T78">/&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/> Â  Â  Â  Â  </span><span class="T78">&lt;/fileset&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/> Â  Â  Â  Â  </span><span class="T78">&lt;fileset</span><span class="T18"> </span><span class="T78">dir=</span><span class="T81">"${somejarlocation}"</span><span class="T78">&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/> Â  Â  Â  Â  Â  </span><span class="T78">&lt;include</span><span class="T18"> </span><span class="T78">name=</span><span class="T81">"*.jar"</span><span class="T78">/&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/> Â  Â  Â  Â  </span><span class="T78">&lt;/fileset&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/> Â  Â  Â  Â  </span><span class="T78">&lt;fileset</span><span class="T18"> </span><span class="T78">dir=</span><span class="T81">"${someworkerproperiteslocation}"</span><span class="T78">&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/> Â  Â  Â  Â  Â  </span><span class="T78">&lt;include</span><span class="T18"> </span><span class="T78">name=</span><span class="T81">"*.properties"</span><span class="T78">/&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/> Â  Â  Â  Â  </span><span class="T78">&lt;/fileset&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/><span style="margin-left:;"/></span><span class="T78">&lt;/part&gt;</span></p><p class="P99"><span class="T18">Â  Â  <span style="margin-left:;"/></span><span class="T78">&lt;/mar&gt;</span></p><p class="P104"><span class="T23">Â  Â  </span><span class="T79">&lt;/target&gt;</span></p><p class="Horizontal_20_Line">Â </p><p class="Standard">Â </p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="15_2_4_Building_Manually"><span style="min-width:1.27cm;">15.2.4</span></a>Â Building Manually</h3><p class="Standard">Â </p><p class="Standard">A Module Archive is just like a JAR or EAR file basically a ZIP with a certain file structure. And it is quite easy to create one manually if the ANT task cannot be used. The following rules should be followed when creating a MAR file:</p><p class="Standard">Â </p><ul><li><p class="P143" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>The module descriptor file should be in META-INF/mar-descriptor.properties. If other than Â just the 'server' part is used, then it is important that the 'parts' property is set correctly.<span class="odfLiEnd"/>Â </p></li><li><p class="P143" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Every part should have a directory with the same name as the part containing all the JAR files and worker configuration files. In 3.1.x is only one part supported and it should be named 'server'. No subdirectories should exists in the parts directory.<span class="odfLiEnd"/>Â </p></li></ul><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="15_2_5_Managing_Module_Archives"><span style="min-width:1.27cm;">15.2.5</span></a>Â Managing Module Archives</h3><p class="Standard">Â </p><p class="Standard">Managing of MAR files is done using the CLI command 'signserver.sh/.cmd module' it have three subcommands: add, remove and list. See chapter 17.2.5 for more details.</p><p class="Standard">Â </p><p class="Standard">Here is an example usage of adding a module to a SignServer:</p><p class="Standard">'<span class="T52">bin/signserver.sh module add dist-server/tsa.mar demo</span>'</p><p class="Standard">Â </p><p class="Standard">This will load the Time-Stamp Authority module with the demo environment, this requires that the mar file have a file called demo-part-config.properties in the server directory.</p><p class="P59">Â </p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="15_2_6_Changing_the_default_configuration_of_the_Cluster_Class_Loader"><span style="min-width:1.27cm;">15.2.6</span></a>Â Changing the default configuration of the Cluster Class Loader</h3><p class="Standard">Â </p><p class="Standard">When enabled, the default configuration of the Cluster Class Loader is to support multiple versions but not requiring signature verification. This behaviour can be changed in the signserver_build.properties file under the 'Cluster Class Loader Configurations' section.</p><p class="Standard">Â </p><p class="Standard">The following properties can be set:</p><p class="P29">SignServer Build Properties</p><table border="0" cellspacing="0" cellpadding="0" class="Tabell5"><colgroup><col width="371"/><col width="371"/></colgroup><tr><td style="text-align:left;width:3.3458in; " class="Tabell5_A1"><p class="P71">Property</p></td><td style="text-align:left;width:3.3465in; " class="Tabell5_B1"><p class="P71">Description</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Tabell5_A2"><p class="P41">useclusterclassloader</p></td><td style="text-align:left;width:3.3465in; " class="Tabell5_B2"><p class="Standard">Set to true to enable the use of the cluster class loader. Default is true.</p></td></tr><tr class="Tabell53"><td style="text-align:left;width:3.3458in; " class="Tabell5_A2"><p class="P41">clusterclassloader.useclassversions</p></td><td style="text-align:left;width:3.3465in; " class="Tabell5_B2"><p class="Table_20_Contents">Indicates if multiple versions of the same worker code should be supported. Default true. Turn this of if remote debugging should be used.</p></td></tr><tr class="Tabell53"><td style="text-align:left;width:3.3458in; " class="Tabell5_A2"><p class="P41">clusterclassloader.requiresignature</p></td><td style="text-align:left;width:3.3465in; " class="Tabell5_B2"><p class="Standard">Set to true if signing of resource data should be required. Default false</p></td></tr><tr class="Tabell53"><td style="text-align:left;width:3.3458in; " class="Tabell5_A2"><p class="P41">clusterclassloader.pathtotruststore</p></td><td style="text-align:left;width:3.3465in; " class="Tabell5_B2"><p class="Standard">Path to the JKS trust store </p><p class="P26">containing all CA certificates that is trusted for signing of resource data.</p><p class="P26">Only required if signature verification is used.</p></td></tr><tr class="Tabell53"><td style="text-align:left;width:3.3458in; " class="Tabell5_A2"><p class="P41">clusterclassloader.truststorepwd</p></td><td style="text-align:left;width:3.3465in; " class="Tabell5_B2"><p class="Standard"><span class="T43">Password to unlock the trust store.</span> <span class="T44">Only required if signature verification is used.</span></p></td></tr></table><p class="Standard">Â </p><p class="Standard">Remember to do an 'ant clean' when changing settings in the signserver_build.properties</p><p class="Standard">Â </p><p class="P59">Â </p><h1 class="Heading_20_1"><a name="16__Building_and_Deploying_the_SignServer_or_MailSigner"><span style="min-width:0.762cm;">16 </span></a>Â Building and Deploying the SignServer or MailSigner</h1><p class="Text_20_body">The building of the SignServer framework is configured by copying the file signserver_build.properties.sample to signserver_build.properties. In this file it's possible to set which database that is going to be used, how the web container should be configured and how many nodes that is in the cluster. After it's configured issue the command 'ant' followed by 'ant deploy' to send it to the application server. Currently is JBoss the only supported application server and it requires the environment variable JBOSS_HOME to be set prior to the deploy command.</p><p class="Text_20_body">Â </p><p class="P11">How to set-up a highly available SignServer cluster is described in a separate document called</p><p class="P13"><span class="T15">SignServer_3_0_Installation_Guide.pdf that can be downloaded from </span><span class="T16">http://www.signserver.org</span></p><p class="P11">The document describes how to set it up in a Cent OS 4.4 environment with two service nodes and</p><p class="P11">one management node, but should be rather easy to adjust to other platforms.</p><p class="P11">Â </p><p class="P11"><span class="T20">Building the MailSigner is very similar to the SignServer. Just set the property 'build.mode' to 'MAILSIGNER' in the top of the build configuration file and set the required settings (such as DNS servers) in the bottom of the file. </span>Then build the MailSigner with the command 'ant'. </p><p class="P11">Â </p><p class="P11">To start up the MailSigner application issue the command 'ant run'. If you want to debug the application in a IDE such as Eclipse issue the command Â 'ant debug'. This can be very helpful when developing MailProcessors. In Eclipse create a 'Remote Java Application' debug configuration and have it to connect to port 8000, then set a break point in your code and it will stop there the next time the MailSigner enters that state.</p><p class="P11">Â </p><p class="P11">Since the MailSigner is built upon the JAMES SMTP server it is possible to configure the SMTP server more than is available in the build configuration file. This is done in the file extapps/james/apps/james/SAR-INF/config.xml, see the JAMES documentation for more information about what is possible and how to do it.</p><p class="P59">Â </p><h1 class="Heading_20_1"><a name="17__Administrating_the_SignServer"><span style="min-width:0.762cm;">17 </span></a>Â Administrating the SignServer</h1><p class="Standard">The SignServer and the MailSigner is administrated using a common CLI interface located in bin/signserver.sh/cmd. Most of the commands work in the same way for both build.</p><p class="Standard">Â </p><p class="Standard">Every worker is identified by a id and optionally a name that can be used in all the CLI commands.</p><p class="Standard">Â </p><p class="Standard">It is possible to do configuration of a worker while it's in production. All configuration commands are cached until a reload command is issued and the configuration becomes active.</p><p class="Standard">Â </p><p class="Standard">There is a special property file for the cli interface called signserver_cli.properties defining which nodes that exists in the cluster. The properties are:</p><p class="Standard">Â </p><p class="P78"><span class="T7">hostname.masternode</span> = Should only contain one of the nodes, specified as the default master node. Used by operations dealing with the database and where not all nodes in the cluster needs to be contacted. It is possible to override this setting in the CLI by using the -host &lt;host name&gt; parameter.</p><p class="Standard">Â </p><p class="P78"><span class="T8">hostname.allnodes</span> = Should contain all the nodes in the cluster, separated by a ';'. Mainly used by the commands getStatus, activateCryptoToken and deactivateCryptoToken.</p><p class="Standard">Â </p><p class="Standard">Its possible to customize the CLI with your own code. How to do this is described in the development section.</p><p class="Standard">Â </p><h2 class="Heading_20_2"><a name="17_1_General_Commands"><span style="min-width:1.016cm;">17.1</span></a>Â General Commands</h2><p class="Standard">These commands applies for all types of workers and works in the same way for both the SignServer and MailSigner.</p><p class="Standard">Â </p><p class="Standard"><span class="T7">Get Status Command</span>:</p><p class="Standard">Returns the status of the given worker, it says if its crypto token is active or not and the loaded 'active' configuration. It is possible to get a brief summary or a complete listing for one worker or all configured workers. If all workers are displayed will also all the global configuration parameters be displayed.</p><p class="Standard">Â </p><p class="Standard"><span class="T7">Get Configuration Command</span>:</p><p class="Standard">Returns the current worker or global configuration depending on options.</p><p class="Standard">Â </p><p class="Standard">For worker configuration observe that this configuration might not have been activated yet, not until a 'reload' command is issued.</p><p class="Standard">Â </p><p class="Standard"><span class="T7">Set Property Command</span>:</p><p class="Standard">Sets a custom property used by the worker or crypto token, see reference for the given Worker and CryptoToken for available properties.</p><p class="Standard">Â </p><p class="P28">Set Properties Command</p><p class="Standard">Command used to batch a set of properties, both for the global and worker configuration.</p><p class="Standard">It can be used to configure a Signer in a test environment, dump all the properties and upload it into production.</p><p class="Standard">Â </p><p class="P52">It reads all the configuration properties form a property file and depending on the contents of the key it sets the given property. All properties will be set Â according to the following defined rule set.</p><table border="0" cellspacing="0" cellpadding="0" class="Table10"><colgroup><col width="371"/><col width="371"/></colgroup><tr><td style="text-align:left;width:3.3458in; " class="Table10_A1"><p class="Table_20_Heading">Rule</p></td><td style="text-align:left;width:3.3465in; " class="Table10_B1"><p class="Table_20_Heading">Comment</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table10_A2"><p class="P69">Properties starting with id&lt;num&gt;.</p></td><td style="text-align:left;width:3.3465in; " class="Table10_B2"><p class="P69">Will set the property to the value of the given id to the worker with the given id.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table10_A2"><p class="P69">Properties starting with name&lt;name&gt;.</p></td><td style="text-align:left;width:3.3465in; " class="Table10_B2"><p class="P69">Will set the property to a worker with the given name. (If the name doesn't exists a unique id will be generated and assigned).</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table10_A2"><p class="P69">Property keys containing GENID&lt;NUM&gt;, example WORKERGENID1 or GLOB. WORKERGENID1 </p></td><td style="text-align:left;width:3.3465in; " class="Table10_B2"><p class="P69">The SignServer will find a free unique id and assign substitute all GENID&lt;num&gt; with this id.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table10_A2"><p class="P69">Properties starting with glob.</p></td><td style="text-align:left;width:3.3465in; " class="Table10_B2"><p class="P69">Will set a global property with global scope.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table10_A2"><p class="P69">Properties starting with node.</p></td><td style="text-align:left;width:3.3465in; " class="Table10_B2"><p class="P69">Will set a global property with node scope.</p></td></tr><tr><td style="text-align:left;width:3.3458in; " class="Table10_A2"><p class="P69">Properties starting with -&lt;other prefix&gt;&lt;value&gt;</p></td><td style="text-align:left;width:3.3465in; " class="Table10_B2"><p class="P69">Will remove the property, either worker or global.</p></td></tr></table><p class="P52">Â </p><p class="P52">See the directory 'sample-configs' for examples.</p><p class="P52">Â </p><p class="P28">Remove Property Command:</p><p class="Standard">Removes a configured property</p><p class="Standard">Â </p><p class="P28">Dump Properties</p><p class="P32">This tool will dump all configured properties for one or all workers in the system into a property file. If the configuration for one worker is dumped it can be used to transfer the configuration from one installation to another. If all configurations is dumped, it can be used as a backup tool.</p><p class="Standard">Â </p><p class="Standard"><span class="T7">Upload Certificate Command</span>:</p><p class="Standard">Used to upload the certificate when the worker only needs the actual signing certificate and not the entire chain.</p><p class="Standard">Â </p><p class="Standard"><span class="T7">Upload Certificate Chain Command</span>:</p><p class="Standard">Used when uploading a complete certificate chain to the worker. Which command that is supposed to be used is depending on the worker and crypto token used.</p><p class="Standard">Â </p><p class="P28">Â </p><p class="P64">Generate Certificate Request Command</p><p class="P11">Used to generate a certificate request for a worker to be signed by a certificate authority. It takes</p><p class="P11">distinguished name and signature algorithm as parameters and writes the request in PEM format to</p><p class="P11">file.</p><p class="Standard">Â </p><p class="Standard"><span class="T7">Activate Cryptographic Token Command</span>:</p><p class="Standard">Used to activate hard crypto tokens. Authentication code is usually the PIN used to unlock the keys Â on the HSM. Not used if the token is set to auto-activation.</p><p class="Standard">Â </p><p class="Standard"><span class="T7">Deactivate Cryptographic Token Command</span>:</p><p class="Standard">Brings a crypto token off-line. Not used if token is set to auto-activation.</p><p class="Standard">Â </p><h2 class="Heading_20_2"><a name="17_2_SignServer_Specific_Commands"><span style="min-width:1.016cm;">17.2</span></a>Â SignServer Specific Commands</h2><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="17_2_1_Authorization_Related"><span style="min-width:1.27cm;">17.2.1</span></a>Â Authorization Related</h3><p class="Standard">Â </p><p class="Standard">These commands are used to configure the internal client certificate authorization when it is turned on. It controls which clients that is authorized to request a processable worker.</p><p class="Standard">Â </p><p class="Standard"><span class="T7">Add Authorized Client Command</span>:</p><p class="Standard">Adds a client certificate to a processable workers list of acceptable clients using this worker. Specify</p><p class="Standard">certificate serial number in hex and the Issuer DN of the client certificate.</p><p class="Standard">Â </p><p class="Standard"><span class="T7">Removes Authorized Certificate Command</span>:</p><p class="Standard">Removes added client certificate entries.</p><p class="Standard">Â </p><p class="Standard"><span class="T7">List Authorized Clients Commands</span>:</p><p class="Standard">Displays the current list of acceptable clients.</p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="17_2_2_Database_Related"><span style="min-width:1.27cm;">17.2.2</span></a>Â Database Related</h3><p class="Standard">Â </p><p class="P28">Resynchronize Database Command:</p><p class="Standard">Â </p><p class="Standard">The 'resync' command is used after a SignServer had a complete database failure. When this happens Â will the Global Configuration become in 'Off-line' mode and it's not possible for the nodes to communicate internally and the Global Configurations will not be in sync any more. After the database is up again can this command be sent to the node that have the most valid Global Configuration and write it to the database. After this will the Global Configuration be in 'On-line' mode again.</p><p class="Standard">Â </p><p class="P59">Â </p><h3 class="Heading_20_3"><a name="17_2_3_Archive_Related"><span style="min-width:1.27cm;">17.2.3</span></a>Â Archive Related</h3><p class="Standard">Â </p><p class="Standard">This commands can be used for processable workers that have archiving turned on. They are used to find specific archived responses. It's up to the implementation of the worker if it supports archiving or not.</p><p class="Standard">Â </p><p class="P28">Archive Find from Archive Id Command:</p><p class="Standard">Command used to extract archived data from database identified by the archive Id.</p><p class="Standard">Â </p><p class="Standard">The Id depends on the worker, in case of the TSA is the TimeStampInfo serial number used.</p><p class="Standard">The data is stored with the same file name as the archive id in the specified path.</p><p class="Standard">Â </p><p class="P28">Archive Find from Request IP Command:</p><p class="Standard">Used to extract all archived data requested from a specified IP address.</p><p class="Standard">Â </p><p class="Standard">All data is stored as separate files with the archive id as file name in the specified path.</p><p class="P28">Â </p><p class="P28">Archive Find from Request Certificate Command:</p><p class="Standard">Used to extract all archived data requested from a client by specified it's certificates serial number and Â issuer DN.</p><p class="Standard">Â </p><p class="Standard">All data is stored as separate files with the archive id as file name in the specified path.</p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="17_2_4_Group_Key_Service_Related"><span style="min-width:1.27cm;">17.2.4</span></a>Â Group Key Service Related</h3><p class="Standard">Â </p><p class="Standard">These commands only applies for group key services.</p><p class="Standard">Â </p><p class="P28">Pregenerate Group Keys Command:</p><p class="Standard">Command used to pregenerate a given number of group keys for a given group key service and stores them unassigned encrypted in the database. This commands can be used to let the cluster work on CPU insensitive key generation during low business hours.</p><p class="Standard">Â </p><p class="P28">Remove Group Keys Command:</p><p class="Standard">Command used to remove group keys not used any more. A time range of when created, first used and last fetched can be used as criteria.</p><p class="Standard">Â </p><p class="P28">Switch Encryption Key Commands:</p><p class="P32">Command used manually switch the encryption key used to secure the group keys in database. Usually is the encryption key switched automatically but this command can be used to override this default behaviour.</p><p class="P32">Â </p><p class="P32">Â </p><p class="P28">Â </p><h3 class="Heading_20_3"><a name="17_2_5_Module_Archive_Related"><span style="min-width:1.27cm;">17.2.5</span></a>Â Module Archive Related</h3><p class="Standard">Â </p><p class="Standard">There exists three commands for managing module archives in a cluster, they are quite straightforward. Use the command 'signserver.sh/cmd module' command for more details.</p><p class="Standard">Â </p><p class="P28">Add Module:</p><p class="Standard">The 'add' command uploads a '.mar' file to the cluster. It is possible to define in which environment the module should be used, for instance 'production' or 'test' but this is all depending on which environments the module supports.</p><p class="Standard">Â </p><p class="Standard">If signature verification is required by the server it is also possible to specify a path to a JKS key store along with an alias and password to the key used.</p><p class="Standard">Â </p><p class="P28">Remove Module:</p><p class="Standard">Command used to remove a specified version of a module.</p><p class="Standard">Â </p><p class="P28">List Modules:</p><p class="P27">Command to list all uploaded modules, it is also possible to see all JAR files that is included in the Â modules.</p><p class="P27">Â </p><p class="P28">Â </p><h2 class="Heading_20_2"><a name="17_3_MailSigner_Specific_Commands"><span style="min-width:1.016cm;">17.3</span></a>Â MailSigner Specific Commands</h2><p class="Standard">Â </p><p class="Standard">Â </p><p class="P28">Add Authorized User Command:</p><p class="Standard">Command to add a SMTP authorized user to a MailSigner, it applies for all configured MailProcessors.</p><p class="Standard">Â </p><p class="P28">Remove Authorized User Command:</p><p class="Standard">Removes an authorized SMTP user.</p><p class="Standard">Â </p><p class="P28">List Authorized Users Command:</p><p class="P32">List currently authorized STMP users.</p><p class="P59">Â </p><h1 class="Heading_20_1"><a name="18__Making_the_SignServer_highly-available"><span style="min-width:0.762cm;">18 </span></a>Â Making the SignServer highly-available</h1><p class="Text_20_body">Here are some tips on configuration used to make the SignServer redundant. Usually is the SignServer set-up with three nodes (required minimum for MySQL cluster) where one node is a management node from were all deployment and administration is done and the other two services are service nodes processing the actual requests.</p><p class="Text_20_body">Â </p><h2 class="Heading_20_2"><a name="18_1_HTTP_access_requires_a_load_balancer"><span style="min-width:1.016cm;">18.1</span></a>Â HTTP access requires a load balancer</h2><p class="Text_20_body">Â </p><p class="Standard">HTTP based workers like the TSA can be clustered using a load balancer accessing a health check servlet returning the state of the SignServer. The basic settings of the health check servlet can be configured in the build configuration file but more advanced settings are done in 'src/web/healthcheck/WEB-INF/web.xml'. With the default settings will the servlet return the text 'ALLOK' when accessing the URL <a href="http://localhost:8080/signserver/healthcheck/signserverhealth">http://localhost:8080/signserver/</a><a href="http://localhost:8080/signserver/healthcheck/signserverhealth"><span class="T41">healthcheck/signserverhealth</span></a><span class="T41">. </span><span class="T42">If something is wrong with the sign server will an error message be sent back instead.</span></p><p class="P25">Â </p><p class="P25">The health check servlet can also be used to monitor the SignServer by creating a script that monitors the URL periodically for error messages.</p><p class="Text_20_body">Â </p><p class="Text_20_body">Tip, heartbeat with ldirectord is a good solution for a load balancer and works well with the SignServer. KeepAlived is another open source solution.</p><p class="Text_20_body">Â </p><p class="Text_20_body">The Main WebService using the Java client API manages the HA parts itself and then isn't a load balancer necessary.</p><p class="Text_20_body">Â </p><h2 class="Heading_20_2"><a name="18_2_Setting_up_a_MySQL_Cluster"><span style="min-width:1.016cm;">18.2</span></a>Â Setting up a MySQL Cluster</h2><p class="P11">Â </p><p class="P13"><span class="T15">The database backed of the SignServer can be made redundant using MySQL Cluster. Details on how to set-up the MySQL cluster can be found in the document SignServer_3_Installation_Guide.pdf that can be downloaded from </span><span class="T16">http://www.signserver.org.</span></p><p class="P11">More information about the MySQL Cluster can be found at</p><p class="P34">http://www.mysql.com/products/database/cluster/</p><p class="Text_20_body">Â </p><h2 class="Heading_20_2"><a name="18_3_MailSigner"><span style="min-width:1.016cm;">18.3</span></a>Â MailSigner</h2><p class="Standard">Â </p><p class="Standard">The MailSigner have no built in support for high-availability instead are the standard SMTP approach used where multiple server can be set up with different priority in the DNS MX records. </p><h1 class="P152"><a name="19__Installation_Packages"><span style="min-width:0.762cm;">19 </span></a>Installation Packages</h1><p class="Text_20_body">From version 3.1 and upwards will there be binary installation packages released alongside the regular source packages. The packages includes all software necessary except for Java, were JDK 1.5+ is required (JRE will do for the MailSigner) before installing.</p><p class="Text_20_body">Â </p><p class="Text_20_body">At the current moment are the platforms Linux (mainly Debian distribution is tested but it should work for other distributions as well) and Windows XP/2003 supported. The SignServer have two packages, one server part that should be installed in every node in the cluster and one management package containing the CLI. The same goes for the MailSigner which is also separated into two parts, one containing the SMTP server and the other containing the management CLI.</p><p class="Text_20_body">Â </p><h2 class="Heading_20_2"><a name="19_1_Using_the_Installation_Packages"><span style="min-width:1.016cm;">19.1</span></a>Using the Installation Packages</h2><p class="Text_20_body">Â </p><p class="Text_20_body">The installation package can be used either by using a GUI or on the command line by specifying the argument 'âmode text'</p><p class="Text_20_body">Â </p><p class="Text_20_body">For an advanced set-up, for instance if many nodes should be installed with similar configuration, it is possible to preconfigure the installation by specifying a properties file containing some or all the properties asked during the installation. The properties will be used directly during installation and there will be no questions about it. See each package section for details about supported properties.</p><p class="Text_20_body">Â </p><p class="Text_20_body">The configuration file should be in the following locations:</p><p class="P54"><span style="margin-left:;"/>Unix SignServer Installation <span style="margin-left:;"/><span style="margin-left:;"/>: /etc/signserver/signserver.conf</p><p class="P54">Â  Â  Â  Â  Â  Â  Unix MailSigner Installation <span style="margin-left:;"/><span style="margin-left:;"/>: /etc/mailsigner/mailsigner.conf</p><p class="P54">Â  Â  Â  Â  Â  Â  Windows SignServer Installation<span style="margin-left:;"/>: %SYSTEMROOT%\signserver.conf </p><p class="P54"><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/><span style="margin-left:;"/> (i.e C:\WINDOWS\signserver.conf)</p><p class="P54"><span style="margin-left:;"/>Windows MailSigner Installation<span style="margin-left:;"/>: %SYSTEMROOT%\mailsigner.conf</p><p class="P54">Â </p><p class="P50">After installation will all the settings be saved to the configuration file by the installation program to simplify re-installation.</p><p class="Text_20_body">Â </p><p class="Text_20_body">If all necessary properties is given in the property file, it's possible to install the package silently by specifying '--mode unattended' on the command line.</p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="P66">Â </p><h3 class="Heading_20_3"><a name="19_1_1_SignServer_Node"><span style="min-width:1.27cm;">19.1.1</span></a>Â SignServer Node</h3><p class="Text_20_body">Â </p><p class="Text_20_body">The server part of the SignServer package contains everything (except Java) that is needed to set-up a node in a cluster. It contains a preconfigured version of JBoss that is ready to use.</p><p class="Text_20_body">Â </p><p class="Text_20_body">The steps performed during the installation process are:<br/></p><p class="P54"><span style="margin-left:;"/>Unix:</p><ul><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>By default is everything unpacked in /opt/signserver-&lt;version&gt; .<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>If a /etc/signserver/signserver.conf file exists, it's read and used during installation.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>The user and group 'signserver' is created<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>JBoss init.d script is configured to run at runlevel 3,4,5<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Directory /etc/signserver/ is created to contain all configuration files<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Database configuration file /etc/signserver/database-conf.xml is populated.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Log configuration file /etc/signserver/log-conf.xml is populated and configured to log to the directory /var/log/signserver<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>If no HTTP SSL certificate is specified in the configuration file will dummy key stores be generated to /etc/signserver.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Tomcat is configured for HTTPS and it's configuration file is placed in /etc/signserver/webserver-conf.xml<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Finally is Jboss started and ready to be used.<span class="odfLiEnd"/>Â </p></li></ul><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="P54"><span style="margin-left:;"/>Windows:</p><ul><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>By default is everything unpacked in C:\Program\SignServer\SignServer-&lt;version&gt; .<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>If a c:\WINDOWS\signserver.conf file exists it's read and used during installation.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>JBoss is configured to be run as a service that is started automatically.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Database configuration file &lt;INSTALLDIR&gt;\database-conf.xml is populated.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Log configuration file &lt;INSTALLDIR&gt;\log-conf.xml is populated and configured to log to the default directory &lt;INSTALLDIR&gt;\jboss\server\default\log<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>If no HTTP SSL certificate is specified will dummy key stores be generated to &lt;INSTALLDIR&gt;<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Tomcat is configured for HTTPS and it's configuration file is placed in &lt;INSTALLDIR&gt;\webserver-conf.xml<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Finally is Jboss started and ready to be used.<span class="odfLiEnd"/>Â </p></li></ul><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="P66">The supported properties in the configuration file /etc/signserver/signserver.conf (or %SYSTEMROOT%\signerserver.conf for windows) are:</p><p class="Text_20_body">Â </p><table border="0" cellspacing="0" cellpadding="0" class="Tabell7"><colgroup><col width="184"/><col width="215"/><col width="141"/><col width="203"/></colgroup><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A1"><p class="P70">Property Name</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A1"><p class="P70">Description</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A1"><p class="P70">Example value</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D1"><p class="P70">Where to manually reconfigure </p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">SIGNSERVER_NODEID</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">A unique string value (containing alphanumeric characters only) identifying the node in a cluster.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">node1</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix: /etc/signserver/signserver.conf</p><p class="P68">Windows:</p><p class="P68">%Systemroot%\signserver.conf</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">database.type</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">Type of database, currently are Hypersonic, Mysql, Mysql Cluster, Postgres and MS SQL 2000 supported</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">hsqldb, mysql, <span class="T2">mysqlndb, </span>Â postgres, mssql2000</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/database-conf.xml</p><p class="P68">Windows: %Installdir%\database-conf.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">database.hosts</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">The hostnames of the databases used. (not used for hsqldb).</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">localhost</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/database-conf.xml</p><p class="P68">Windows: %Installdir%\database-conf.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">database.port</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">The port of the database (not used for hsqldb).</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">1433</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/database-conf.xml</p><p class="P68">Windows: %Installdir%\database-conf.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">database.name</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">The name of the database Â (not used for hsqldb).</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">signserver</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/database-conf.xml</p><p class="P68">Windows: %Installdir%\database-conf.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">database.username</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">The username used for authentication against the database (not used for hsqldb).</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">signserver</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/database-conf.xml</p><p class="P68">Windows: %Installdir%\database-conf.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">database.password</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">The password used for authentication against the database (not used for hsqldb).</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">foo123</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/database-conf.xml</p><p class="P68">Windows: %Installdir%\database-conf.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">httpserver.hostname</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">Hostname used as CN in generated SSL Server certificate.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">host1.someorg</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Only used during the of SSL Server certificate <span class="T2">generation phase of installation.</span></p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">httpserver.storepath</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">Path to the key store (JKS file) containing the SSL server certificate.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">/etc/signserver/tomcat.jks</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/webserver-conf.xml</p><p class="P68">Windows: %Installdir%\webserver-conf.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">httpserver.password</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">Password to unlock the SSL server certificate key store.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">foo123</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/webserver-conf.xml</p><p class="P68">Windows: %Installdir%\webserver-conf.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">httptrust.storepath</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">Path to the key store (JKS file) containing the CA trust store.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">/etc/signserver/truststore.jks</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/webserver-conf.xml</p><p class="P68">Windows: %Installdir%\webserver-conf.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">httptrust.password</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">Password unlocking the CA truststore.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">foo123</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/webserver-conf.xml</p><p class="P68">Windows: %Installdir%\webserver-conf.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell7_A2"><p class="P68">syslog.hostname</p></td><td style="text-align:left;width:1.9368in; " class="Tabell7_A2"><p class="P68">Host name of the Syslog server. This setting also indicates that Syslog should be used.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell7_A2"><p class="P68">loghost.someorg.org</p></td><td style="text-align:left;width:1.8264in; " class="Tabell7_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/log-conf.xml</p><p class="P68">Windows: %Installdir%\log-conf.xml</p></td></tr></table><p class="Text_20_body">Â </p><h3 class="Heading_20_3"><a name="19_1_2_SignServer_Management"><span style="min-width:1.27cm;">19.1.2</span></a>Â SignServer Management</h3><p class="Text_20_body">Â </p><p class="Text_20_body">This package installs the CLI interface on the management station (which can be the same as a node). The following steps are performed during installation:</p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="P30"><span style="margin-left:;"/>Unix:</p><ul><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>By default is everything unpacked in /opt/signserver-&lt;version&gt; .<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>If a /etc/signserver/signserver.conf file exists it's read and used during installation.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>The user and group 'signserver' is created<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>A link from /opt/signserver-&lt;version&gt;/bin/signserver.sh is done to /usr/local/bin.<span class="odfLiEnd"/>Â </p></li></ul><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="P54"><span style="margin-left:;"/>Windows:</p><ul><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Everything is unpacked in C:\Program\SignServer\SignServer-&lt;version&gt; by default.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>If a c:\WINDOWS\signserver.conf file exists it's read and used during installation.<span class="odfLiEnd"/>Â </p><p class="P149" style="margin-left:0.635cm;">Â </p></li></ul><p class="Text_20_body">Â </p><p class="Text_20_body">The signserver.conf supports the following settings:</p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><table border="0" cellspacing="0" cellpadding="0" class="Tabell8"><colgroup><col width="184"/><col width="215"/><col width="141"/><col width="203"/></colgroup><tr><td style="text-align:left;width:1.6569in; " class="Tabell8_A1"><p class="P70">Property Name</p></td><td style="text-align:left;width:1.9368in; " class="Tabell8_A1"><p class="P70">Description</p></td><td style="text-align:left;width:1.2722in; " class="Tabell8_A1"><p class="P70">Example value</p></td><td style="text-align:left;width:1.8264in; " class="Tabell8_D1"><p class="P70">Where to manually reconfigure </p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell8_A2"><p class="P68">hostname.masternode</p></td><td style="text-align:left;width:1.9368in; " class="Tabell8_A2"><p class="P72"><span class="T84">Hostname</span> of master node in the cluster.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell8_A2"><p class="P68">node1.someorg.org</p></td><td style="text-align:left;width:1.8264in; " class="Tabell8_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/signserver.conf</p><p class="P68">Windows: %Installdir%\signserver.conf</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell8_A2"><p class="P68">hostname.allnodes</p></td><td style="text-align:left;width:1.9368in; " class="Tabell8_A2"><p class="P73"><span class="T3">Hostname </span><span class="T4">of all hosts in cluster, separated by ';'.</span> </p></td><td style="text-align:left;width:1.2722in; " class="Tabell8_A2"><p class="P68">node1.someorg.org;<span class="T2">node2.someorg.org</span></p></td><td style="text-align:left;width:1.8264in; " class="Tabell8_D2"><p class="P68">Unix:</p><p class="P68">/etc/signserver/signserver.conf</p><p class="P68">Windows: %Installdir%\signserver.conf</p></td></tr></table><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><h3 class="Heading_20_3"><a name="19_1_3_MailSigner_Server"><span style="min-width:1.27cm;">19.1.3</span></a>Â MailSigner Server</h3><p class="Text_20_body">Â </p><p class="Text_20_body">The MailSigner package works much in the same way as the SignServer package with the difference that James SMTP server is included instead of Jboss.</p><p class="Text_20_body">Â </p><p class="Text_20_body">The steps performed during the installation process are:<br/></p><p class="P54"><span style="margin-left:;"/>Unix:</p><ul><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>By default is everything is unpacked in /opt/mailsigner-&lt;version&gt; .<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>If a /etc/mailsigner/mailsigner.conf file exists it's read and used during installation.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>The user and group 'mailsigner' is created<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>James init.d script is configured to run at runlevel 3,4,5<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Directory /etc/mailsigner/ is created to contain all configuration files<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>James configuration file /etc/mailsigner/mailsigner_conf.xml is populated.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Log configuration file /etc/mailsigner/log-conf.xml is populated and configured to log to the directory /var/log/mailsigner<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Finally is James started and ready to be used.<span class="odfLiEnd"/>Â </p></li></ul><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="P54"><span style="margin-left:;"/>Windows:</p><ul><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>By default is everything is unpacked in C:\Program\MailSigner\MailSigner-&lt;version&gt; .<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>If a c:\WINDOWS\mailsigner.conf file exists it's read and used during installation.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>James is configured to be run as a service that is started automatically.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>James configuration file &lt;INSTALLDIR&gt;\mailsigner_conf.xml is populated.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Log configuration file &lt;INSTALLDIR&gt;\log-conf.xml is populated and configured to log to the default directory &lt;INSTALLDIR&gt;\james\logs<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Finally is James started and ready to be used.<span class="odfLiEnd"/>Â </p></li></ul><p class="Text_20_body"><br/>The supported properties in the configuration file /etc/mailsigner/mailsigner.conf (or %SYSTEMROOT%\mailsigner.conf for windows) are:</p><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="P66">Â </p><table border="0" cellspacing="0" cellpadding="0" class="Tabell9"><colgroup><col width="184"/><col width="215"/><col width="141"/><col width="203"/></colgroup><tr><td style="text-align:left;width:1.6569in; " class="Tabell9_A1"><p class="P70">Property Name</p></td><td style="text-align:left;width:1.9368in; " class="Tabell9_A1"><p class="P70">Description</p></td><td style="text-align:left;width:1.2722in; " class="Tabell9_A1"><p class="P70">Example value</p></td><td style="text-align:left;width:1.8264in; " class="Tabell9_D1"><p class="P70">Where to manually reconfigure </p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell9_A2"><p class="P68">mailsigner.smtpport</p></td><td style="text-align:left;width:1.9368in; " class="Tabell9_A2"><p class="P68">Port that the mailserver should listen on.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell9_A2"><p class="P68">25</p></td><td style="text-align:left;width:1.8264in; " class="Tabell9_D2"><p class="P68">Unix:</p><p class="P68">/etc/mailsigner/mailsigner_config.xml</p><p class="P68">Windows: %Installdir%\mailsigner-config.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell9_A2"><p class="P74"><span class="T18">mailsigner</span>.<span class="T18">primarydns</span></p></td><td style="text-align:left;width:1.9368in; " class="Tabell9_A2"><p class="P68">The IP address of the primary DNS server.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell9_A2"><p class="P68">10.0.0.1</p></td><td style="text-align:left;width:1.8264in; " class="Tabell9_D2"><p class="P68">Unix:</p><p class="P68">/etc/mailsigner/mailsigner_config.xml</p><p class="P68">Windows: %Installdir%\mailsigner-config.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell9_A2"><p class="P74"><span class="T18">mailsigner</span>.seconda<span class="T18">rydns</span></p></td><td style="text-align:left;width:1.9368in; " class="Tabell9_A2"><p class="P68">The IP address of the secondary DNS server.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell9_A2"><p class="P68">10.0.0.2</p></td><td style="text-align:left;width:1.8264in; " class="Tabell9_D2"><p class="P68">Unix:</p><p class="P68">/etc/mailsigner/mailsigner_config.xml</p><p class="P68">Windows: %Installdir%\mailsigner_config.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell9_A2"><p class="P74"><span class="T18">mailsigner</span>.postmaster</p></td><td style="text-align:left;width:1.9368in; " class="Tabell9_A2"><p class="P68">The email address of the main administrator.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell9_A2"><p class="P68">mailadmin@someorg.org</p></td><td style="text-align:left;width:1.8264in; " class="Tabell9_D2"><p class="P68">Unix:</p><p class="P68">/etc/mailsigner/mailsigner_config.xml</p><p class="P68">Windows: %Installdir%\mailsigner_config.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell9_A2"><p class="P74"><span class="T18">mailsigner</span>.<span class="T18">smtpauth</span></p></td><td style="text-align:left;width:1.9368in; " class="Tabell9_A2"><p class="P105"><span class="T2">Indicates if SMTP AUTH should be used. S</span><span class="T4">upported values are : 'true' which means required but announced only to not authorized addresses, '</span><span class="T85">false' and</span></p><p class="P106">'announce' which acts Â like true, but always announce AUTH capability to clients.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell9_A2"><p class="P68">true, false, announce</p></td><td style="text-align:left;width:1.8264in; " class="Tabell9_D2"><p class="P68">Unix:</p><p class="P68">/etc/mailsigner/mailsigner_config.xml</p><p class="P68">Windows: %Installdir%\mailsigner_config.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell9_A2"><p class="P74"><span class="T18">mailsigner</span>.<span class="T18">gatewayhost</span></p></td><td style="text-align:left;width:1.9368in; " class="Tabell9_A2"><p class="P68">If emails should be forwarded to another SMTP server in the organisation should this and the 'mailsigner.gatewayport' setting be used. Enter the hostname of the other SMTP server.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell9_A2"><p class="P68">smtp1.someorg.org</p></td><td style="text-align:left;width:1.8264in; " class="Tabell9_D2"><p class="P68">Unix:</p><p class="P68">/etc/mailsigner/mailsigner_config.xml</p><p class="P68">Windows: %Installdir%\mailsigner_config.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell9_A2"><p class="P74"><span class="T18">mailsigner</span>.<span class="T18">gatewayport</span></p></td><td style="text-align:left;width:1.9368in; " class="Tabell9_A2"><p class="P68">The port of the SMTP server to forward messages to.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell9_A2"><p class="P68">25</p></td><td style="text-align:left;width:1.8264in; " class="Tabell9_D2"><p class="P68">/etc/mailsigner/mailsigner_config.xml</p><p class="P68">Windows: %Installdir%\mailsigner_config.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell9_A2"><p class="P74"><span class="T18">mailsigner</span>.<span class="T18">tlskeystorepath</span></p></td><td style="text-align:left;width:1.9368in; " class="Tabell9_A2"><p class="P68">Â This setting indicates that the mailsigner should use SMTPS and point to a TLS JKS keystore.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell9_A2"><p class="P68">/etc/mailsigner/tlskeystore.jks</p></td><td style="text-align:left;width:1.8264in; " class="Tabell9_D2"><p class="P68">Unix:</p><p class="P68">/etc/mailsigner/mailsigner_config.xml</p><p class="P68">Windows: %Installdir%\mailsigner_config.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell9_A2"><p class="P74"><span class="T18">mailsigner</span>.<span class="T18">tlskeystorepwd</span></p></td><td style="text-align:left;width:1.9368in; " class="Tabell9_A2"><p class="P68">The password to unlock the TLS keystore</p></td><td style="text-align:left;width:1.2722in; " class="Tabell9_A2"><p class="P68">foo123</p></td><td style="text-align:left;width:1.8264in; " class="Tabell9_D2"><p class="P68">/etc/mailsigner/mailsigner_config.xml</p><p class="P68">Windows: %Installdir%\mailsigner_config.xml</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell9_A2"><p class="P68">syslog.hostname</p></td><td style="text-align:left;width:1.9368in; " class="Tabell9_A2"><p class="P68">Host name of the Syslog server. This setting also indicates that syslog should be used.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell9_A2"><p class="P68">loghost.someorg.org</p></td><td style="text-align:left;width:1.8264in; " class="Tabell9_D2"><p class="P68">Unix:</p><p class="P68">/etc/mailsigner/log-conf.xml</p><p class="P68">Windows: %Installdir%\log-conf.xml</p></td></tr></table><p class="Text_20_body">Â </p><h3 class="Heading_20_3"><a name="19_1_4_MailSigner_Management"><span style="min-width:1.27cm;">19.1.4</span></a>Â MailSigner Management</h3><p class="Text_20_body">Â </p><p class="Text_20_body">This package installs the CLI interface on the management station (which can be the same as the SMTP server). The following steps are performed during installation:</p><p class="Text_20_body">Â </p><p class="P30"><span style="margin-left:;"/>Unix:</p><ul><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>By default is everything is unpacked in /opt/mailsigner-&lt;version&gt; .<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>If a /etc/mailsigner/mailsigner.conf file exists it's read and used during installation.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>The user and group 'mailsigner' is created<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>A link from /opt/mailsigner-&lt;version&gt;/bin/mailsigner.sh is done to /usr/local/bin.<span class="odfLiEnd"/>Â </p></li></ul><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="P54"><span style="margin-left:;"/>Windows:</p><ul><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Everything is unpacked in C:\Program\MailSigner\MailSigner-&lt;version&gt; by default.<span class="odfLiEnd"/>Â </p></li><li><p class="P149" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>If a c:\WINDOWS\mailsigner.conf file exists it's read and used during installation.<span class="odfLiEnd"/>Â </p></li></ul><p class="Text_20_body">Â </p><p class="Text_20_body">Â </p><p class="Text_20_body">The mailsigner.conf supports the following settings but it is important that 'hostname.masternode' and 'hostname.allnodes' must point to the same host:</p><p class="Text_20_body">Â </p><table border="0" cellspacing="0" cellpadding="0" class="Tabell10"><colgroup><col width="184"/><col width="215"/><col width="141"/><col width="203"/></colgroup><tr><td style="text-align:left;width:1.6569in; " class="Tabell10_A1"><p class="P70">Property Name</p></td><td style="text-align:left;width:1.9368in; " class="Tabell10_A1"><p class="P70">Description</p></td><td style="text-align:left;width:1.2722in; " class="Tabell10_A1"><p class="P70">Example value</p></td><td style="text-align:left;width:1.8264in; " class="Tabell10_D1"><p class="P70">Where to manually reconfigure </p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell10_A2"><p class="P68">hostname.masternode</p></td><td style="text-align:left;width:1.9368in; " class="Tabell10_A2"><p class="P72">The hostname of the mailsigner to manage.</p></td><td style="text-align:left;width:1.2722in; " class="Tabell10_A2"><p class="P68">mailsigner.someorg.org</p></td><td style="text-align:left;width:1.8264in; " class="Tabell10_D2"><p class="P68">Unix:</p><p class="P68">/etc/mailsigner/mailsigner.conf</p><p class="P68">Windows: %Installdir%\mailsigner.conf</p></td></tr><tr><td style="text-align:left;width:1.6569in; " class="Tabell10_A2"><p class="P68">hostname.allnodes</p></td><td style="text-align:left;width:1.9368in; " class="Tabell10_A2"><p class="P72">The hostname of the mailsigner to manage and should have the same value as master node. MailSigner doesn't support clustering</p></td><td style="text-align:left;width:1.2722in; " class="Tabell10_A2"><p class="P68">mailsigner.someorg.org</p></td><td style="text-align:left;width:1.8264in; " class="Tabell10_D2"><p class="P68">Unix:</p><p class="P68">/etc/<span class="T2">mailsigner</span>/<span class="T2">mailsigner </span>.conf</p><p class="P68">Windows: %Installdir%\mailsigner .conf</p></td></tr></table><p class="Text_20_body">Â </p><h2 class="Heading_20_2"><a name="19_2_Generating_Installation_Packages"><span style="min-width:1.016cm;">19.2</span></a>Â Generating Installation Packages</h2><p class="Text_20_body">Â </p><p class="Text_20_body">Before generating a installation package must Bitrock InstallBuilder be installed on a Linux workstation. Then set the build mode in signserver_build.properties and go to src/install/bitrock. If a SignServer package should be generated must the environment variable JBOSS_PREP point the a prepared JBoss installation that will be included in the package.</p><p class="Text_20_body">Â </p><p class="Text_20_body">Then execute the script './buildsignserverpkgs.sh &lt;version&gt;' to start the generation process. The packages will be generated in BitRocks default output directory. For MailSigner use the script 'buildmailsignerpkgs.sh'.</p><p class="P66">Â </p><h1 class="Heading_20_1"><a name="20__For_Developers"><span style="min-width:0.762cm;">20 </span></a>Â For Developers</h1><p class="Standard">This section describes the details of how to develop your own plug-ins for the SignServer API. It goes through most of the necessary interfaces to get going.</p><p class="Standard">Â </p><h2 class="Heading_20_2"><a name="20_1_Building_with_Customized_Code"><span style="min-width:1.016cm;">20.1</span></a>Â Building with Customized Code</h2><p class="Standard">Â </p><p class="Standard">It is possible to have your own code in a separate code tree to avoid a mix of custom code with SignServer project code. This makes it easier to maintain and update the code for future versions. This is done by configuring one or more of the 'custom.' parameters in the build configuration file. The are each described here:</p><p class="Standard">Â </p><p class="P79">custom.src.java = <span class="T14">Should point to an external directory containing the package base of the Java code. These are then included in the compilation at build time.<br/></span></p><p class="P79">custom.src.web = <span class="T14">Should point to the base of a WAR source tree with WEB-INF/web.xml included. This will replace the default WAR deployed during the build.</span></p><p class="P80">Â </p><p class="P79">custom.build.xml = <span class="T14">This can point to a custom build.xml that will be imported from the main build.xml and lets the developer include his own ant tasks if necessary.</span></p><p class="P80">Â </p><p class="P81"><span class="T71">custom.commandfactory = </span><span class="T72">Should point to a custom implementation of the interface org.signserver.cli.</span><span class="T54">ISignServerCommandFactory</span><span class="T74">. </span><span class="T69">This gives to ability to extend (or replace) the default CLI with another one. The best way of extending the CLI is to look at Â how the </span><span class="T73">DefaultSignServerCommandFactory</span><span class="T69"> Â is structured.</span></p><p class="Standard">Â </p><h2 class="Heading_20_2"><a name="20_2_Implementing_Workers"><span style="min-width:1.016cm;">20.2</span></a>Â Implementing Workers</h2><p class="Standard">Â </p><p class="Standard">The main component in the SignServer is the Worker from which most other components inherits. To get a better overview of how the different component types relate to one and another see illustration 1 in the Overview section.</p><p class="Standard">Â </p><p class="Standard">Most workers work in the same way but with different interfaces to implement but for all of them should the following steps be performed.</p><p class="Standard">Â </p><ul><li><p class="P136" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Create a custom Â class implementing the specified interface. There usually exists a base class implementing the most basic function to simply the implementation even further. If it exists it's recommended to inherit it.<span class="odfLiEnd"/>Â </p></li></ul><ul><li><p class="P137" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>You can define your own properties that the worker can use for its configuration.<span class="odfLiEnd"/>Â </p></li><li><p class="P137" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Make sure the custom class is available to the application server<span class="odfLiEnd"/>Â </p></li><li><p class="P137" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Redeploy the SignServer.<span class="odfLiEnd"/>Â </p></li><li><p class="P133" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span><span class="T15">Register the worker in the application by setting a property </span><span class="T38">WORKER&lt;id&gt;.CLASSPATH </span><span class="T15">with a global scope in the global configuration. (Also make sure to set it's crypto tokens class-path, see separate section).</span><span class="odfLiEnd"/>Â </p></li><li><p class="P137" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Reload the service with the CLI reload command.<span class="odfLiEnd"/>Â </p></li></ul><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="20_2_1_The_ISigner_Interface"><span style="min-width:1.27cm;">20.2.1</span></a>Â The ISigner Interface</h3><p class="Standard">Â </p><p class="P96">A Signer is a component used to perform some form of cryptographic processing of requested data and to c<span class="T20">reate a custom signer class it should Â implement the org.signserver.server.signers.ISigner interface. There exists a BaseSigner that can be inherited taking care of some of the functionality. If the BaseSigner is inherited the only method that needs to be implemented is '</span><span class="T24">processData</span><span class="T20">() '.</span></p><ul><li><p class="P138" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span><span class="odfLiEnd"/>Â </p></li></ul><p class="P42">There exists a DummySigner implementation that is used for demonstration purposes.</p><p class="P42">Â </p><h3 class="Heading_20_3"><a name="20_2_2_The_ITimedService_Interface"><span style="min-width:1.27cm;">20.2.2</span></a>Â The ITimedService Interface</h3><p class="P11"><span class="T20">There are two kinds of timed services, singleton or non-singleton. A singleton service is only run at one of the nodes at the time while non-singleton services are run at all nodes simultaneously. If a singleton </span>service fails to run on one of the nodes will one of the other nodes take over the service</p><p class="P11">automatically.</p><p class="P11">Â </p><p class="P13"><span class="T15">If a service should be singleton or not is determined by a standard property </span><span class="T56">SINGLETON</span><span class="T51"> </span><span class="T15">defined</span></p><p class="P11">in the ServiceConfig class.</p><p class="P11">Â </p><p class="P11">Other basic properties used to configure all services are:</p><p class="P13"><span class="T58">ACTIVE </span><span class="T15">when set to </span><span class="T38">âTRUEâ </span><span class="T15">means that the service is active and should be run.</span></p><p class="P13"><span class="T57">INTERVAL </span><span class="T15">defining the interval in seconds of how often the service should be run.</span></p><p class="P119"><span class="T37">CRON</span><span class="T15"> used as a complement to </span><span class="T37">INTERVAL</span><span class="T15"> to specify on a calendar basis.</span></p><p class="P11">Â </p><ul><li><p class="P148" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span><span class="T20">To create </span>a custom timed service class it should implement the org.signserver.server.timedservices.ITimedService interface. There exists a BaseTimedService that can be inherited taking care of most of the basic functionality. If the BaseTimedService is inherited the the only method that needs to be implemented is the 'work()' method.<span class="T20"><br/></span><span class="odfLiEnd"/>Â </p></li></ul><p class="P92">The work method that needs to be implemented is described here:</p><p class="P39"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">do</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">actual</span><span class="T18"> </span><span class="T59">work</span><span class="T18"> </span><span class="T59">and</span><span class="T18"> </span><span class="T59">should</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">implemented</span><span class="T18"> </span><span class="T59">by</span><span class="T18"> </span><span class="T59">all</span><span class="T18"> </span><span class="T59">services.</span><span class="T18"> </span><span class="T59">The</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">run</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">at</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">periodical</span><span class="T18"> </span><span class="T59">interval</span><span class="T18"> </span><span class="T59">defined</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">getNextInterval.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">ServiceExecutionFailedException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">execution</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">service</span><span class="T18"> </span><span class="T59">failed</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P103"><span class="T29"><span style="margin-left:;"/></span><span class="T48">public</span><span class="T29"> </span><span class="T48">void</span><span class="T29"> work() </span><span class="T48">throws</span><span class="T29"> ServiceExecutionFailedException;</span></p><p class="P122">Â </p><p class="P11">There exists a DummyTimedService implementation that is used for demonstration purposes.</p><p class="P11">Â </p><p class="P63">Â </p><p class="P44">Â </p><p class="P46">Just as the other worker plug-ins have the validator service a base class taking care of most of the common methods and the only method that needs to be implemented is the 'validate' method below. But for most applications should the DefaultValidationService work. What is probably more interesting is to develop a custom IValidator used to integrate the default validation service against different certificate status repositories. See section called 'Other Customizations' for details of how to implement a Validator.</p><p class="P46">Â </p><p class="P123">Â </p><p class="P43"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">check</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">validation</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">certificate</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">validationRequest</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">ValidateResponse</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">IllegalRequestException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">request</span><span class="T18"> </span><span class="T59">didn't</span><span class="T18"> </span><span class="T59">conform</span><span class="T18"> </span><span class="T59">with</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> Â  </span></p><p class="P97"><span class="T18">Â </span><span class="T59">specification.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">online.</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">SignServerException</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">general</span><span class="T18"> </span><span class="T59">failure</span><span class="T18"> </span><span class="T59">exception</span><span class="T18"> </span><span class="T59">during</span><span class="T18"> </span><span class="T59">validation</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@see</span><span class="T18"> </span><span class="T59">org.signserver.validationservice.common.ValidateRequest</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@see</span><span class="T18"> </span><span class="T59">org.signserver.validationservice.common.ValidateResponse</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P98"><span class="T35"><span style="margin-left:;"/>ValidateResponse validate(ValidateRequest validationRequest) </span><span class="T47">throws</span><span class="T35"> IllegalRequestException, CryptoTokenOfflineException, SignServerException;</span></p><p class="P123">Â </p><p class="P45">Â </p><h3 class="P155"><a name="20_2_4_IGroupKeyService_Interface"><span style="min-width:1.27cm;">20.2.4</span></a>Â IGroupKeyService Interface</h3><p class="P47">Â </p><p class="P47">To customize a group key service is slightly more work. Then need five methods be implemented: 'fetchGroupKey', 'pregenerateGroupKeys', 'swithEncryptionKey', 'removeGroupKeys' and 'getStatus'. The default implementation stores the group keys in database with a reference to the encryption key used, the encryption key is stored in the extended key store. See the JavaDoc and the code for the default group key service for more details of implementing a customized one.</p><p class="P47">Â </p><p class="P123">Â </p><p class="P38"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Main</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">Group</span><span class="T18"> </span><span class="T59">Key</span><span class="T18"> </span><span class="T59">Service</span><span class="T18"> </span><span class="T59">responsible</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">fetching</span><span class="T18"> </span><span class="T59">keys</span><span class="T18"> </span><span class="T59">from</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">database.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">fetchKeyRequest</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">FetchKeyReponse</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">IllegalRequestException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">request</span><span class="T18"> </span><span class="T59">didn't</span><span class="T18"> </span><span class="T59">conform</span><span class="T18"> </span><span class="T59">with</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">specification.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">online.</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">SignServerException</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">general</span><span class="T18"> </span><span class="T59">failure</span><span class="T18"> </span><span class="T59">exception</span><span class="T18"> </span><span class="T59">during</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">generation.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@see</span><span class="T18"> </span><span class="T59">org.signserver.groupkeyservice.common.FetchKeyRequest</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@see</span><span class="T18"> </span><span class="T59">org.signserver.groupkeyservice.common.FetchKeyResponse</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/>FetchKeyResponse fetchGroupKey(FetchKeyRequest fetchKeyRequest) </span><span class="T46">throws</span><span class="T18"> IllegalRequestException, CryptoTokenOfflineException, SignServerException;</span></p><p class="P97">Â </p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">instructs</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">group</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">service</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">pregenerate</span><span class="T18"> </span><span class="T59">keys.</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">This</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">called</span><span class="T18"> </span><span class="T59">at</span><span class="T18"> </span><span class="T59">periods</span><span class="T18"> </span><span class="T59">when</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">server</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">having</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">low</span><span class="T18"> </span><span class="T59">load.</span><span class="T18"> </span><span class="T59">This</span><span class="T18"> </span><span class="T59">option</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">optional</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">implement,</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">service</span><span class="T18"> </span><span class="T59">doesn't</span><span class="T18"> </span><span class="T59">support</span><span class="T18"> </span><span class="T59">this</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">it</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">return</span><span class="T18"> </span><span class="T59">null.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">pregenerateKeysRequest</span><span class="T18"> </span><span class="T59">request</span><span class="T18"> </span><span class="T59">data</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">response</span><span class="T18"> </span><span class="T59">containing</span><span class="T18"> </span><span class="T59">number</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">keys</span><span class="T18"> </span><span class="T59">generated,</span><span class="T18"> </span><span class="T59">etc</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">IllegalRequestException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">requests</span><span class="T18"> </span><span class="T59">contain</span><span class="T18"> </span><span class="T59">unsupported</span><span class="T18"> </span><span class="T59">data.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">online.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">SignServerException</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">general</span><span class="T18"> </span><span class="T59">failure</span><span class="T18"> </span><span class="T59">exception</span><span class="T18"> </span><span class="T59">during</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">generation.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@see</span><span class="T18"> </span><span class="T59">org.signserver.groupkeyservice.common.PregenerateKeysRequest</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@see</span><span class="T18"> </span><span class="T59">org.signserver.groupkeyservice.common.PregenerateKeysResponse</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/>PregenerateKeysResponse pregenerateGroupKeys(PregenerateKeysRequest pregenerateKeysRequest) </span><span class="T46">throws</span><span class="T18"> IllegalRequestException, CryptoTokenOfflineException, SignServerException;</span></p><p class="P97">Â </p><p class="P100"><span style="margin-left:;"/></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">instructing</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">service</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">switch</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">encryption</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">for</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">storing</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">group</span><span class="T18"> </span><span class="T59">keys</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">database.</span><span class="T18"> </span><span class="T59">This</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">ensure</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">one</span><span class="T18"> </span><span class="T59">encryption</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">exposed</span><span class="T18"> </span><span class="T59">through</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">much</span><span class="T18"> </span><span class="T59">data.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">This</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">optional</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">implementing</span><span class="T18"> </span><span class="T59">service</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">implement,</span><span class="T18"> </span><span class="T59">if</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">it's</span><span class="T18"> </span><span class="T59">not</span><span class="T18"> </span><span class="T59">implemented</span><span class="T18"> </span><span class="T59">it</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">return</span><span class="T18"> </span><span class="T59">null.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">switchEncKeyRequest</span><span class="T18"> </span><span class="T59">request</span><span class="T18"> </span><span class="T59">data.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">response</span><span class="T18"> </span><span class="T59">containing</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">result</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">operation</span><span class="T18"> </span><span class="T59">such</span><span class="T18"> </span><span class="T59">as</span><span class="T18"> </span><span class="T59">new</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">index.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">IllegalRequestException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">requests</span><span class="T18"> </span><span class="T59">contain</span><span class="T18"> </span><span class="T59">unsupported</span><span class="T18"> </span><span class="T59">data.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">online.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">SignServerException</span><span class="T18"> Â </span><span class="T59">for</span><span class="T18"> </span><span class="T59">general</span><span class="T18"> </span><span class="T59">failure</span><span class="T18"> </span><span class="T59">exception</span><span class="T18"> </span><span class="T59">during</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">generation.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@see</span><span class="T18"> </span><span class="T59">org.signserver.groupkeyservice.common.SwitchEncKeyRequest</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@see</span><span class="T18"> </span><span class="T59">org.signserver.groupkeyservice.common.SwitchEncKeyResponse</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/>SwitchEncKeyResponse switchEncryptionKey(SwitchEncKeyRequest switchEncKeyRequest) </span><span class="T46">throws</span><span class="T18"> IllegalRequestException, CryptoTokenOfflineException, SignServerException;</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">instructing</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">service</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">remove</span><span class="T18"> </span><span class="T59">old</span><span class="T18"> </span><span class="T59">group</span><span class="T18"> </span><span class="T59">keys</span><span class="T18"> </span><span class="T59">not</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">anymore</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">it</span><span class="T18"> </span><span class="T59">up</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">caller</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">check</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">implementing</span><span class="T18"> </span><span class="T59">service</span><span class="T18"> </span><span class="T59">supports</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">type</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">IRemoveGroupKeyRequest</span><span class="T18"> </span><span class="T59">used.</span><span class="T18"> </span><span class="T59">The</span><span class="T18"> </span><span class="T59">request</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">contain</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">specifying</span><span class="T18"> </span><span class="T59">which</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">keys</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">removed.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">This</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">optional</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">implementing</span><span class="T18"> </span><span class="T59">service</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">implement,</span><span class="T18"> </span><span class="T59">if</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">it's</span><span class="T18"> </span><span class="T59">not</span><span class="T18"> </span><span class="T59">implemented</span><span class="T18"> </span><span class="T59">it</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">return</span><span class="T18"> </span><span class="T59">null.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">removeGroupKeyRequests</span><span class="T18"> </span><span class="T59">request</span><span class="T18"> </span><span class="T59">data.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">response</span><span class="T18"> </span><span class="T59">containing</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">result</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">operation</span><span class="T18"> </span><span class="T59">such</span><span class="T18"> </span><span class="T59">as</span><span class="T18"> </span><span class="T59">number</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">keys</span><span class="T18"> </span><span class="T59">actually</span><span class="T18"> </span><span class="T59">removed.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">IllegalRequestException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">requests</span><span class="T18"> </span><span class="T59">contain</span><span class="T18"> </span><span class="T59">unsupported</span><span class="T18"> </span><span class="T59">data.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">online.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">SignServerException</span><span class="T18"> Â </span><span class="T59">for</span><span class="T18"> </span><span class="T59">general</span><span class="T18"> </span><span class="T59">failure</span><span class="T18"> </span><span class="T59">exception</span><span class="T18"> </span><span class="T59">during</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">generation.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@see</span><span class="T18"> </span><span class="T59">org.signserver.groupkeyservice.common.RemoveGroupKeyResponse</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@see</span><span class="T18"> </span><span class="T59">org.signserver.groupkeyservice.common.IRemoveGroupKeyRequest</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/>RemoveGroupKeyResponse removeGroupKeys(IRemoveGroupKeyRequest removeGroupKeyRequests) </span><span class="T46">throws</span><span class="T18"> IllegalRequestException, CryptoTokenOfflineException, SignServerException;</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P97">Â </p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Should</span><span class="T18"> </span><span class="T59">return</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">actual</span><span class="T18"> </span><span class="T59">status</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">worker,</span><span class="T18"> </span><span class="T59">status</span><span class="T18"> </span><span class="T59">could</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">if</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">signer</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">activated</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">not,</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">equivalent</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">service.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">WorkerStatus</span><span class="T18"> </span><span class="T59">object.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P103"><span class="T29"><span style="margin-left:;"/></span><span class="T48">public</span><span class="T29"> WorkerStatus getStatus();</span></p><p class="P47">Â </p><p class="P123">Â </p><p class="P47">Â </p><p class="P47"/><p class="P47">Â </p><h3 class="P155"><a name="20_2_5_IMailProcessor_Interface"><span style="min-width:1.27cm;">20.2.5</span></a>Â IMailProcessor Interface</h3><p class="P47">Â </p><p class="P47">Implementing a MailProcessor for the MailSigner is almost exactly the same as for the other components but here it's the 'service' method that needs to be implemented. There also exists a utility class called SMIMEHelper that contains methods for securing emails.</p><p class="P47">Â </p><p class="P123">Â </p><p class="P38"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Main</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">when</span><span class="T18"> </span><span class="T59">processing</span><span class="T18"> </span><span class="T59">mails</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">mail</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">mail</span><span class="T18"> </span><span class="T59">sent</span><span class="T18"> </span><span class="T59">through</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">SMTP</span><span class="T18"> </span><span class="T59">server</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">MessagingException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">error</span><span class="T18"> </span><span class="T59">occurred</span><span class="T18"> </span><span class="T59">during</span><span class="T18"> </span><span class="T59">processing</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">mail.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">signing</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">not</span><span class="T18"> </span><span class="T59">available</span><span class="T18"> </span><span class="T59">at</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">time</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">process.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P103"><span class="T29"><span style="margin-left:;"/></span><span class="T48">void</span><span class="T29"> service(Mail mail) </span><span class="T48">throws</span><span class="T29"> MessagingException, CryptoTokenOfflineException;</span></p><p class="P47">Â </p><p class="P123">Â </p><h2 class="Heading_20_2"><a name="20_3_Implementing_Crypto_Tokens"><span style="min-width:1.016cm;">20.3</span></a>Â Implementing Crypto Tokens</h2><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="20_3_1_The_ICryptoToken_Interface"><span style="min-width:1.27cm;">20.3.1</span></a>Â The ICryptoToken Interface</h3><ul><li><p class="P139" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>A custom crypto token needs to implement the interface org.signserver.server.cryptotokens.ICryptoToken. Â See P12CryptoToken for an example implementation.<span class="odfLiEnd"/>Â </p></li><li><p class="P139" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>You can define own properties for a crypto token in the same way as for workers. The properties are sent to the crypto token upon initialization.<span class="odfLiEnd"/>Â </p></li><li><p class="P139" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Make sure the custom class is available to the application server<span class="odfLiEnd"/>Â </p></li><li><p class="P139" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Redeploy the SignServer.<span class="odfLiEnd"/>Â </p></li><li><p class="P139" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Register the crypto token to a worker in the application by setting a property <span class="T39">WORKER&lt;id&gt;.CRYPTOTOKEN.CLASSPATH </span><span class="T15">with a global scope in the global configuration. (Also </span>make sure to set it's crypto tokens class-path, see next section).<span class="odfLiEnd"/>Â </p></li><li><p class="P139" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â.</span>Reload the service with the CLI reload command.<span class="odfLiEnd"/>Â </p></li></ul><p class="Standard">Â </p><p class="P22">Â </p><p class="P120">The ICryptoToken interface have the following methods that needs to be implemented:</p><p class="P22">Â </p><p class="Horizontal_20_Line">Â </p><p class="P21"><span class="T46">public</span><span class="T18"> </span><span class="T46">interface</span><span class="T18"> ICryptoToken {</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">public</span><span class="T18"> </span><span class="T46">static</span><span class="T18"> </span><span class="T46">final</span><span class="T18"> </span><span class="T46">int</span><span class="T18"> </span><span class="T76">PURPOSE_SIGN</span><span class="T18"> = 1;</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">public</span><span class="T18"> </span><span class="T46">static</span><span class="T18"> </span><span class="T46">final</span><span class="T18"> </span><span class="T46">int</span><span class="T18"> </span><span class="T76">PURPOSE_DECRYPT</span><span class="T18"> = 2;</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">public</span><span class="T18"> </span><span class="T46">static</span><span class="T18"> </span><span class="T46">final</span><span class="T18"> </span><span class="T46">int</span><span class="T18"> </span><span class="T76">PROVIDERUSAGE_SIGN</span><span class="T18"> Â  Â = 1;</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">public</span><span class="T18"> </span><span class="T46">static</span><span class="T18"> </span><span class="T46">final</span><span class="T18"> </span><span class="T46">int</span><span class="T18"> </span><span class="T76">PROVIDERUSAGE_DECRYPT</span><span class="T18"> = 2;</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P97"><span class="T18">Â  Â </span><span class="T59">/**</span><span class="T18"> </span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">called</span><span class="T18"> </span><span class="T59">after</span><span class="T18"> </span><span class="T59">creation</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">instance.</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*/</span><span class="T18"><span style="margin-left:;"/></span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">public</span><span class="T18"> </span><span class="T46">abstract</span><span class="T18"> </span><span class="T46">void</span><span class="T18"> init(Properties props) </span><span class="T46">throws</span><span class="T18"> CryptoTokenInitializationFailureException;</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> Â </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">returns</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">current</span><span class="T18"> </span><span class="T59">status</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> Â </span><span class="T59">Should</span><span class="T18"> </span><span class="T59">return</span><span class="T18"> </span><span class="T59">one</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">SignerStatus.STATUS_..</span><span class="T18"> </span><span class="T59">values</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">public</span><span class="T18"> </span><span class="T46">abstract</span><span class="T18"> </span><span class="T46">int</span><span class="T18"> getCryptoTokenStatus();</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">/**</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">activate</span><span class="T18"> </span><span class="T59">SignTokens</span><span class="T18"> </span><span class="T59">when</span><span class="T18"> </span><span class="T59">connected</span><span class="T18"> </span><span class="T59">after</span><span class="T18"> </span><span class="T59">being</span><span class="T18"> </span><span class="T59">off</span><span class="T77">-</span><span class="T59">line.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">authenticationcode</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">unlock</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token,</span><span class="T18"> </span><span class="T59">i.e</span><span class="T18"> </span><span class="T59">PIN</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">smartcard</span><span class="T18"> </span><span class="T59">HSMs</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">SignToken</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">not</span><span class="T18"> </span><span class="T59">available</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">connected.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenAuthenticationFailureException</span><span class="T18"> </span><span class="T59">with</span><span class="T18"> </span><span class="T59">error</span><span class="T18"> </span><span class="T59">message</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">authentication</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">fail.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*/</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T46">public</span><span class="T18"> </span><span class="T46">abstract</span><span class="T18"> </span><span class="T46">void</span><span class="T18"> activate(String authenticationcode) </span><span class="T46">throws</span><span class="T18"> CryptoTokenAuthenticationFailureException, CryptoTokenOfflineException; Â  Â </span></p><p class="P97">Â </p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">/**</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">deactivate</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">tokens.</span><span class="T18"> </span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Used</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">set</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">too</span><span class="T18"> </span><span class="T59">off</span><span class="T77">-</span><span class="T59">line</span><span class="T18"> </span><span class="T59">status</span><span class="T18"> </span><span class="T59">and</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">reset</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">HSMs</span><span class="T18"> </span><span class="T59">authorization</span><span class="T18"> </span><span class="T59">code.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">true</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">deactivation</span><span class="T18"> </span><span class="T59">was</span><span class="T18"> </span><span class="T59">successful.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*/</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T46">public</span><span class="T18"> </span><span class="T46">abstract</span><span class="T18"> </span><span class="T46">boolean</span><span class="T18"> deactivate(); Â  Â </span></p><p class="P100">Â  Â  </p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">/**</span><span class="T18"> </span><span class="T59">Returns</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">private</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">(if</span><span class="T18"> </span><span class="T59">possible)</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">token.</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">purpose</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">one</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">PURPOSE_...</span><span class="T18"> </span><span class="T59">constants</span><span class="T18"> </span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">CryptoToken</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">not</span><span class="T18"> </span><span class="T59">available</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">connected.</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">PrivateKey</span><span class="T18"> </span><span class="T59">object</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*/</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T46">public</span><span class="T18"> </span><span class="T46">abstract</span><span class="T18"> PrivateKey getPrivateKey(</span><span class="T46">int</span><span class="T18"> purpose) </span><span class="T46">throws</span><span class="T18"> CryptoTokenOfflineException;</span></p><p class="P97">Â </p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">/**</span><span class="T18"> </span><span class="T59">Returns</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">public</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">(if</span><span class="T18"> </span><span class="T59">possible)</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">token.</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">purpose</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">one</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">PURPOSE_...</span><span class="T18"> </span><span class="T59">constants</span><span class="T18"> Â  Â </span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">CryptoToken</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">not</span><span class="T18"> </span><span class="T59">available</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">connected.</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">PublicKey</span><span class="T18"> </span><span class="T59">object</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">*/</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T46">public</span><span class="T18"> </span><span class="T46">abstract</span><span class="T18"> PublicKey getPublicKey(</span><span class="T46">int</span><span class="T18"> purpose) </span><span class="T46">throws</span><span class="T18"> CryptoTokenOfflineException;</span></p><p class="P100">Â  Â  </p><p class="P100">Â  Â  </p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">/**</span><span class="T18"> </span><span class="T59">Returns</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">signature</span><span class="T18"> </span><span class="T59">Provider</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">sign</span><span class="T18"> </span><span class="T59">things</span><span class="T18"> </span><span class="T59">with</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> Â </span><span class="T59">the</span><span class="T18"> </span><span class="T59">PrivateKey</span><span class="T18"> </span><span class="T59">object</span><span class="T18"> </span><span class="T59">returned</span><span class="T18"> </span><span class="T59">by</span><span class="T18"> </span><span class="T59">this</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">device</span><span class="T18"> </span><span class="T59">implementation.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> Â </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">providerUsage</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">one</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">ICryptoToken.PROVIDERUSAGE_</span><span class="T18"> </span><span class="T59">constants</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> Â </span><span class="T59">specifying</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">usage</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">private</span><span class="T18"> </span><span class="T59">key.</span><span class="T18"> </span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">String</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">name</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">Provider</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*/</span></p><p class="P97"><span class="T18">Â  Â  </span><span class="T46">public</span><span class="T18"> </span><span class="T46">abstract</span><span class="T18"> String getProvider(</span><span class="T46">int</span><span class="T18"> providerUsage);</span></p><p class="P100">Â  Â  </p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">/**</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">returning</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">tokens</span><span class="T18"> </span><span class="T59">certificate</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">it's</span><span class="T18"> </span><span class="T59">included</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">token.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">This</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">only</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">implemented</span><span class="T18"> </span><span class="T59">by</span><span class="T18"> </span><span class="T59">soft</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">tokens</span><span class="T18"> </span><span class="T59">which</span><span class="T18"> </span><span class="T59">have</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">certificate</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">included</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">store.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">All</span><span class="T18"> </span><span class="T59">other</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">tokens</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">return</span><span class="T18"> </span><span class="T59">'null'</span><span class="T18"> </span><span class="T59">and</span><span class="T18"> </span><span class="T59">let</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">signer</span><span class="T18"> </span><span class="T59">fetch</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">certificate</span><span class="T18"> </span><span class="T59">from</span><span class="T18"> </span><span class="T59">database.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*/</span></p><p class="P100">Â  Â  </p><p class="P97"><span class="T18">Â  Â  </span><span class="T46">public</span><span class="T18"> </span><span class="T46">abstract</span><span class="T18"> Certificate getCertificate(</span><span class="T46">int</span><span class="T18"> purpose) </span><span class="T46">throws</span><span class="T18"> CryptoTokenOfflineException;</span></p><p class="P100">Â  Â  </p><p class="P100">Â  Â  </p><p class="P97"><span class="T18">Â  Â  </span><span class="T59">/**</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">returning</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">tokens</span><span class="T18"> </span><span class="T59">certificate</span><span class="T18"> </span><span class="T59">chain</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">it's</span><span class="T18"> </span><span class="T59">included</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">token.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">This</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">only</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">implemented</span><span class="T18"> </span><span class="T59">by</span><span class="T18"> </span><span class="T59">soft</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">tokens</span><span class="T18"> </span><span class="T59">which</span><span class="T18"> </span><span class="T59">have</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">certificates</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">included</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">store.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">All</span><span class="T18"> </span><span class="T59">other</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">tokens</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">return</span><span class="T18"> </span><span class="T59">'null'</span><span class="T18"> </span><span class="T59">and</span><span class="T18"> </span><span class="T59">let</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">signer</span><span class="T18"> </span><span class="T59">fetch</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">certificate</span><span class="T18"> </span><span class="T59">from</span><span class="T18"> </span><span class="T59">database.</span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18">Â  Â  Â </span><span class="T59">*/</span></p><p class="P100">Â  Â  </p><p class="P97"><span class="T18">Â  Â  </span><span class="T46">public</span><span class="T18"> </span><span class="T46">abstract</span><span class="T18"> Collection&lt;Certificate&gt; getCertificateChain(</span><span class="T46">int</span><span class="T18"> purpose) </span><span class="T46">throws</span><span class="T18"> CryptoTokenOfflineException;</span></p><p class="P100">Â  Â  </p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">tell</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">create</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">certificate</span><span class="T18"> </span><span class="T59">request</span><span class="T18"> </span><span class="T59">using</span><span class="T18"> </span><span class="T59">its</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">public</span><span class="T18"> ICertReqData genCertificateRequest(ISignerCertReqInfo info) </span><span class="T46">throws</span><span class="T18"> CryptoTokenOfflineException;</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">remove</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">signer</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">shouldn't</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">any</span><span class="T18"> </span><span class="T59">more</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">purpose</span><span class="T18"> </span><span class="T59">on</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">ICryptoToken.PURPOSE_</span><span class="T18"> </span><span class="T59">constants</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">true</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">removal</span><span class="T18"> </span><span class="T59">was</span><span class="T18"> </span><span class="T59">successful.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">public</span><span class="T18"> </span><span class="T46">boolean</span><span class="T18"> destroyKey(</span><span class="T46">int</span><span class="T18"> purpose);</span></p><p class="P100">}</p><p class="Horizontal_20_Line">Â </p><p class="P17">Â </p><h3 class="Heading_20_3"><a name="20_3_2_The_Extended_Crypto_Token_Interface"><span style="min-width:1.27cm;">20.3.2</span></a>Â The Extended Crypto Token Interface</h3><p class="Standard">Â </p><p class="Standard">The default group key service need support for symmetric keys in addition the the functionality provided in the basic crypto token which mainly focuses on asymmetric key functionality.</p><p class="Standard">Â </p><p class="Standard">The extended crypto token adds four more methods that need implementation used to generate exportable keys (symmetric or asymmetric) and to encrypt/decrypt data using symmetric keys.</p><p class="Standard">Â </p><p class="Horizontal_20_Line">Â </p><p class="P97"><span class="T46">public</span><span class="T18"> </span><span class="T46">interface</span><span class="T18"> IExtendedCryptoToken </span><span class="T46">extends</span><span class="T18"> ICryptoToken {</span></p><p class="P97">Â </p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">instructing</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">generate</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">returned</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">keyAlg</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">algorithm</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">generate,</span><span class="T18"> </span><span class="T59">it's</span><span class="T18"> </span><span class="T59">up</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">caller</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">check</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">supports</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">given</span><span class="T18"> </span><span class="T59">value.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">keySpec</span><span class="T18"> </span><span class="T59">specification</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key,</span><span class="T18"> </span><span class="T59">it's</span><span class="T18"> </span><span class="T59">up</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">caller</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">check</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">supports</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">given</span><span class="T18"> </span><span class="T59">value.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">either</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">java.security.Key</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">java.security.KeyPair</span><span class="T18"> </span><span class="T59">depending</span><span class="T18"> </span><span class="T59">on</span><span class="T18"> </span><span class="T59">type</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">keyAlg</span><span class="T18"> </span><span class="T59">sent</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">IllegalRequestException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">doesn't</span><span class="T18"> </span><span class="T59">support</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">given</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">alg</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">spec.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">online.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/>Serializable genExportableKey(String keyAlg, String keySpec) </span><span class="T46">throws</span><span class="T18"> IllegalRequestException, CryptoTokenOfflineException;</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Instructs</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">generate</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">stored</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">device</span><span class="T18"> </span><span class="T59">returning</span><span class="T18"> </span><span class="T59">only</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">alias</span><span class="T18"> </span><span class="T59">reference</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">keyAlg</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">algorithm</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">generate,</span><span class="T18"> </span><span class="T59">it's</span><span class="T18"> </span><span class="T59">up</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">caller</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">check</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">keySpec</span><span class="T18"> </span><span class="T59">keySpec</span><span class="T18"> </span><span class="T59">specification</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key,</span><span class="T18"> </span><span class="T59">it's</span><span class="T18"> </span><span class="T59">up</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">caller</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">check</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">supports</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">given</span><span class="T18"> </span><span class="T59">value.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">reference</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">can</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">later</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">encryption/decryption.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">IllegalRequestException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">doesn't</span><span class="T18"> </span><span class="T59">support</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">given</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">alg</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">spec.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">online.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/>String genNonExportableKey(String keyAlg, String keySpec) </span><span class="T46">throws</span><span class="T18"> IllegalRequestException, Â CryptoTokenOfflineException;</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">encrypt</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">using</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">stored</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token.</span><span class="T18"> </span><span class="T59">This</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">mainly</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">symmetric</span><span class="T18"> </span><span class="T59">encryption.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">keyRef</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">alias</span><span class="T18"> </span><span class="T59">reference</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">used.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">encrypt.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">encrypted</span><span class="T18"> </span><span class="T59">data.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">online.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">byte</span><span class="T18">[] encryptData(String keyRef, </span><span class="T46">byte</span><span class="T18">[] data) </span><span class="T46">throws</span><span class="T18"> CryptoTokenOfflineException; </span></p><p class="P100"><span style="margin-left:;"/></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">decrypt</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">using</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">stored</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token.</span><span class="T18"> </span><span class="T59">This</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">mainly</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">symmetric</span><span class="T18"> </span><span class="T59">encryption.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">keyRef</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">alias</span><span class="T18"> </span><span class="T59">reference</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">key</span><span class="T18"> </span><span class="T59">that</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">used.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">decrypt.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">encrypted</span><span class="T18"> </span><span class="T59">data.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">online.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">byte</span><span class="T18">[] decryptData(String keyRef, </span><span class="T46">byte</span><span class="T18">[] data) </span><span class="T46">throws</span><span class="T18"> CryptoTokenOfflineException;</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P100"><span style="margin-left:;"/></p><p class="P96">}</p><p class="Horizontal_20_Line">Â </p><h2 class="Heading_20_2"><a name="20_4_Other_Customizations"><span style="min-width:1.016cm;">20.4</span></a>Â Other Customizations</h2><p class="Standard">Â </p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="20_4_1_The_IValidator_Interface"><span style="min-width:1.27cm;">20.4.1</span></a>Â The IValidator Interface</h3><p class="Standard">Â </p><p class="Standard">A Validator is used in the DefaultValidationService to connect to different kinds of certificate status repositories, such as CRL, OCSP, XKMS, database etc. It contains two methods 'validate' used for the actual certificate validation and 'testConnection' used by health check related functionality to check that the connection to the underlying validator resource is alright.</p><p class="Standard">Â </p><p class="Horizontal_20_Line">Â </p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Main</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">Validation</span><span class="T18"> </span><span class="T59">Service</span><span class="T18"> </span><span class="T59">responsible</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">validating</span><span class="T18"> </span><span class="T59">certificates.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Important</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">validator</span><span class="T18"> </span><span class="T59">also</span><span class="T18"> </span><span class="T59">have</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">support</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">check</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">revocation</span><span class="T18"> </span><span class="T59">status</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span></p><p class="P97"><span class="T18">Â  Â  Â  Â  Â </span><span class="T59">*</span><span class="T18"> </span><span class="T59">involved</span><span class="T18"> </span><span class="T59">CA</span><span class="T18"> </span><span class="T59">certificates</span><span class="T18"> </span><span class="T59">and</span><span class="T18"> </span><span class="T59">should</span><span class="T18"> </span><span class="T59">only</span><span class="T18"> </span><span class="T59">return</span><span class="T18"> </span><span class="T59">Validation</span><span class="T18"> </span><span class="T59">object</span><span class="T18"> </span><span class="T59">with</span><span class="T18"> </span><span class="T59">status</span><span class="T18"> </span><span class="T59">REVOKED</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">VALID</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">If</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">validator</span><span class="T18"> </span><span class="T59">doesn't</span><span class="T18"> </span><span class="T59">support</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">given</span><span class="T18"> </span><span class="T59">issuer</span><span class="T18"> </span><span class="T59">it</span><span class="T18"> </span><span class="T59">must</span><span class="T18"> </span><span class="T59">return</span><span class="T18"> </span><span class="T59">null.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">cert</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">certificate</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">validate.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@return</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">Validation</span><span class="T18"> </span><span class="T59">object</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">null</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">certificate</span><span class="T18"> </span><span class="T59">couldn't</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">looked</span><span class="T18"> </span><span class="T59">up</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">this</span><span class="T18"> </span><span class="T59">validator.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">IllegalRequestException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">request</span><span class="T18"> </span><span class="T59">didn't</span><span class="T18"> </span><span class="T59">conform</span><span class="T18"> </span><span class="T59">with</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">specification.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">CryptoTokenOfflineException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">crypto</span><span class="T18"> </span><span class="T59">token</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">online.</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">SignServerException</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">general</span><span class="T18"> </span><span class="T59">failure</span><span class="T18"> </span><span class="T59">exception</span><span class="T18"> </span><span class="T59">during</span><span class="T18"> </span><span class="T59">validation.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/>Validation validate(ICertificate cert) </span><span class="T46">throws</span><span class="T18"> IllegalRequestException, CryptoTokenOfflineException, SignServerException;</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P100">Â </p><p class="P100">Â </p><p class="P100">Â </p><p class="P100">Â </p><p class="P100">Â </p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Optional</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">used</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">test</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">connection</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">a</span><span class="T18"> </span><span class="T59">specific</span><span class="T18"> </span><span class="T59">underlying</span><span class="T18"> </span><span class="T59">validator</span><span class="T18"> </span><span class="T59">implementation.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">ConnectException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">connection</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">underlying</span><span class="T18"> </span><span class="T59">validator</span><span class="T18"> </span><span class="T59">implementation</span><span class="T18"> </span><span class="T59">failed.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">SignServerException</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">general</span><span class="T18"> </span><span class="T59">failure</span><span class="T18"> </span><span class="T59">exception</span><span class="T18"> </span><span class="T59">during</span><span class="T18"> </span><span class="T59">validation.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">void</span><span class="T18"> testConnection() </span><span class="T46">throws</span><span class="T18"> ConnectException, SignServerException;</span></p><p class="P100"><span style="margin-left:;"/></p><p class="Horizontal_20_Line">Â </p><p class="Standard">Â </p><h3 class="Heading_20_3"><a name="20_4_2_The_IAuthorizer_Interface"><span style="min-width:1.27cm;">20.4.2</span></a>Â The IAuthorizer Interface</h3><p class="Standard">Â </p><p class="Standard">It's possible to integrate the authorization of processable requests with external authorizations applications. All that is needed is a class implementing the IAuthorizer interface containing two methods, 'init' and 'isAuthorized'.</p><p class="Standard">Â </p><p class="Standard">To register that the customized authorizer should be used by a worker, all that's needed to be done is to set the property AUTHTYPE to the class path of the authorizer implementation.</p><p class="Standard">Â </p><p class="Horizontal_20_Line">Â </p><p class="P97"><span class="T46">public</span><span class="T18"> </span><span class="T46">interface</span><span class="T18"> IAuthorizer {</span></p><p class="P100"><span style="margin-left:;"/></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Method</span><span class="T18"> </span><span class="T59">called</span><span class="T18"> </span><span class="T59">by</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">worker</span><span class="T18"> </span><span class="T59">upon</span><span class="T18"> </span><span class="T59">first</span><span class="T18"> </span><span class="T59">call</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">authenticator</span><span class="T18"> </span><span class="T59">after</span><span class="T18"> </span><span class="T59">instantiation.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">workerId</span><span class="T18"> </span><span class="T59">id</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">worker.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">config</span><span class="T18"> </span><span class="T59">active</span><span class="T18"> </span><span class="T59">worker</span><span class="T18"> </span><span class="T59">configuration</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">worker</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">em</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">SignServer</span><span class="T18"> </span><span class="T59">EntityManager</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">SignServerException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">unexpected</span><span class="T18"> </span><span class="T59">error</span><span class="T18"> </span><span class="T59">occurred</span><span class="T18"> </span><span class="T59">during</span><span class="T18"> </span><span class="T59">initialization.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">void</span><span class="T18"> init(</span><span class="T46">int</span><span class="T18"> workerId, WorkerConfig config, EntityManager em) </span><span class="T46">throws</span><span class="T18"> SignServerException;</span></p><p class="P97">Â </p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T59">/**</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T59">Main</span><span class="T18"> </span><span class="T59">method</span><span class="T18"> </span><span class="T59">determining</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">requester</span><span class="T18"> </span><span class="T59">is</span><span class="T18"> </span><span class="T59">authorized</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">process</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">in</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">request.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">request</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">request</span><span class="T18"> </span><span class="T59">data</span><span class="T18"> </span><span class="T59">sent</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">worker</span><span class="T18"> </span><span class="T59">to</span><span class="T18"> </span><span class="T59">process.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@param</span><span class="T18"> </span><span class="T59">requestContext</span><span class="T18"> </span><span class="T59">containing</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">optional</span><span class="T18"> </span><span class="T59">clientCert</span><span class="T18"> </span><span class="T59">client</span><span class="T18"> </span><span class="T59">certificate</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">remote</span><span class="T18"> </span><span class="T59">IP</span><span class="T18"> </span><span class="T59">of</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">user,</span><span class="T18"> </span><span class="T59">may</span><span class="T18"> </span><span class="T59">also</span><span class="T18"> </span><span class="T59">contain</span><span class="T18"> </span><span class="T59">customly</span><span class="T18"> </span><span class="T59">defined</span><span class="T18"> </span><span class="T59">data.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">SignServerException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">unexpected</span><span class="T18"> </span><span class="T59">error</span><span class="T18"> </span><span class="T59">occurred</span><span class="T18"> </span><span class="T59">during</span><span class="T18"> </span><span class="T59">authorization.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*</span><span class="T18"> </span><span class="T75">@throws</span><span class="T18"> </span><span class="T59">IllegalRequestException</span><span class="T18"> </span><span class="T59">if</span><span class="T18"> </span><span class="T59">the</span><span class="T18"> </span><span class="T59">requester</span><span class="T18"> </span><span class="T59">isn't</span><span class="T18"> </span><span class="T59">authorized</span><span class="T18"> </span><span class="T59">or</span><span class="T18"> </span><span class="T59">couldn't</span><span class="T18"> </span><span class="T59">be</span><span class="T18"> </span><span class="T59">authenticated</span><span class="T18"> </span><span class="T59">for</span><span class="T18"> </span><span class="T59">some</span><span class="T18"> </span><span class="T59">other</span><span class="T18"> </span><span class="T59">reason.</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/> </span><span class="T59">*/</span></p><p class="P97"><span class="T18"><span style="margin-left:;"/></span><span class="T46">void</span><span class="T18"> isAuthorized(ProcessRequest request, RequestContext requestContext) </span><span class="T46">throws</span><span class="T18"> IllegalRequestException, SignServerException;</span></p><p class="P100">}</p><p class="Horizontal_20_Line">Â </p><p class="Standard">Â </p><p class="P59">Â </p><h2 class="Heading_20_2"><a name="20_5_Using_the_Global_Configuration_Store"><span style="min-width:1.016cm;">20.5</span></a>Â Using the Global Configuration Store</h2><p class="P11">The global configuration store is a memory bank that workers can use to store data used</p><p class="P11">in ongoing operations. The data can be either node (i.e. only read by the current node) or global</p><p class="P11">scoped.<br/></p><p class="P13"><span class="T15">To access the global configuration store use the </span><span class="T38">getGlobalConfigurationSession() </span><span class="T15">method</span></p><p class="P11">from the BaseWorker (inherited by most of the base component implementations). The returned</p><p class="P11">GlobalConfigurationSession have the following methods that can be used (the other ones should be</p><p class="P11">avoided)</p><p class="P91">Â </p><p class="P35">/**</p><p class="P35">* Method setting a global configuration property. For node. prefix will the</p><p class="P35">node id be appended.</p><p class="P14"><span class="T49">* </span><span class="T50">@param </span><span class="T49">scope, one of the GlobalConfiguration.SCOPE_ constants</span></p><p class="P14"><span class="T49">* </span><span class="T50">@param </span><span class="T49">key of the property should not have any scope prefix, never null</span></p><p class="P14"><span class="T49">* </span><span class="T50">@param </span><span class="T49">value the value, never null.</span></p><p class="P35">*/</p><p class="P14"><span class="T45">public void </span><span class="T38">setProperty( java.lang.String scope,java.lang.String</span></p><p class="P17">key,java.lang.String value ) ;</p><p class="P35">/**</p><p class="P35">* Method used to remove a property from the global configuration.</p><p class="P14"><span class="T49">* </span><span class="T50">@param </span><span class="T49">scope, one of the GlobalConfiguration.SCOPE_ constants</span></p><p class="P14"><span class="T49">* </span><span class="T50">@param </span><span class="T49">key of the property should start with either glob. or node., never</span></p><p class="P35">null</p><p class="P14"><span class="T49">* </span><span class="T50">@return </span><span class="T49">true if removal was successful, othervise false.</span></p><p class="P35">*/</p><p class="P14"><span class="T45">public boolean </span><span class="T38">removeProperty( java.lang.String scope,java.lang.String key )</span></p><p class="P17">;</p><p class="P35">/**</p><p class="P35">* Method that returns all the global properties with Global Scope and Node</p><p class="P35">scopes properties for this node.</p><p class="P14"><span class="T49">* </span><span class="T50">@return </span><span class="T49">A GlobalConfiguration Object, nevel null</span></p><p class="P35">*/</p><p class="P14"><span class="T45">public </span><span class="T38">org.signserver.common.GlobalConfiguration getGlobalConfiguration( ) ;</span></p><p class="P93">Â </p><p class="P53">Â </p><p class="P11">The getGlobalConfiguration returns a GlobalConfiguration and have a method</p><p class="P13"><span class="T38">String getProperty(String scope, String property) </span><span class="T15">that can be used.</span></p><p class="P11">Â </p><p class="P11">The value of the property can be user-defined as long as it is guaranteed to be unique over the entire</p><p class="P11">application.<br/></p><p class="P13"><span class="T15">Reserved values are all property keys starting with â</span><span class="T38">WORKERâ.</span></p><p class="P16">Â </p><p class="P42">Â </p><p class="P61">Â </p><h1 class="Heading_20_1"><a name="21__Testing"><span style="min-width:0.762cm;">21 </span></a>Â Testing</h1><p class="Text_20_body">There exists some test scripts used to test that the SignServer functions correctly. They are described here. </p><p class="Text_20_body">Â </p><h2 class="Heading_20_2"><a name="21_1_Automatic_Junit_Tests"><span style="min-width:1.016cm;">21.1</span></a>Â Automatic Junit Tests</h2><p class="Standard">Automatic Junit tests lies in the directory '<span class="T52">src/tests</span>'. There are two different test suites, one for the SignServer build and the other for the MailSigner. The same command applies for both.</p><p class="Standard">Â </p><p class="P28">Important: <span class="T14">For the SignServer test suite to run successful through all the tests must both the Main WebService and validation service WebService API be enabled in the build configuration.</span></p><p class="Standard">Â </p><p class="Standard">To run the test suite do the following:</p><ul><li><p class="P144" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Set the environment variable SIGNSERVER_HOME<span class="odfLiEnd"/>Â </p></li><li><p class="P144" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>Make sure the sign server is deployed and JBoss is running<span class="odfLiEnd"/>Â </p></li><li><p class="P144" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>do 'ant test:run' <span class="odfLiEnd"/>Â </p></li><li><p class="P144" style="margin-left:0.635cm;"><span class="Bullet_20_Symbols" style="display:block;float:left;min-width:0.635cm;">â¢.</span>A protocol is generated in the directory 'tmp/bin/junit'<br/><span style="margin-left:0.635cm"/><span class="odfLiEnd"/>Â </p></li></ul><h2 class="P151"><a name="21_2_Testing_the_TimeStamp_Authority"><span style="min-width:1.016cm;">21.2</span></a>Testing the TimeStamp Authority</h2><p class="P94">Â </p><h3 class="Heading_20_3"><a name="21_2_1_The_TSA_Test_Client"><span style="min-width:1.27cm;">21.2.1</span></a>Â The TSA Test Client</h3><p class="Text_20_body">There exists a Time Stamp Authority test client that is built with the main distribution. For other workers it's recommended to test it with the WS CLI client described in the 'Main WebService' section.</p><p class="Text_20_body">Â </p><p class="Text_20_body">It only works without client authentication requirements and through HTTP.</p><p class="Text_20_body">Â </p><p class="Text_20_body">To run the client do</p><p class="Text_20_body"><span class="Example"><span class="T2">ant</span></span></p><p class="Text_20_body"><span class="Example"><span class="T2">cd dist-client</span></span></p><p class="Text_20_body"><span class="Example"><span class="T2">java -jar timeStampClient.jar âhttp://&lt;hostname&gt;:8080/signserver/tsa?signerId=1â</span></span></p><p class="Text_20_body">Â </p><p class="Text_20_body">It will continuously make one request per second.</p><p class="Text_20_body">Â </p><h3 class="Heading_20_3"><a name="21_2_2_Manual_Tests"><span style="min-width:1.27cm;">21.2.2</span></a>Â Manual Tests</h3><p class="Standard">Â </p><p class="Standard">The time stamp signer have been tested with the OpenTSA client with both HTTP and HTTPS.</p><p class="Standard">Â </p><p class="Standard">Â </p><p class="P59">Â </p><h1 class="Heading_20_1"><a name="22__References"><span style="min-width:0.762cm;">22 </span></a>Â References</h1><p class="P30">Java Â (<a href="http://java.sun.com/">http://java.sun.com</a>)</p><p class="P30">Â </p><p class="Standard"><span class="T6">Jboss Â (</span><a href="http://www.jboss.org/"><span class="T6">http://www.jboss.org</span></a><span class="T6">)</span></p><p class="P30">Â </p><p class="P30">Apache James mail server Â (<a href="http://james.apache.org/">http://james.apache.org/</a>)</p><p class="P30">Â </p><p class="Standard"><span class="T6">Apache Ant (</span><a href="http://ant.apache.org/"><span class="T6">http://ant.apache.org</span></a><span class="T6">)</span></p><p class="P30">Â </p><p class="Standard"><span class="T6">Bouncycastle (</span><a href="http://www.bouncycastle.org/"><span class="T6">http://www.bouncycastle.org</span></a><span class="T6">)</span></p><p class="P30">Â </p><p class="Standard"><span class="T6">RFC3161, Time-Stamp Protocol (TSP) (</span><a href="http://www.ietf.org/"><span class="T6">http://www.ietf.org</span></a><span class="T6">)</span></p><p class="Standard">Â </p></body></html>
